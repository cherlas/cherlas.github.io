<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å°ä¸€ | è«èˆå·±é“ å‹¿æ‰°ä»–å¿ƒ</title>
  
  <subtitle>è«èˆå·±é“ï¼Œå‹¿æ‰°ä»–å¿ƒ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.istarx.cn/"/>
  <updated>2019-08-15T08:57:59.746Z</updated>
  <id>http://www.istarx.cn/</id>
  
  <author>
    <name>å°ä¸€</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Android Q æ–°ç‰¹æ€§ä¹‹ Bubble</title>
    <link href="http://www.istarx.cn/2019/08/15/android-q-bubbles/"/>
    <id>http://www.istarx.cn/2019/08/15/android-q-bubbles/</id>
    <published>2019-08-15T07:19:42.000Z</published>
    <updated>2019-08-15T08:57:59.746Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>Android Q ç›®å‰å·²ç»å‘å¸ƒåˆ°æœ€åä¸€ä¸ª Beta ç‰ˆæœ¬äº†ï¼Œå†è¿‡ä¸ä¹… Q æ­£å¼ç‰ˆæœ¬å°±è¦æ¨å‡ºäº†ã€‚Q ç‰ˆæœ¬ä¸­æ–°å¢äº†ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ï¼Œå¿…é¡» Bubblesï¼Œå¯¹è¯æ¡†ä¸­æ·»åŠ è®¾ç½®é¡¹ç­‰ã€‚æœ¬æ–‡ä¸»è¦ç®€è¿° Bubble æ–°ç‰¹æ€§ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#%E7%AE%80%E8%BF%B0">ç®€è¿°</a></li><li><a href="#%E5%88%9B%E5%BB%BA-bubble">åˆ›å»º Bubble</a><ul><li><a href="#%E9%85%8D%E7%BD%AEactivity">é…ç½®Activity</a></li><li><a href="#%E5%88%9B%E5%BB%BA%E9%80%9A%E7%9F%A5">åˆ›å»ºé€šçŸ¥</a></li></ul></li><li><a href="#%E5%90%8E%E5%8F%B0%E9%80%9A%E7%9F%A5%E6%B0%94%E6%B3%A1">åå°é€šçŸ¥æ°”æ³¡</a></li><li><a href="#bubble-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Bubble çš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#demo">Demo</a></li></ul></p><h2 id="ç®€è¿°"><a class="anchor" href="#ç®€è¿°"></a> ç®€è¿°</h2><p>Bubble æ„ä¸ºæ°”æ³¡ï¼Œæ˜¯ Android ç”¨æ¥å–ä»£ SYSTEM_ALERT_WINDOW çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›®å‰ Q åªæœ‰å¼€å‘è€…æ¨¡å¼ä¸‹æ‰å¯ä»¥ä½¿ç”¨æ°”æ³¡ã€‚å®˜ç½‘ä¸Šæ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p><blockquote><p>åœ¨ Android Q å¼€å‘è€…é¢„è§ˆç‰ˆä¸­ï¼Œæ°”æ³¡ç›®å‰é¢å‘æ‰€æœ‰ç”¨æˆ·å¯ç”¨ã€‚åœ¨æœ€ç»ˆç‰ˆæœ¬ä¸­ï¼Œåªæœ‰å¼€å‘è€…å¯ä»¥ä½¿ç”¨æ°”æ³¡ã€‚</p></blockquote><p>Bubble å’Œ Alert Window ä¸åŒçš„åœ°æ–¹åœ¨äº Bubble æ˜¯å†…ç½®äº Notification ä¸­çš„ï¼Œåªéœ€è¦åœ¨ç°æœ‰ é€šçŸ¥çš„åŸºç¡€ä¸Šè¿›è¡Œç¨å¾®çš„æ”¹åŠ¨å³å¯æ˜¾ç¤ºæ°”æ³¡ã€‚</p><p>SYSTEM_ALERT_WINDOW çš„ä¼˜å…ˆçº§æ˜¯å¾ˆé«˜çš„ï¼Œå¯ä»¥å åŠ åœ¨å…¶å®ƒåº”ç”¨çš„ä¸Šå±‚ï¼Œå› æ­¤ Bubble ä¹Ÿæœ‰æ­¤ç‰¹æ€§ã€‚å®ƒä¸ä»…å¯ä»¥æµ®åŠ¨åœ¨å…¶å®ƒåº”ç”¨ä¸Šå±‚ï¼Œè€Œä¸”å¯ä»¥è¿›è¡Œç§»åŠ¨æˆ–è€…è¿›è¡Œå±•å¼€ã€æŠ˜å æˆ–è€…å…³é—­ã€‚</p><p>Android Q é¢„è§ˆç‰ˆä¸Šè¦ä½¿ç”¨Bubble åŠŸèƒ½éœ€è¦åœ¨å¼€å‘è€…é€‰é¡¹ä¸­æ‰“å¼€<code>æ°”æ³¡</code>é€‰é¡¹ã€‚å¦åˆ™å³ä½¿æ»¡è¶³æ°”æ³¡æ˜¾ç¤ºæ¡ä»¶ä¹Ÿä¼šä»¥ä¼ ç»Ÿé€šçŸ¥çš„æ–¹å¼è¿›è¡Œæ˜¾ç¤ºã€‚</p><h2 id="åˆ›å»º-bubble"><a class="anchor" href="#åˆ›å»º-bubble"></a> åˆ›å»º Bubble</h2><h3 id="é…ç½®activity"><a class="anchor" href="#é…ç½®activity"></a> é…ç½®Activity</h3><p>Bubble ç‚¹å‡»å¯ä»¥æ˜¾ç¤ºä¸€ä¸ª Activityï¼Œæ­¤ Activity å¿…é¡»æ»¡è¶³æ½œå…¥ã€è°ƒæ•´å¤§å°ç­‰ç‰¹æ€§ï¼Œå³éœ€è¦åœ¨ Manifest æ–‡ä»¶ä¸­è¦å¯¹æ˜¾ç¤ºçš„ Activity è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼Œå¦‚æœåº”ç”¨å¯ä»¥æ˜¾ç¤ºå¤šä¸ªç›¸åŒç±»å‹çš„æ°”æ³¡ï¼Œåˆ™éœ€è¦åœ¨ Manifest æ–‡ä»¶ä¸­é…ç½® <code>documentLaunchMode</code> å±æ€§ä¸º<code>always</code>:</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:name</span>=<span class="string">".BubbleLoginActivity"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:label</span>=<span class="string">"@string/title_activity_bubble_login"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:allowEmbedded</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:resizeableActivity</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">      <span class="attr">android:documentLaunchMode</span>=<span class="string">"always"</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="alert warning"><p><code>documentLaunchMode</code>  å±æ€§çš„ä¿®æ”¹ä¼šæ”¹å˜å¯¹åº” Activity çš„å¯åŠ¨æ–¹å¼ï¼Œä¹Ÿä¼šæ”¹å˜å¯åŠ¨åŠ¨ç”»ã€‚</p><p>å…·ä½“æ–¹å¼ä¸ºï¼š</p><ul><li><p>intoExisting: activity ä¼šä¸ºè¯¥documentè¯·æ±‚ä¸€ä¸ªå·²ç»å­˜åœ¨çš„taskï¼Œè¿™ä¸ è®¾ç½®FLAG_ACTIVITY_NEW_DOCUMENT ä¸”ä¸è®¾ç½® FLAG_ACTIVITY_MULTIPLE_TASK æœ‰ç›¸åŒçš„æ•ˆæœ</p></li><li><p>always: ctivity ä¼šä¸ºè¯¥documentåˆ›å»ºä¸€ä¸ªæ–°çš„taskï¼Œå³ä½¿è¯¥documentå·²ç»è¢«æ‰“å¼€äº†ï¼Œè¿™ä¸è®¾ç½® FLAG_ACTIVITY_NEW_DOCUMENT ä¸”è®¾ç½® FLAG_ACTIVITY_MULTIPLE_TASK æœ‰ç›¸åŒçš„æ•ˆæœ</p></li><li><p>none: activity ä¸ä¼šä¸º document åˆ›å»ºæ–°çš„taskï¼Œè¯¥appè¢«è®¾ç½®ä¸º single task çš„æ¨¡å¼ï¼Œå®ƒä¼šé‡æ–°è°ƒç”¨ç”¨æˆ·å”¤é†’çš„æ‰€æœ‰activityä¸­çš„æœ€è¿‘çš„ä¸€ä¸ª</p></li><li><p>never: activity ä¸ä¼šä¸ºdocumentåˆ›å»ºä¸€ä¸ªæ–°çš„taskï¼Œè®¾ç½®è¿™ä¸ªå€¼å¤å†™äº† FLAG_ACTIVITY_NEW_DOCUMENT å’Œ FLAG_ACTIVITY_MULTIPLE_TASK æ ‡ç­¾ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªæ ‡ç­¾è¢«è®¾ç½®ï¼Œå¹¶ä¸”overview screen æ˜¾ç¤ºè¯¥appä¸º<br>single task æ¨¡å¼ã€‚ åˆ™è¯¥activity ä¼šé‡æ–°è°ƒç”¨ç”¨æˆ·æœ€è¿‘å”¤é†’çš„activity</p></li></ul><p>none æˆ– nerver ä½¿ç”¨æ—¶ï¼Œactivityå¿…é¡»è®¾ç½®ä¸º launchMode=â€standardâ€ ï¼Œå¦‚æœè¯¥å±æ€§æ²¡æœ‰è®¾ç½®ï¼ŒdocumentLaunchMode=â€noneâ€ å±æ€§å°±ä¼šè¢«ä½¿ç”¨</p></div><h3 id="åˆ›å»ºé€šçŸ¥"><a class="anchor" href="#åˆ›å»ºé€šçŸ¥"></a> åˆ›å»ºé€šçŸ¥</h3><p>å‰é¢å·²ç»è¯´è¿‡ Bubble æ˜¯å†…ç½®äºé€šçŸ¥ç³»ç»Ÿä¸­çš„ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±æ˜¯æŒ‰ç…§ä¼ ç»Ÿçš„æ­¥éª¤åˆ›å»ºé€šçŸ¥ã€‚ä½†æ˜¯éœ€è¦åˆ›å»º<code>Notification.BubbleMetadata</code>ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°é€šçŸ¥ä¸­ï¼š</p><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºé€šçŸ¥æ¸ é“</span></span><br><span class="line"><span class="keyword">val</span> notificationManager: NotificationManager = applicationContext.getSystemService(Context.NOTIFICATION_SERVICE) <span class="keyword">as</span> NotificationManager</span><br><span class="line">notificationManager.createNotificationChannel(NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_HIGH)) </span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç‚¹å‡» Bubble çš„intent</span></span><br><span class="line"><span class="keyword">val</span> target = Intent(applicationContext, BubbleLoginActivity::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line"><span class="keyword">val</span> bubbleIntent: PendingIntent = PendingIntent.getActivity(applicationContext, <span class="number">0</span>, target, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º BubbleMetadata</span></span><br><span class="line"><span class="keyword">val</span> bubbleMetadata = Notification.BubbleMetadata.Builder()</span><br><span class="line">        .setIntent(bubbleIntent)</span><br><span class="line">        .setDesiredHeight(<span class="number">600</span>)</span><br><span class="line">        .setIcon(Icon.createWithResource(applicationContext, R.drawable.ic_notifications))</span><br><span class="line">        .build()</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º Notification å¹¶å‘é€</span></span><br><span class="line"><span class="keyword">val</span> notification = Notification.Builder(applicationContext, CHANNEL_ID)</span><br><span class="line">        .setContentIntent(bubbleIntent)</span><br><span class="line">        .setContentTitle(resources.getString(R.string.notification))</span><br><span class="line">        .setContentText(resources.getString(R.string.notification_contnet_text))</span><br><span class="line">        .setBubbleMetadata(bubbleMetadata)</span><br><span class="line">        .setSmallIcon(R.drawable.ic_notifications)</span><br><span class="line">        .build()</span><br><span class="line"></span><br><span class="line">notificationManager.notify(CHANNEL_TAG, <span class="number">0</span>, notification)</span><br></pre></td></tr></table></figure><blockquote><p>å½“æ‚¨ç¬¬ä¸€æ¬¡å‘é€é€šçŸ¥ä»¥æ˜¾ç¤ºæ°”æ³¡æ—¶ï¼Œæ­¤é€šçŸ¥å¿…é¡»åœ¨å…·æœ‰ <code>IMPORTANCE_HIGH</code>çš„é€šçŸ¥æ¸ é“ä¸­ã€‚è¿™æ˜¯å› ä¸ºæ°”æ³¡ç”±é€šçŸ¥é‡è¦ç¨‹åº¦ç®¡ç†å™¨å¤„ç†ã€‚å¦‚æœç³»ç»Ÿåœ¨ç”¨æˆ·æœ‰æœºä¼šå…è®¸æˆ–å±è”½æ°”æ³¡ä¹‹å‰é™ä½äº†é€šçŸ¥çš„é‡è¦ç¨‹åº¦ï¼Œåˆ™é€šçŸ¥å°†æ— æ³•æ˜¾ç¤ºä¸ºæ°”æ³¡ã€‚</p></blockquote><p>å¦‚éœ€åœ¨åˆ›å»º Bubble æ—¶è‡ªåŠ¨å±•å¼€å¯¹åº”çš„ activityï¼Œåªéœ€è¦åœ¨ BubbleMetadata ä¸­è®¾ç½®ï¼š<code>setAutoExpandBubble()</code>å’Œ <code>setSuppressInitialNotification()</code>ä¸ºtrueã€‚</p><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> bubbleMetadata = Notification.BubbleMetadata.Builder()</span><br><span class="line">        .setIntent(bubbleIntent)</span><br><span class="line">        .setDesiredHeight(<span class="number">600</span>)</span><br><span class="line">        .setIcon(Icon.createWithResource(applicationContext, R.drawable.ic_notifications))</span><br><span class="line">        .setAutoExpandBubble(<span class="literal">true</span>)</span><br><span class="line">        .setSuppressNotification(<span class="literal">true</span>)</span><br><span class="line">        .build()</span><br></pre></td></tr></table></figure><h2 id="åå°é€šçŸ¥æ°”æ³¡"><a class="anchor" href="#åå°é€šçŸ¥æ°”æ³¡"></a> åå°é€šçŸ¥æ°”æ³¡</h2><p>æŒ‰ç…§å®˜ç½‘ä¸Šçš„è¯´æ³•ï¼Œå¦‚æœåº”ç”¨åœ¨åå°ï¼Œé‚£ä¹ˆæ˜¾ç¤ºæ°”æ³¡çš„æ¡ä»¶æœ‰ä»¥ä¸‹ä¸¤ä¸ªï¼š</p><ul><li>é€šçŸ¥ä½¿ç”¨äº† MessageStyeï¼Œå¹¶ä¸”æ·»åŠ Personï¼›</li><li>é€šçŸ¥æ¥è‡ªå¯¹ [Service.startForeground](<a href="https://developer.android.google.cn/reference/android/app/Service.html#startForeground">https://developer.android.google.cn/reference/android/app/Service.html#startForeground</a>(int, android.app.Notification)) çš„è°ƒç”¨ï¼Œç±»åˆ«ä¸º <a href="https://developer.android.google.cn/reference/android/app/Notification.html#CATEGORY_CALL">CATEGORY_CALL</a>ï¼Œå¹¶æ·»åŠ äº† <a href="https://developer.android.google.cn/reference/android/app/Person">Person</a>ã€‚</li></ul><p>è¿™ä¸¤ä¸ªæ¡ä»¶å¹¶éæœ€ç»ˆçš„ç‰ˆæœ¬ï¼Œåç»­å¯èƒ½è¦å‘ç”Ÿå˜åŒ–ã€‚</p><p>ä½†æ˜¯æµ‹è¯•äº†ç¬¬ä¸€ä¸ªæ¡ä»¶ï¼Œè¿˜æ˜¯ä»¥ä¼ ç»Ÿé€šçŸ¥çš„æ–¹å¼å¼¹å‡ºçš„ã€‚ç›®å‰è¿˜ä¸çŸ¥é“å…·ä½“é—®é¢˜å‡ºåœ¨å“ªğŸ˜–ğŸ˜–ğŸ˜–</p><h2 id="bubble-çš„ç”Ÿå‘½å‘¨æœŸ"><a class="anchor" href="#bubble-çš„ç”Ÿå‘½å‘¨æœŸ"></a> Bubble çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>Bubble å±•å¼€çš„ Activity éµå¾ªä¼ ç»Ÿ Activity çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªå•ç‹¬çš„ Activity æ ˆï¼Œå½“æ°”æ³¡æŠ˜å æˆ–è€…å…³é—­æ—¶æ­¤activity ä¼šé”€æ¯ã€‚</p><h2 id="demo"><a class="anchor" href="#demo"></a> Demo</h2><p><img src="bubble.gif" alt="bubble"></p><p>ä»£ç åœ°å€ï¼š<a href="https://github.com/cherlas/BlogDemo/tree/master/BubbleDemo">Bubble Demo</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Android Q ç›®å‰å·²ç»å‘å¸ƒåˆ°æœ€åä¸€ä¸ª Beta ç‰ˆæœ¬äº†ï¼Œå†è¿‡ä¸ä¹… Q æ­£å¼ç‰ˆæœ¬å°±è¦æ¨å‡ºäº†ã€‚Q ç‰ˆæœ¬ä¸­æ–°å¢äº†ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ï¼Œå¿…é¡» Bubblesï¼Œå¯¹è¯æ¡†ä¸­æ·»åŠ è®¾ç½®é¡¹ç­‰ã€‚æœ¬æ–‡ä¸»è¦ç®€è¿° Bubble æ–°ç‰¹æ€§ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¨‹åºçŒ¿è¿›åŒ–ä¹‹è·¯" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="android" scheme="http://www.istarx.cn/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>10X ç¨‹åºå‘˜å·¥ä½œæ³•å­¦ä¹ æ•´ç† Part1</title>
    <link href="http://www.istarx.cn/2019/07/14/10X-work-method-part1/"/>
    <id>http://www.istarx.cn/2019/07/14/10X-work-method-part1/</id>
    <published>2019-07-14T02:41:39.000Z</published>
    <updated>2019-07-14T07:26:40.577Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æœ€è¿‘åœ¨å­¦ä¹ éƒ‘è€å¸ˆçš„ 10X ç¨‹åºå‘˜å·¥ä½œæ³•ï¼Œè¯¾ç¨‹é‡Œé¢æœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ å’Œå€Ÿé‰´çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰å¾ˆå¤šæœ‰è¶£çš„åœ°æ–¹ï¼Œåšä¸ªæ•´ç†ï¼Œå¸Œæœ›åœ¨æ•´ç†çš„è¿‡ç¨‹ä¸­èƒ½å­¦ä¹ åˆ°æ›´å¤šçš„æŠ€å·§ï¼Œé€šè¿‡å®è·µå»è¾¾åˆ°èæ±‡è´¯é€šçš„ç›®çš„ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#%E7%BB%BC%E8%BF%B0">ç»¼è¿°</a></li><li><a href="#%E4%BB%A5%E7%BB%88%E4%B8%BA%E5%A7%8B">ä»¥ç»ˆä¸ºå§‹</a><ul><li><a href="#%E5%A6%82%E4%BD%95%E8%AE%A9%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8A%AA%E5%8A%9B%E4%B8%8D%E7%99%BD%E8%B4%B9-%E5%AD%A6%E4%BC%9A%E5%8F%8D%E7%9B%B4%E8%A7%89%E6%80%9D%E7%BB%B4">å¦‚ä½•è®©è‡ªå·±çš„åŠªåŠ›ä¸ç™½è´¹ â€” å­¦ä¼šåç›´è§‰æ€ç»´</a></li><li><a href="#%E6%98%8E%E7%A1%AE%E5%AE%8C%E6%88%90%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E6%A0%87%E5%87%86">æ˜ç¡®<code>å®Œæˆ</code>çš„å®šä¹‰å’Œæ ‡å‡†</a></li><li><a href="#%E5%B0%BD%E6%97%A9%E8%BF%9B%E8%A1%8C%E9%9B%86%E6%88%90-%E5%87%8F%E5%B0%91%E9%9B%86%E6%88%90%E6%89%80%E9%9C%80%E8%A6%81%E7%9A%84%E6%97%B6%E9%97%B4">å°½æ—©è¿›è¡Œé›†æˆ â€” å‡å°‘é›†æˆæ‰€éœ€è¦çš„æ—¶é—´</a></li><li><a href="#%E9%BB%98%E8%AE%A4%E6%89%80%E6%9C%89%E9%9C%80%E6%B1%82%E9%83%BD%E4%B8%8D%E5%81%9A%E7%9B%B4%E5%88%B0%E5%BC%84%E6%B8%85%E6%A5%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%81%9A%E8%BF%99%E4%BB%B6%E4%BA%8B">é»˜è®¤æ‰€æœ‰éœ€æ±‚éƒ½ä¸åšï¼Œç›´åˆ°å¼„æ¸…æ¥šä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹</a></li><li><a href="#%E6%8F%90%E5%8D%87%E8%87%AA%E5%B7%B1%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87">æå‡è‡ªå·±çš„ä¸Šä¸‹æ–‡</a></li><li><a href="#%E8%BF%AD%E4%BB%A30-%E5%BC%80%E5%8F%91%E5%89%8D%E6%9C%9F%E7%9A%84%E5%87%86%E5%A4%87">è¿­ä»£0 â€” å¼€å‘å‰æœŸçš„å‡†å¤‡</a><ul><li><a href="#%E9%9C%80%E6%B1%82%E6%96%B9%E9%9D%A2">éœ€æ±‚æ–¹é¢</a></li><li><a href="#%E6%8A%80%E6%9C%AF%E6%96%B9%E9%9D%A2">æŠ€æœ¯æ–¹é¢</a></li></ul></li></ul></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li></ul></p><h2 id="ç»¼è¿°"><a class="anchor" href="#ç»¼è¿°"></a> ç»¼è¿°</h2><p>åˆ°ç›®å‰ä¸ºæ­¢å·¥ä½œæ»¡æ‰“æ»¡ç®—ä¹Ÿæœ‰2å¹´å¤šä¸€ç‚¹äº†ï¼Œä»æœ€åˆçš„æ‡µæ‡µæ‡‚æ‡‚åˆ°ç°åœ¨çš„ç‹¬å½“ä¸€é¢ï¼Œä»æœ€åˆè‡ªåŠ¨åŒ–å…¥æ‰‹ï¼Œåˆ°ç°åœ¨å„ç§éœ€æ±‚çš„å¼€å‘ä»¥åŠ bug çš„è§£å†³ï¼Œæˆ‘å¯¹è‡ªå·±çš„è¿›æ­¥è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒæ»¡æ„çš„ï¼Œç›´åˆ°æˆ‘åœ¨ ã€Š10X ç¨‹åºå‘˜å·¥ä½œæ³•ã€‹è¯¾ç¨‹ä¸­çœ‹åˆ°äº†ä¸€å¥è¯ï¼š</p><blockquote><p><strong>ä¼˜ç§€ç¨‹åºå‘˜çš„å¼€å‘æ•ˆç‡æ˜¯æ™®é€šç¨‹åºå‘˜çš„10å€ã€‚  â€” ã€Šäººæœˆç¥è¯ã€‹</strong></p></blockquote><p>æƒ³æƒ³è‡ªå·±çš„æ•ˆç‡ç¦»è¿™ä¸ªç»“è®ºè¿˜æ˜¯å·®äº†åä¸‡å…«åƒé‡Œï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾éœ€ç»§ç»­åŠªåŠ›å‘¼ã€‚</p><p>æ—¢ç„¶æœ‰äº†å·®è·ï¼Œé‚£ä¹ˆå°±éœ€è¦å®šä¸ªç›®æ ‡ï¼Œæ€ä¹ˆå®šå‘¢ï¼Ÿéƒ‘è€å¸ˆç»™å‡ºäº†ä¸€ä¸ªæ€è€ƒæ¡†æ¶ï¼š</p><ul><li>æˆ‘ç°åœ¨åœ¨å“ªï¼Ÿ</li><li>æˆ‘å°†è¦åˆ°å“ªå»ï¼Ÿ</li><li>æˆ‘ç”¨ä»€ä¹ˆæ–¹æ³•æ‰èƒ½è¾¾åˆ°ç›®çš„ï¼Ÿ</li></ul><p>å…¶å®è¿™ä¸‰æ­¥åˆ†åˆ«æ˜¯è®¤è¯†åˆ°è‡ªå·±çš„ç°çŠ¶ã€ç¡®å®šè‡ªå·±çš„ç›®æ ‡ã€ç¡®å®šè¾¾åˆ°ç›®æ ‡çš„ç°çŠ¶ã€‚é’ˆå¯¹æˆ‘è‡ªå·±æƒ…å†µï¼Œä¸‰ä¸ªé—®é¢˜çš„ç­”æ¡ˆå¦‚ä¸‹ï¼š</p><ul><li>æˆ‘ç°åœ¨åœ¨å“ªï¼Ÿ ä¸å¤ªæ‰å®çš„ä¸­çº§ç¨‹åºå‘˜</li><li>æˆ‘å°†è¦åˆ°å“ªå»ï¼ŸçŸ­æœŸç›®æ ‡ï¼šAndroid æ–¹é¢åšåˆ°é«˜çº§å·¥ç¨‹å¸ˆï¼›é•¿æœŸç›®æ ‡ï¼šå…¨æ ˆå·¥ç¨‹å¸ˆ</li><li>ç”¨ä»€ä¹ˆæ–¹æ³•è¾¾åˆ°ç›®æ ‡ï¼ŸAndroid æ–¹é¢éœ€è¦å­¦ä¹ æºç åŠ FrameWork å±‚ï¼Œå­¦ä¹ æ€§èƒ½ä¼˜åŒ–ï¼›åˆ©ç”¨ç©ºé—²æ—¶é—´å­¦ä¹ å…¨æ ˆçš„æŠ€èƒ½ã€‚</li></ul><p>çŸ­æœŸç›®æ ‡æ˜¯ä¸æˆ‘å·¥ä½œç›¸å…³çš„ï¼Œæ˜¯å¿…é¡»è¦å®ç°çš„ï¼Œè€Œé•¿æœŸç›®æ ‡åˆ™æ˜¯è‡ªå·±çš„å…´è¶£çˆ±å¥½ï¼Œæœ¬äººæ¯”è¾ƒçƒ­è¡·äºæŠ€æœ¯æ‰€ä»¥æƒ³åœ¨æŠ€æœ¯æ–¹é¢æ·±ç©¶ã€‚</p><p>ä¸Šè¿°ä¸‰ä¸ªé—®é¢˜è¯¾ç¨‹ä¸­ä¹Ÿåšäº†è§£ç­”ï¼Œç­”æ¡ˆæ˜¯é‡åˆ°å…·ä½“é—®é¢˜çš„æ€è€ƒæ–¹æ³•ï¼Œä¹Ÿæ˜¯æ•´ä¸ªè¯¾ç¨‹çš„æçº²ï¼š</p><ul><li>æˆ‘ä»¬ç°åœ¨åœ¨å“ªï¼Ÿå³ç›®å‰é‡åˆ°çš„é—®é¢˜æˆ–è€…éœ€è¦å®Œæˆçš„ä»»åŠ¡</li><li>æˆ‘ä»¬è¦åˆ°å“ªå»ï¼Ÿ<strong>ä»¥ç»ˆä¸ºå§‹</strong></li><li>æˆ‘ä»¬å¦‚ä½•åˆ°è¾¾å“ªé‡Œï¼Ÿ<ul><li><strong>ä»»åŠ¡åˆ†è§£</strong></li><li><strong>æ²Ÿé€šåé¦ˆ</strong></li><li><strong>è‡ªåŠ¨åŒ–</strong></li></ul></li></ul><p>æˆ‘ä»¬å¹³å¸¸å·¥ä½œçš„è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„å›°éš¾å¤§å¤šæ•°éƒ½æ˜¯å¶ç„¶å¤æ‚åº¦é€ æˆçš„ï¼Œä¸Šè¿°æ–¹æ³•è®ºåˆ™æ˜¯é€šè¿‡å‰æœŸå·¥ä½œæ–¹æ³•å¾ˆå¤§ç¨‹åº¦ä¸Šé™ä½äº†å¶ç„¶å¤æ‚åº¦ï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚</p><h2 id="ä»¥ç»ˆä¸ºå§‹"><a class="anchor" href="#ä»¥ç»ˆä¸ºå§‹"></a> ä»¥ç»ˆä¸ºå§‹</h2><h3 id="å¦‚ä½•è®©è‡ªå·±çš„åŠªåŠ›ä¸ç™½è´¹-å­¦ä¼šåç›´è§‰æ€ç»´"><a class="anchor" href="#å¦‚ä½•è®©è‡ªå·±çš„åŠªåŠ›ä¸ç™½è´¹-å­¦ä¼šåç›´è§‰æ€ç»´"></a> å¦‚ä½•è®©è‡ªå·±çš„åŠªåŠ›ä¸ç™½è´¹ â€” å­¦ä¼šåç›´è§‰æ€ç»´</h3><p>å¾ˆå¤šäººï¼ˆåŒ…æ‹¬æˆ‘åœ¨å­¦ä¹ æœ¬è¯¾ç¨‹ä¹‹å‰ï¼‰åœ¨å·¥ä½œä¸­æ¥å—ä¸€ä¸ªéœ€æ±‚æˆ–è€…åŠŸèƒ½çš„æ—¶å€™å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ç›´æ¥å¼€å§‹è®¡åˆ’å¹¶ç€æ‰‹å¼€å§‹å†™ä»£ç ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šæ€è€ƒè¿™ä¸ªéœ€æ±‚æˆ–è€…ä»»åŠ¡çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯é’ˆå¯¹ä»€ä¹ˆç¾¤ä½“ï¼Ÿç­‰ç­‰ï¼Ÿå¿½ç•¥è¿™äº›å†…å®¹å¾ˆå¯èƒ½ä¼šå¯¼è‡´è‡ªå·±å‰æœŸçš„åŠªåŠ›éƒ½ç™½è´¹ã€‚</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå¤§å¤šæ•°äººéƒ½æ¬ ç¼ºä¸€ç§é€†å‘æ€ç»´æˆ–è€…åç›´è§‰æ€ç»´ï¼Œä¹Ÿå°±æ˜¯<code>ä»¥ç»ˆä¸ºå§‹</code>çš„æ€ç»´ä¹ æƒ¯ã€‚å¦‚æœæˆ‘ä»¬åœ¨æ¥å—ä»»åŠ¡çš„æ—¶å€™å…ˆè€ƒè™‘<strong>ç»ˆ</strong>ï¼Œé€†å‘æ€è€ƒï¼Œå°†åæœŸé‡åˆ°çš„å‘å‰æœŸè€ƒè™‘å¹¶è®¡åˆ’åˆ°ï¼Œåˆ™ä¼šé¿å…å¾ˆå¤šçš„å¶ç„¶å¤æ‚åº¦çš„é—®é¢˜ï¼Œä¹Ÿä¸ä¼šåœ¨åæœŸåŠ ç­åŠ ç‚¹çš„å¡«å‘ã€‚</p><p>è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿåœ¨æ¥å—ä¸€ä¸ªä»»åŠ¡æˆ–è€…éœ€æ±‚çš„æ—¶å€™å…ˆè€ƒè™‘è¿™ä¸ªä»»åŠ¡çš„ç»ˆï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªä»»åŠ¡æˆ–è€…éœ€æ±‚çš„ç›®çš„ï¼Œææ˜ç™½ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œåšçš„ä»·å€¼æ˜¯ä»€ä¹ˆã€‚ä¹‹åéœ€è¦åœ¨è„‘æµ·ä¸­æ¨æ¼”ï¼Œè¿›è¡Œä¸€æ¬¡åˆ›é€ ï¼Œä¹‹åæ‰ä»˜è¯¸å®è·µã€‚</p><blockquote><p>ä»»ä½•äº‹ç‰©éƒ½è¦ç»è¿‡ä¸¤æ¬¡åˆ›é€ ï¼šä¸€æ¬¡æ˜¯åœ¨å¤´è„‘ä¸­çš„åˆ›é€ ï¼Œä¹Ÿå°±æ˜¯æ™ºåŠ›ä¸Šçš„æˆ–è€…ç¬¬ä¸€æ¬¡åˆ›é€ ï¼ˆMental/First Creationï¼‰ï¼Œç„¶åæ‰æ˜¯ä»˜è¯¸å®è·µï¼Œä¹Ÿå°±æ˜¯å®é™…çš„æ„å»ºæˆ–ç¬¬äºŒæ¬¡åˆ›é€ ï¼ˆPhysical/Second Creationï¼‰</p></blockquote><p>ä¸Šé¢çš„ç¬¬ä¸€æ¬¡åˆ›é€ ä¹Ÿæ˜¯<strong>é¢„æ¼”</strong>ï¼Œå…ˆæ¨æ¼”è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜æå‰è§£å†³ï¼Œé¿å…åé¢ç´§ç´§å¼ å¼ ã€‚</p><p>åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°±å‡è®¾è½¯ä»¶å·²ç»å°±ç»ªï¼Œçœ‹å°±ç»ªä¹‹åï¼Œè¦åšå“ªäº›äº‹æƒ…ï¼Œæ¯”å¦‚ï¼Œå¦‚ä½•ä¸Šçº¿ã€å¦‚ä½•æ¨å¹¿ç­‰ç­‰ï¼Œè¿™æ ·çš„æ¨æ¼”è¿‡ç¨‹ä¼šå¸®æˆ‘ä»¬å‘ç°å‰æœŸå‡†å¤‡çš„ä¸è¶³ä¹‹å¤„ï¼Œè¿›ä¸€æ­¥ä¸°å¯Œæˆ‘ä»¬çš„å·¥ä½œè®¡åˆ’ã€‚ä¸ºäº†ä¸è®©æˆ‘ä»¬æ€»åœ¨â€œæœ€åä¸€å…¬é‡Œâ€æ‘”è·Ÿå¤´ï¼Œå‰æœŸçš„æ¨æ¼”æ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼Œä¹Ÿæ˜¯æƒ³è®©å›¢é˜Ÿè¿›å…¥æœ‰æ¡ä¸ç´ŠçŠ¶æ€çš„å‰æã€‚</p><p>æ€»ä¹‹ä¸€å¥è¯ï¼š<strong>é‡åˆ°äº‹æƒ…ï¼Œå€’ç€æƒ³ã€‚</strong></p><h3 id="æ˜ç¡®å®Œæˆçš„å®šä¹‰å’Œæ ‡å‡†"><a class="anchor" href="#æ˜ç¡®å®Œæˆçš„å®šä¹‰å’Œæ ‡å‡†"></a> æ˜ç¡®<code>å®Œæˆ</code>çš„å®šä¹‰å’Œæ ‡å‡†</h3><p>ä¸Šé¢è¯´åˆ°äº†<strong>ç»ˆ</strong>ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå®Œæˆï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±è¯´çš„å®Œæˆå°±çœŸçš„æ˜¯å®Œæˆï¼Ÿä¾‹å¦‚å¯¹äºä¸€ä¸ªéœ€æ±‚ä»»åŠ¡æ¥è¯´ï¼Œæˆ‘ä»¬çš„å®šä¹‰æˆ–è®¸æ˜¯ä»£ç ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å¯¹äºé¢†å¯¼å‘¢ï¼Ÿé¢†å¯¼æ‰€è°“çš„å®Œæˆæˆ–è®¸å°±ä¸æ˜¯è¿™æ ·äº†ï¼Œé¢†å¯¼æˆ–è®¸ä¼šè€ƒè™‘æ˜¯å¦ç»è¿‡æµ‹è¯•ï¼Ÿæ˜¯å¦ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Ÿæ˜¯å¦éœ€æ±‚æ¾„æ¸…ï¼Ÿç­‰ç­‰ã€‚è¿™å°±æ˜¯å¯¹å®Œæˆçš„å®šä¹‰(DOD, Define Of Done)ä¸åŒã€‚</p><p>DOD ä¸ç´§å¯ä»¥æŒ‰æŸä¸ªé¡¹ç›®æˆ–è€…éœ€æ±‚ä»»åŠ¡å®šä¹‰ï¼Œä¹Ÿå¯ä»¥æŒ‰æ—¶é—´ï¼Œæ¯”å¦‚è¿­ä»£ç­‰æ¥è¿›è¡Œå®šä¹‰ã€‚DOD å¿…é¡»æ»¡è¶³ä»¥ä¸‹å‡ ä¸ªæ¡ä»¶ï¼š</p><ul><li>DoDæ˜¯ä¸€ä¸ªæ¸…å•ï¼Œå†…éƒ¨æ˜¯ç”±å¾ˆå¤šå¯æ£€æŸ¥é¡¹ç»„æˆ</li><li>DoDå†…éƒ¨é¡¹ç›®æ˜¯å¯æ£€æŸ¥çš„ï¼Œé¡¹ç›®åªæœ‰ä¸¤ç§çŠ¶æ€ï¼Œå®Œæˆå’Œæœªå®Œæˆï¼›</li></ul><p>å½“æˆ‘ä»¬æ¥åˆ°ä¸€ä¸ªéœ€æ±‚æ—¶ä¹Ÿä¸€æ ·ï¼Œéœ€è¦åšçš„å°±æ˜¯éœ€æ±‚æ¾„æ¸…ï¼Œéœ€è¦å°†éœ€æ±‚è¿›è¡Œåˆ†è§£ï¼Œé’ˆå¯¹æ¯ä¸ªå°çš„éœ€æ±‚å¯ä»¥ç”¨ä¸€ä¸ªç”¨æˆ·æ•…äº‹è¿›è¡Œæè¿°ï¼ŒåŒæ—¶ç¡®å®šå¥½æ¯ä¸ªå°éœ€æ±‚çš„éªŒæ”¶æ ‡å‡†ã€‚</p><p>éœ€æ±‚åˆ†è§£ä¹Ÿå¯ä»¥è·Ÿé¡¹ç›®ç»ç†è®¨è®ºç éœ€æ±‚ã€‚</p><h3 id="å°½æ—©è¿›è¡Œé›†æˆ-å‡å°‘é›†æˆæ‰€éœ€è¦çš„æ—¶é—´"><a class="anchor" href="#å°½æ—©è¿›è¡Œé›†æˆ-å‡å°‘é›†æˆæ‰€éœ€è¦çš„æ—¶é—´"></a> å°½æ—©è¿›è¡Œé›†æˆ â€” å‡å°‘é›†æˆæ‰€éœ€è¦çš„æ—¶é—´</h3><p>æˆ‘ä»¬éƒ½å·¥ä½œåœ¨ä¸€ä¸ªå›¢é˜Ÿä¸­ï¼Œéœ€æ±‚çš„å¼€å‘æˆ–è€…é¡¹ç›®è¿ä½œéƒ½éœ€è¦å›¢é˜Ÿçš„æˆå‘˜æ¥è¿›è¡Œé…åˆçš„ï¼Œæˆ‘ä»¬ä»…ä»…ç¼–å†™ä»£ç è¿›è¡Œä¸Šä¼ å°±å¯ä»¥äº†å—ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œä¸ªäººå¯èƒ½è´Ÿè´£ä¸€ä¸ªå°éœ€æ±‚æˆ–è€…å°ä»»åŠ¡ï¼Œè¿™ä¸ªå°éœ€æ±‚éœ€è¦ä¸å›¢é˜Ÿå…¶ä»–æˆå‘˜çš„åŠŸèƒ½è¿›è¡Œæ•´åˆæ‰èƒ½æ»¡è¶³å¤§éœ€æ±‚çš„è¦æ±‚ã€‚</p><p>å¦‚æœæˆ‘ä»¬ç­‰åˆ°å›¢é˜Ÿä¸­æ‰€æœ‰äººæŠŠæ‰€æœ‰çš„ä»£ç ç¼–å†™å®Œæˆä¹‹åå†è¿›è¡Œè”è°ƒå’Œé›†æˆï¼Œåˆ™éœ€è¦é¢å¤–ä»˜å‡ºå¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›æ¥åšè¿™ä¸ªäº‹ã€‚</p><p>æœ‰ä»€ä¹ˆå¯ä»¥æ”¹å–„çš„åœ°æ–¹å—ï¼Ÿå½“ç„¶æœ‰ï¼Œé‚£å°±æ˜¯<strong>æ¯æ—¥æ„å»º</strong>ï¼Œä¹Ÿå°±æ˜¯æ²¡å¤©éƒ½é›†æˆä¸€æ¬¡ã€‚å†æ›´è¿›ä¸€æ­¥åˆ™æ˜¯æ¯æ¬¡ä»£ç æäº¤åˆ™ç«‹å³è§¦å‘é›†æˆï¼Œè¿™ä¹Ÿå°±æ˜¯æŒç»­é›†æˆã€‚è¯´åˆ°æŒç»­é›†æˆé‚£æƒ³åˆ°äº†æŒç»­é›†æˆæœåŠ¡å™¨ Jenkinsï¼Œå¯ä»¥å°† Jenkins æœåŠ¡å™¨å’Œ Gitå·¥å…·è¿›è¡Œé…åˆåšåˆ°æŒç»­é›†æˆã€‚</p><p>æ€»ä¹‹åªæœ‰ä¸€å¥è¯ï¼šå°½æ—©çš„åšä»£ç é›†æˆã€‚</p><h3 id="é»˜è®¤æ‰€æœ‰éœ€æ±‚éƒ½ä¸åšç›´åˆ°å¼„æ¸…æ¥šä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹"><a class="anchor" href="#é»˜è®¤æ‰€æœ‰éœ€æ±‚éƒ½ä¸åšç›´åˆ°å¼„æ¸…æ¥šä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹"></a> é»˜è®¤æ‰€æœ‰éœ€æ±‚éƒ½ä¸åšï¼Œç›´åˆ°å¼„æ¸…æ¥šä¸ºä»€ä¹ˆè¦åšè¿™ä»¶äº‹</h3><p>è¿™ç‚¹å…¶å®å’Œå‰é¢è¯´è¿‡çš„å®Œæˆçš„å®šä¹‰ä»¥åŠåç›´è§‰æ€ç»´æ˜¯æœ‰ç‚¹åƒçš„ã€‚æ¥æ”¶åˆ°æ–°éœ€æ±‚çš„ä»»åŠ¡æ—¶ï¼Œéœ€è¦æéœ€æ±‚æ—¶å¤„äºä»€ä¹ˆç›®çš„ï¼Œè¾¾åˆ°ä»€ä¹ˆçŠ¶æ€ï¼Œé’ˆå¯¹å“ªäº›å®¢æˆ·ç¾¤ä½“ï¼Œè¿™ä¹ˆåšçš„æ„ä¹‰æ—¶ä»€ä¹ˆï¼Œé˜²æ­¢åšæ— ç”¨åŠŸã€‚</p><h3 id="æå‡è‡ªå·±çš„ä¸Šä¸‹æ–‡"><a class="anchor" href="#æå‡è‡ªå·±çš„ä¸Šä¸‹æ–‡"></a> æå‡è‡ªå·±çš„ä¸Šä¸‹æ–‡</h3><p>æå‡è‡ªå·±çš„ä¸Šä¸‹æ–‡ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ‰©å¤§è‡ªå·±çš„ä¸Šä¸‹æ–‡ï¼Œå†è¯´çš„æ›´ç›´ç™½ä¸€ç‚¹å°±æ˜¯æ¢ä¸ªè§’åº¦æ€è€ƒé—®é¢˜ã€‚</p><p>é‡åˆ°é—®é¢˜æ—¶ï¼Œå°†è‡ªå·±æ”¾åœ¨ç¬¬ä¸‰è€…çš„ä½ç½®ï¼Œå¯ä»¥æƒ³è±¡å¦‚æœè‡ªå·±æ˜¯é¢†å¯¼æˆ‘ä¼šæ€ä¹ˆè§£å†³ï¼Œå¦‚æœæ— æ³•ç¡®å®šï¼Œé‚£ä¹ˆå¯ä»¥å»æ‰¾é¢†å¯¼åé¦ˆé—®é¢˜ã€‚ä½ å¯èƒ½ä¼šå‘ç°è‡ªå·±åŸæ¥éš¾ä»¥è§£å†³çš„éš¾ç‚¹æ¢ä¸ªè§’åº¦åˆ™å¯ä»¥è½»æ¾è§£å†³æˆ–è€…é¿å…ã€‚è¿™å°±æ˜¯æ¢è§’åº¦æ€è€ƒçš„äº®ç‚¹æ‰€åœ¨ã€‚</p><p>è§’åº¦å…¶å®å°±æ˜¯ä¸Šä¸‹æ–‡ï¼Œä¸åŒçš„å·¥ä½œè§’è‰²å¾€å¾€å·®å¼‚å°±æ˜¯ä¸Šä¸‹æ–‡ä¸ä¸€æ ·ã€‚æˆ‘ä»¬<strong>éœ€è¦è·³å‡ºç¨‹åºå‘˜çš„æ€ç»´ï¼Œåˆ‡æ¢åˆ°ä¸åŒçš„ä¸Šä¸‹æ–‡ã€æ›´å¤§çš„ä¸Šä¸‹æ–‡ä¸­å»æ€è€ƒé—®é¢˜ï¼Œå»äº†è§£åˆ«äººçš„å·¥ä½œé€»è¾‘</strong>ã€‚</p><h3 id="è¿­ä»£0-å¼€å‘å‰æœŸçš„å‡†å¤‡"><a class="anchor" href="#è¿­ä»£0-å¼€å‘å‰æœŸçš„å‡†å¤‡"></a> è¿­ä»£0 â€” å¼€å‘å‰æœŸçš„å‡†å¤‡</h3><p>è¿­ä»£0 å¯ä»¥é‡‡ç”¨DODæ¸…å•çš„æ–¹å¼å»è®°å½•ä¸€äº›åœ¨é¡¹ç›®æ­£å¼å¼€å‘æˆ–è€…ä»»åŠ¡å®Œæˆä¹‹å‰éœ€è¦ç¡®è®¤ã€è§£å†³çš„ä¸€äº›é—®é¢˜ã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><h4 id="éœ€æ±‚æ–¹é¢"><a class="anchor" href="#éœ€æ±‚æ–¹é¢"></a> éœ€æ±‚æ–¹é¢</h4><ul><li>ç»†åŒ–éœ€æ±‚ï¼Œç»†åŒ–éœ€æ±‚åéœ€è¦æ ¹æ®ä¼˜å…ˆçº§ä»éœ€æ±‚ä¸­æŒ‘å‡ºè¿­ä»£1ä¸­æ‰€éœ€è¦å®Œæˆçš„éœ€æ±‚ã€‚ä¼˜å…ˆçº§æ˜¯æ ¹æ®æˆ‘ä»¬è¦å®Œæˆå¼€å‘**æœ€å°å¯è¡Œäº§å“(minimum viable productï¼ŒMVP)**æ¥ç¡®å®šçš„</li><li>ç¡®è®¤äº¤äº’å’Œè§†æ•ˆ</li></ul><h4 id="æŠ€æœ¯æ–¹é¢"><a class="anchor" href="#æŠ€æœ¯æ–¹é¢"></a> æŠ€æœ¯æ–¹é¢</h4><ul><li>ç¡®å®šæŠ€æœ¯é€‰å‹ï¼Œæ¶æ„ï¼Œæ–¹æ¡ˆç­‰</li><li>æŒç»­é›†æˆ</li><li>æµ‹è¯•ç”¨ä¾‹</li><li>å‘å¸ƒå‡†å¤‡</li></ul><h2 id="æ€»ç»“"><a class="anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><p>ä»¥ç»ˆä¸ºå§‹çš„ä¸­å¿ƒæ€æƒ³å°±æ˜¯å€’ç€æƒ³æˆ–è€…é¢„æ¼”ï¼ŒæŠŠé—®é¢˜åœ¨å‰æœŸæš´æ¼å‡ºæ¥ï¼Œä¸è¦ç­‰åˆ°åæœŸé‡åˆ°çš„æ—¶å€™æ‰å»è§£å†³ã€‚å¯¹å¾…éœ€æ±‚ä¹Ÿæ˜¯ï¼Œéœ€è¦ç»†åŒ–éœ€æ±‚ï¼Œç¡®å®šéœ€æ±‚çš„å…·ä½“ç›®çš„ï¼Œææ˜ç™½éœ€æ±‚çš„å…·ä½“å«ä¹‰æ‰å»å®ç°ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨å­¦ä¹ éƒ‘è€å¸ˆçš„ 10X ç¨‹åºå‘˜å·¥ä½œæ³•ï¼Œè¯¾ç¨‹é‡Œé¢æœ‰å¾ˆå¤šå€¼å¾—å­¦ä¹ å’Œå€Ÿé‰´çš„åœ°æ–¹ï¼Œä¹Ÿæœ‰å¾ˆå¤šæœ‰è¶£çš„åœ°æ–¹ï¼Œåšä¸ªæ•´ç†ï¼Œå¸Œæœ›åœ¨æ•´ç†çš„è¿‡ç¨‹ä¸­èƒ½å­¦ä¹ åˆ°æ›´å¤šçš„æŠ€å·§ï¼Œé€šè¿‡å®è·µå»è¾¾åˆ°èæ±‡è´¯é€šçš„ç›®çš„ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="æ–¹æ³•è®º" scheme="http://www.istarx.cn/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/"/>
    
    
      <category term="å·¥ä½œæ–¹æ³•" scheme="http://www.istarx.cn/tags/%E5%B7%A5%E4%BD%9C%E6%96%B9%E6%B3%95/"/>
    
      <category term="æ•ˆç‡" scheme="http://www.istarx.cn/tags/%E6%95%88%E7%8E%87/"/>
    
      <category term="ä»¥ç»ˆä¸ºå§‹" scheme="http://www.istarx.cn/tags/%E4%BB%A5%E7%BB%88%E4%B8%BA%E5%A7%8B/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬12å‘¨</title>
    <link href="http://www.istarx.cn/2019/06/30/arts-week-twelve/"/>
    <id>http://www.istarx.cn/2019/06/30/arts-week-twelve/</id>
    <published>2019-06-30T04:47:38.000Z</published>
    <updated>2019-06-30T07:53:12.654Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>100å¤©çš„æ‰“å¡è¿˜å‰©ä¸€å‘¨ï¼Œè¿™æ®µæ—¶é—´å¯¹è‡ªå·±æå‡ä¹Ÿå¾ˆå¤§ï¼Œè‹±è¯­é˜…è¯»ï¼Œç®—æ³•ï¼Œä¹Ÿå…»æˆäº†è®°å°çŸ¥è¯†ç‚¹ã€Tips çš„ä¹ æƒ¯ï¼Œè§‰å¾—è¿˜æ˜¯è¦ç»§ç»­åšæŒä¸‹å»ï¼ŒåæœŸå†…å®¹è¦æ ¹æ®è‡ªå·±çš„å·¥ä½œå†…å®¹æˆ–è€…å…´è¶£ç¨ä½œè°ƒæ•´ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><br>*<ul><li><a href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C">è¿è¡Œç»“æœ</a></li></ul></li><li><a href="#review">Review</a><br>*<ul><li><a href="#dynamic-feature">Dynamic Feature</a></li></ul></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><blockquote><p><strong>655. Print Binary Tree</strong></p><p>Print a binary tree in an m*n 2D string array following these rules:</p><ol><li>The row number <code>m</code> should be equal to the height of the given binary tree.</li><li>The column number <code>n</code> should always be an odd number.</li><li>The root nodeâ€™s value (in string format) should be put in the exactly middle of the first row it can be put. The column and the row where the root node belongs will separate the rest space into two parts (<strong>left-bottom part and right-bottom part</strong>). You should print the left subtree in the left-bottom part and print the right subtree in the right-bottom part. The left-bottom part and the right-bottom part should have the same size. Even if one subtree is none while the other is not, you donâ€™t need to print anything for the none subtree but still need to leave the space as large as that for the other subtree. However, if two subtrees are none, then you donâ€™t need to leave space for both of them.</li><li>Each unused space should contain an empty string <code>&quot;&quot;</code>.</li><li>Print the subtrees following the same rules.</li></ol><p><strong>Example 1:</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> Input:</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">      1</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">     /</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">    2</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Output:</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> [[<span class="string">""</span>, <span class="string">"1"</span>, <span class="string">""</span>],</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  [<span class="string">"2"</span>, <span class="string">""</span>, <span class="string">""</span>]]</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><p>è¿™é“é¢˜ç›®å¤§è‡´æ„æ€å°±æ˜¯è¦æŒ‰äºŒå‰æ ‘çš„å±‚çº§å¯¹åº”è½¬æ¢æˆæ•°ç»„ã€‚æœ€ä¸»è¦çš„é—®é¢˜å°±æ˜¯ç¡®å®šæ•°ç»„çš„é•¿åº¦ï¼Œè¿™ä¸ªé•¿åº¦å¯ä»¥é€šè¿‡äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å»ç¡®å®šï¼Œä¹‹ååˆ©ç”¨é€’å½’æŠŠèŠ‚ç‚¹çš„å€¼èµ‹å€¼åˆ°æ•°ç»„ä¸­å³å¯ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;List&lt;String&gt;&gt; res;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> resLen;</span><br><span class="line"><span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; printTree(TreeNode root) &#123;</span><br><span class="line">  res = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  resLen = getResRowLen(root);</span><br><span class="line">  fillRes(root, <span class="number">0</span>, resLen - <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fillRes</span><span class="params">(TreeNode node, <span class="keyword">int</span> left, <span class="keyword">int</span> right, <span class="keyword">int</span> depth)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (node == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (res.size() - <span class="number">1</span> &lt; depth) &#123;</span><br><span class="line">    List&lt;String&gt; rowItem = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; resLen; i++) &#123;</span><br><span class="line">      rowItem.add(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    res.add(rowItem);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> position = (right - left) / <span class="number">2</span> + left;</span><br><span class="line">  res.get(depth).set(position, node.val + <span class="string">""</span>);</span><br><span class="line">  fillRes(node.left, left, position - <span class="number">1</span>, depth + <span class="number">1</span>);</span><br><span class="line">  fillRes(node.right, position + <span class="number">1</span>, right, depth + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getResRowLen</span><span class="params">(TreeNode node)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (node == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">2</span> * Math.max(getResRowLen(node.left), getResRowLen(node.right)) + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œç»“æœ"><a class="anchor" href="#è¿è¡Œç»“æœ"></a> è¿è¡Œç»“æœ</h4><p><img src="result.png" alt="result"></p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>Android App Bundle æ˜¯ä¸€ç§æ–°çš„ App ä¸Šä¼ æ–¹å¼ï¼Œè€Œä¸”å¾ˆå¤§ç¨‹åº¦ä¸Šå½±å“äº† App çš„æ„å»ºä»¥åŠç»„ä»¶åŒ–è®¾è®¡ã€‚å’Œä¼ ç»Ÿ App æ„å»ºæ–¹å¼æœ€å¤§çš„å·®åˆ«æ˜¯ App Bundle æŠŠæ„å»º APK æ‰€éœ€çš„è½¬ç§»åˆ°äº† Google Playä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·å·®å¼‚è€Œæ„å»ºä¸åŒçš„ APKã€‚</p><p>éœ€è¦åœ¨ build.gradle æ–‡ä»¶ä¸­çš„ android å—ä¸‹æ·»åŠ é…ç½®ï¼š</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">bundle &#123;</span><br><span class="line">  language &#123;</span><br><span class="line">  enableSplit = <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  density &#123;</span><br><span class="line">  enableSplit = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  abi &#123;</span><br><span class="line">  enableSplit = <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç¼–è¯‘ç”Ÿäº§ aab æ–‡ä»¶ä»¥åå¯ä»¥ä½¿ç”¨ bundleToolè¿›è¡ŒéªŒè¯ã€‚</p><ul><li><p>build APK</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bundletool build-apks --bundle=/Users/joebirch/releases/sample.aab --output=/Users/joebirch/releases/sample.apks</span><br><span class="line">--ks=/Users/joebirch/some_keystore.jks</span><br><span class="line">--ks-pass=file:/Users/joebirch/some_keystore.pwd</span><br><span class="line">--ks-key-alias=SomeAlias</span><br><span class="line">--key-pass=file:/Users/joebirch/some_key.pwd</span><br></pre></td></tr></table></figure></li><li><p>install APK</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bundletool install-apks --apks=/Users/joebirch/releases/sample.apks</span><br></pre></td></tr></table></figure></li><li><p>è·å–æœºå™¨é…ç½®æ–‡ä»¶(JSON)ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bundletool get-device-spec</span><br></pre></td></tr></table></figure><p>json é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"supportedAbis"</span>: [<span class="string">"arm64-v8a"</span>],</span><br><span class="line">  <span class="attr">"supportedLocales"</span>: [<span class="string">"en"</span>, <span class="string">"es"</span>],</span><br><span class="line">  <span class="attr">"screenDensity"</span>: <span class="number">640</span>,</span><br><span class="line">  <span class="attr">"sdkVersion"</span>: <span class="number">21</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨é…ç½®æ–‡ä»¶ç”Ÿæˆç‰¹å®šçš„ APK</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bundletool extract-apks</span><br><span class="line">--apks=/Users/joebirch/releases/someApkSet.apks</span><br><span class="line">--output-dir=/Users/joebirch/releases/device_APK_set.apks</span><br><span class="line">--device-spec=/Users/joebirch/releases/some_configuraton.json</span><br></pre></td></tr></table></figure></li></ul><h4 id="dynamic-feature"><a class="anchor" href="#dynamic-feature"></a> Dynamic Feature</h4><p>ä½¿ç”¨åŠ¨æ€ Feature éœ€è¦å¼•å…¥ Play-CoreåŒ…ï¼š</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">implementation <span class="string">'com.google.android.play:core:1.3.4'</span></span><br></pre></td></tr></table></figure><p>ä¹‹ååœ¨ç”¨æˆ·ä½¿ç”¨åŠ¨æ€ Feature æ—¶æ‰§è¡Œä¸‹è½½åŠåŠ è½½ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">val splitInstallManager = SplitInstallManagerFactory.create(<span class="keyword">this</span>);</span><br><span class="line">val request = SplitInstallRequest</span><br><span class="line">        .newBuilder()</span><br><span class="line">        .addModule(<span class="string">"someDynamicModule"</span>)</span><br><span class="line">        .build(); <span class="comment">// ä» google play è¯·æ±‚</span></span><br><span class="line">splitInstallManager</span><br><span class="line">        .startInstall(request) <span class="comment">// åå°ä¸‹è½½ï¼šdeferInstall()</span></span><br><span class="line">        .addOnSuccessListener &#123;  &#125;</span><br><span class="line">        .addOnFailureListener &#123;  &#125;</span><br><span class="line">        .addOnCompleteListener &#123;  &#125;;</span><br><span class="line"><span class="comment">// ä¸‹è½½è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯çš„ç›‘å¬</span></span><br><span class="line">val stateListener = SplitInstallStateUpdatedListener &#123; state -&gt;</span><br><span class="line">    when (state.status()) &#123;</span><br><span class="line">        PENDING -&gt; &#123; &#125; </span><br><span class="line">        DOWNLOADING -&gt; &#123; &#125;</span><br><span class="line">        DOWNLOADED -&gt; &#123; &#125;</span><br><span class="line">        INSTALLED -&gt; &#123; &#125;</span><br><span class="line">        INSTALLING -&gt; &#123; &#125;</span><br><span class="line">        REQUIRES_USER_CONFIRMATION -&gt; &#123; &#125;</span><br><span class="line">        FAILED -&gt; &#123; &#125;</span><br><span class="line">        CANCELING -&gt; &#123; &#125;</span><br><span class="line">        CANCELED -&gt; &#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">splitInstallManager.registerListener(stateListener)</span><br><span class="line"><span class="comment">// å¸è½½</span></span><br><span class="line">splitInstallManager</span><br><span class="line">        .deferredUninstall(listOf(<span class="string">"someDynamicModule"</span>))</span><br><span class="line">        .addOnSuccessListener &#123;  &#125;</span><br><span class="line">        .addOnFailureListener &#123;  &#125;</span><br><span class="line">        .addOnCompleteListener &#123;  &#125;;</span><br></pre></td></tr></table></figure><p><a href="https://medium.com/google-developer-experts/exploring-the-android-app-bundle-ca16846fa3d7">Exploring the Android App Bundle</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><p>Java ä¸­å¦‚æœæŸä¸ªæ–¹æ³•ç”¨ synchronize ä¿®é¥°ï¼Œåˆ™æ–¹æ³•å†…ä¸èƒ½ä½¿ç”¨é™æ€å˜é‡ï¼Œå¦åˆ™ä¼šäº§ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼›</p></li><li><p>Android å¼€å¯ SQL logï¼š</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">adb shell setprop log.tag.SQLiteLog VERBOSE</span><br><span class="line">adb shell setprop log.tag.SQLiteStatements VERBOSE</span><br><span class="line">adb shell stop</span><br><span class="line">adb shell start</span><br></pre></td></tr></table></figure></li><li><p>åŠ¨ç”»åŠ è½½</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Animation animation = AnimationUtils.loadAnimation(<span class="keyword">this</span>, R.anim.hyperspace_jump);</span><br></pre></td></tr></table></figure></li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="https://a.codekk.com/detail/Android/lightSky/%E5%85%AC%E5%85%B1%E6%8A%80%E6%9C%AF%E7%82%B9%E4%B9%8B%20Android%20%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%80">å…¬å…±æŠ€æœ¯ç‚¹ä¹‹ Android åŠ¨ç”»åŸºç¡€</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;100å¤©çš„æ‰“å¡è¿˜å‰©ä¸€å‘¨ï¼Œè¿™æ®µæ—¶é—´å¯¹è‡ªå·±æå‡ä¹Ÿå¾ˆå¤§ï¼Œè‹±è¯­é˜…è¯»ï¼Œç®—æ³•ï¼Œä¹Ÿå…»æˆäº†è®°å°çŸ¥è¯†ç‚¹ã€Tips çš„ä¹ æƒ¯ï¼Œè§‰å¾—è¿˜æ˜¯è¦ç»§ç»­åšæŒä¸‹å»ï¼ŒåæœŸå†…å®¹è¦æ ¹æ®è‡ªå·±çš„å·¥ä½œå†…å®¹æˆ–è€…å…´è¶£ç¨ä½œè°ƒæ•´ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬11å‘¨</title>
    <link href="http://www.istarx.cn/2019/06/23/arts-week-eleven/"/>
    <id>http://www.istarx.cn/2019/06/23/arts-week-eleven/</id>
    <published>2019-06-23T10:59:41.000Z</published>
    <updated>2019-06-23T15:27:53.358Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>996 çš„å·¥ä½œæ—¶é—´æçš„èº«å¿ƒä¿±ç–²ï¼Œå‘¨å†…æ ¹æœ¬æ²¡æ—¶é—´æ‰“å¡ï¼Œåªèƒ½é å‘¨æ—¥äº†ã€‚æœ¬å‘¨æ‰“å¡å†…å®¹ä¸»è¦æ˜¯äºŒå‰æ ‘ã€RxJavaç­‰ç›¸å…³å†…å®¹ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><br>*<ul><li><a href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C">è¿è¡Œç»“æœ</a></li></ul></li><li><a href="#review">Review</a><br>*<ul><li><a href="#%E5%B8%B8%E7%94%A8%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84-subjects">å¸¸ç”¨ä¸åŒç±»å‹çš„ Subjects</a></li></ul></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><p>è¿™å‘¨ä¸»è¦ä½œäº†Nå‰æ ‘ç›¸å…³çš„é¢˜ç›®ï¼Œåˆ¤æ–­Nå‰æ ‘çš„æœ€å¤§æ·±åº¦ã€‚</p><blockquote><p><strong>559. Maximum Depth of N-ary Tree</strong></p><p>Given a n-ary tree, find its maximum depth.</p><p>The maximum depth is the number of nodes along the longest path from the root node down to the farthest leaf node.</p><p><strong>Example:</strong></p><p>For example, given a <code>3-ary</code> tree:</p><p><img src="narytreeexample.png" alt="img"></p><p>We should return its max depth, which is 3.</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxDepth</span><span class="params">(Node root)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (root.children == <span class="keyword">null</span> || root.children.size() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> maxDepth = -<span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span> (Node node: root.children) &#123;</span><br><span class="line">    maxDepth = Math.max(maxDepth, maxDepth(node));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxDepth + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œç»“æœ"><a class="anchor" href="#è¿è¡Œç»“æœ"></a> è¿è¡Œç»“æœ</h4><p><img src="result.png" alt="result1"></p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨é˜…è¯»å­¦ä¹  RxJava ç³»åˆ—çš„ä¸­çš„ä¸¤ç¯‡æ–‡ç« ï¼š</p><p>Subjects æ˜¯ä»€ä¹ˆï¼ŸSubjects æ˜¯ç»§æ‰¿è‡ª Observable å¹¶ä¸”å®ç° Observer æ¥å£ã€‚</p><p>Subjectsçš„ç‰¹ç‚¹ï¼š</p><ul><li>å¯ä»¥åŒæ—¶æ‰®æ¼”è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…çš„è§’è‰²ï¼›</li><li>ä¸»é¢˜å¯ä»¥å‘å¤šä¸ªå­è§‚å¯Ÿè€…å‘é€äº‹ä»¶ã€‚å¤šæ’­ä½¿å¾—ä¸€æ¬¡æ€§è¿è¡Œæ˜‚è´µçš„æ“ä½œå¹¶å°†ç»“æœå‘é€ç»™å¤šä¸ªè®¢æˆ·æˆä¸ºå¯èƒ½ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å¯¹å¤šä¸ªè®¢é˜…æœåŠ¡å™¨æ‰§è¡Œé‡å¤æ“ä½œï¼›</li><li>çƒ­é—¨ Observableï¼›</li></ul><h4 id="å¸¸ç”¨ä¸åŒç±»å‹çš„-subjects"><a class="anchor" href="#å¸¸ç”¨ä¸åŒç±»å‹çš„-subjects"></a> å¸¸ç”¨ä¸åŒç±»å‹çš„ Subjects</h4><ul><li><strong>PublishSubject</strong>ï¼šåœ¨æ³¨å†Œçš„æ—¶å€™ï¼Œå‘é€æ‰€æœ‰äº‹ä»¶ï¼Œè¿™æ˜¯æœ€åŸºæœ¬çš„ Subjectsã€‚</li><li><strong>BehaviorSubject</strong>ï¼šBehaviorSubjectåœ¨è®¢é˜…æ—¶å‘å‡ºæœ€æ–°çš„é¡¹ä»¥åŠä¹‹åçš„æ‰€æœ‰é¡¹ï¼›</li><li><strong>ReplaySubject</strong>ï¼šåœ¨è®¢é˜…è€…è®¢é˜…ä¹‹å‰ä¼šå‘é€æ‰€æœ‰äº‹ä»¶ï¼›</li><li><strong>AsyncSubject</strong>ï¼šä»…ä»…å‘é€ä¸€ä¸ªäº‹ä»¶ï¼Œè€Œä¸”ä»…åœ¨ Obserable å®Œæˆä¹‹å(<strong>onComplete</strong>æ‰§è¡Œä¹‹å)æ‰ä¼šå‘é€ï¼›</li><li><strong>UnicastSubject</strong>ï¼šåªæœ‰æœ‰ä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œä¼šåœ¨è§‚å¯Ÿè€…è®¢é˜…çš„æ—¶å€™å‘é€æ‰€æœ‰æ•°æ®ï¼›</li></ul><p><a href="https://proandroiddev.com/rxjava-different-types-of-subjects-ef9183b5e87e">Different types of Subjects</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><code>git log â€”since=2019-3-25 â€”until 2019-3-26</code>(å·¦é—­å³å¼€)å‘½ä»¤å¯ä»¥è¿‡æ»¤æŸä¸€æ®µæ—¶é—´å†…çš„ logï¼›</li><li>Editatextçš„saveEnableå±æ€§ï¼Œè§£å†³setTextä¸èµ·ä½œç”¨çš„é—®é¢˜ ï¼›</li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="https://a.codekk.com/detail/Android/Grumoon/android-Ultra-Pull-To-Refresh%20%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90">android-Ultra-Pull-To-Refresh æºç è§£æ</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;996 çš„å·¥ä½œæ—¶é—´æçš„èº«å¿ƒä¿±ç–²ï¼Œå‘¨å†…æ ¹æœ¬æ²¡æ—¶é—´æ‰“å¡ï¼Œåªèƒ½é å‘¨æ—¥äº†ã€‚æœ¬å‘¨æ‰“å¡å†…å®¹ä¸»è¦æ˜¯äºŒå‰æ ‘ã€RxJavaç­‰ç›¸å…³å†…å®¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬10å‘¨</title>
    <link href="http://www.istarx.cn/2019/06/16/arts-week-ten/"/>
    <id>http://www.istarx.cn/2019/06/16/arts-week-ten/</id>
    <published>2019-06-16T02:32:47.000Z</published>
    <updated>2019-06-16T08:08:28.158Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä»Šå¤©æ˜¯çˆ¶äº²èŠ‚ï¼Œç¥è€çˆ¸èŠ‚æ—¥å¿«ä¹ï¼Œèº«ä½“å¥åº·ï¼Œä¹Ÿç¥å¤©ä¸‹æ‰€æœ‰çˆ¶äº²èŠ‚æ—¥å¿«ä¹ã€‚ä¸Šå‘¨ç”±äºå¸¦ç«¯åˆèŠ‚å›å®¶æ²¡æ‰“å¡æ‹–å»¶äº†ä¸€å‘¨ã€‚æœ¬å‘¨æ‰“å¡å†…å®¹ä¸»è¦æ˜¯äºŒå‰æ ‘ã€RxJava ä»¥åŠ adb å‘½ä»¤ç›¸å…³çš„å†…å®¹ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E4%B8%80">é¢˜ç›®ä¸€</a><ul><li><a href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C">è¿è¡Œç»“æœ</a></li></ul></li><li><a href="#%E9%A2%98%E7%9B%AE%E4%BA%8C">é¢˜ç›®äºŒ</a><ul><li><a href="#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-2">è¿è¡Œç»“æœ</a></li></ul></li></ul></li><li><a href="#review">Review</a><br>*<ul><li><a href="#%E6%95%B0%E5%AD%A6%E7%9B%B8%E5%85%B3%E7%9A%84%E6%93%8D%E4%BD%9C">æ•°å­¦ç›¸å…³çš„æ“ä½œï¼š</a></li><li><a href="#%E5%B8%B8%E7%94%A8%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E7%9A%84-observable">å¸¸ç”¨ä¸åŒç±»å‹çš„ Observable</a></li></ul></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><p>è¿™å‘¨ä¸»è¦ä½œäº†äºŒå‰æ ‘ç›¸å…³çš„é¢˜ç›®ï¼Œç¬¬äºŒä¸ªé¢˜ç›®æ˜¯ç¬¬ä¸€ä¸ªé¢˜ç›®çš„å»¶ä¼¸ã€‚</p><h3 id="é¢˜ç›®ä¸€"><a class="anchor" href="#é¢˜ç›®ä¸€"></a> é¢˜ç›®ä¸€</h3><blockquote><p><strong>654. Maximum Binary Tree</strong></p><p>Given an integer array with no duplicates. A maximum tree building on this array is defined as follow:</p><ol><li>The root is the maximum number in the array.</li><li>The left subtree is the maximum tree constructed from left part subarray divided by the maximum number.</li><li>The right subtree is the maximum tree constructed from right part subarray divided by the maximum number.</li></ol><p>Construct the maximum tree by the given array and output the root node of this tree.</p><p><strong>Example:</strong></p><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&gt; Input: [<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">5</span>]</span><br><span class="line">&gt; Output: <span class="keyword">return</span> the tree root node representing the following tree:</span><br><span class="line">&gt; </span><br><span class="line">&gt;       <span class="number">6</span></span><br><span class="line">&gt;     /   \</span><br><span class="line">&gt;    <span class="number">3</span>     <span class="number">5</span></span><br><span class="line">&gt;     \    / </span><br><span class="line">&gt;      <span class="number">2</span>  <span class="number">0</span>   </span><br><span class="line">&gt;        \</span><br><span class="line">&gt;         <span class="number">1</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>é¢˜ç›®è¦æ±‚å°†ä¸€æ•°ç»„è½¬åŒ–æˆäºŒå‰æ ‘ï¼Œè€Œä¸”æ“ä½œæ˜¯å¾ˆè§„å¾‹çš„ï¼Œå› æ­¤ç”¨é€’å½’æ˜¯æœ€å¥½ä¸è¿‡äº†ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">constructMaximumBinaryTree</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> constructMaximumBinaryTree(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> TreeNode <span class="title">constructMaximumBinaryTree</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> maxValPosition = findMaxValueBetweenPosition(nums, start, end);</span><br><span class="line">  <span class="keyword">if</span> (maxValPosition == -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  TreeNode head = <span class="keyword">new</span> TreeNode(nums[maxValPosition]);</span><br><span class="line">  head.left = constructMaximumBinaryTree(nums, start, maxValPosition - <span class="number">1</span>);</span><br><span class="line">  head.right = constructMaximumBinaryTree(nums, maxValPosition + <span class="number">1</span>, end);</span><br><span class="line">  <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">findMaxValueBetweenPosition</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (start &gt; end) &#123;</span><br><span class="line">    <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (start == end) &#123;</span><br><span class="line">    <span class="keyword">return</span> start;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> maxValPos = start;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = start + <span class="number">1</span>; i &lt;= end; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (nums[i] &gt; nums[maxValPos]) &#123;</span><br><span class="line">      maxValPos = i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxValPos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œç»“æœ"><a class="anchor" href="#è¿è¡Œç»“æœ"></a> è¿è¡Œç»“æœ</h4><p><img src="result1.png" alt="result1"></p><h3 id="é¢˜ç›®äºŒ"><a class="anchor" href="#é¢˜ç›®äºŒ"></a> é¢˜ç›®äºŒ</h3><blockquote><p><strong>998. Maximum Binary Tree II</strong></p><p>We are given the <code>root</code> node of a <em>maximum tree:</em> a tree where every node has a value greater than any other value in its subtree.</p><p>Just as in the <a href="https://leetcode.com/problems/maximum-binary-tree/">previous problem</a>, the given tree was constructed from an list <code>A</code> (<code>root = Construct(A)</code>) recursively with the following <code>Construct(A)</code> routine:</p><ul><li>If <code>A</code> is empty, return <code>null</code>.</li><li>Otherwise, let <code>A[i]</code> be the largest element of <code>A</code>.  Create a <code>root</code> node with value <code>A[i]</code>.</li><li>The left child of <code>root</code> will be <code>Construct([A[0], A[1], ..., A[i-1]])</code></li><li>The right child of <code>root</code> will be <code>Construct([A[i+1], A[i+2], ..., A[A.length - 1]])</code></li><li>Return <code>root</code>.</li></ul><p>Note that we were not given A directly, only a root node <code>root = Construct(A)</code>.</p><p>Suppose <code>B</code> is a copy of <code>A</code> with the value <code>val</code> appended to it.  It is guaranteed that <code>B</code> has unique values.</p><p>Return <code>Construct(B)</code>.</p><p><strong>Example1</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&gt;Input: root = [<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="number">2</span>], val = <span class="number">5</span></span><br><span class="line">&gt;Output: [<span class="number">5</span>,<span class="number">4</span>,<span class="keyword">null</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="keyword">null</span>,<span class="keyword">null</span>,<span class="number">2</span>]</span><br><span class="line">&gt;Explanation: A = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>], B = [<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>Example2</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&gt;Input: root = [<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="keyword">null</span>,<span class="number">1</span>], val = <span class="number">3</span></span><br><span class="line">&gt;Output: [<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="keyword">null</span>,<span class="number">1</span>,<span class="keyword">null</span>,<span class="number">3</span>]</span><br><span class="line">&gt;Explanation: A = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>], B = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>Example3</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&gt;Input: root = [<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="keyword">null</span>,<span class="number">1</span>], val = <span class="number">4</span></span><br><span class="line">&gt;Output: [<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="keyword">null</span>,<span class="number">1</span>,<span class="number">3</span>]</span><br><span class="line">&gt;Explanation: A = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>], B = [<span class="number">2</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">insertIntoMaxTree</span><span class="params">(TreeNode root, <span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">  TreeNode tmp = <span class="keyword">new</span> TreeNode(val);</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (val &gt; root.val) &#123;</span><br><span class="line">    tmp.left = root;</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">  &#125;</span><br><span class="line">  TreeNode head = root;</span><br><span class="line">  <span class="keyword">while</span> (head.right != <span class="keyword">null</span> &amp;&amp; val &lt; head.right.val) &#123;</span><br><span class="line">    head = head.right;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (head.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">    head.right = tmp;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    TreeNode tmp1 = head.right;</span><br><span class="line">    head.right = tmp;</span><br><span class="line">    tmp.left = tmp1; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¿è¡Œç»“æœ-2"><a class="anchor" href="#è¿è¡Œç»“æœ-2"></a> è¿è¡Œç»“æœ</h4><p><img src="result2.png" alt="result2"></p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨é˜…è¯»å­¦ä¹  RxJava ç³»åˆ—çš„ä¸­çš„ä¸¤ç¯‡æ–‡ç« ï¼š</p><h4 id="æ•°å­¦ç›¸å…³çš„æ“ä½œ"><a class="anchor" href="#æ•°å­¦ç›¸å…³çš„æ“ä½œ"></a> æ•°å­¦ç›¸å…³çš„æ“ä½œï¼š</h4><p>ä½¿ç”¨è¿™äº›æ¥å£æ—¶éœ€è¦æ–°å¼•å…¥ä¸€ä¸ª jar åŒ…ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">implementation <span class="string">'com.github.akarnokd:rxjava2-extensions:0.20.0'</span></span><br></pre></td></tr></table></figure><ul><li><strong>Average</strong>ï¼š æ±‚å‡ºä¼ é€’æ‰€æœ‰å…ƒç´ çš„å¹³å‡å€¼ï¼Œå°†è¯¥å¹³å‡å€¼ä¼ é€’ç»™ Observerï¼›</li><li><strong>Count</strong>ï¼šç»Ÿè®¡æ‰€ä¼ æ•°æ®çš„ä¸ªæ•°ï¼Œå³åŸå§‹ Obserable å‘é€äº†å¤šå°‘æ¬¡æ•°æ®ï¼›</li><li><strong>Max</strong>ï¼šå°†æ‰€æœ‰ä¼ é€’çš„æ•°æ®ä¸­çš„æœ€å¤§å€¼å½“æœ€ç»ˆç»“æœè¿›è¡Œä¼ é€’ï¼›</li><li><strong>Min</strong>: å’Œ Max ç±»ä¼¼ï¼›</li><li><strong>Reduce</strong>ï¼šå°†æ‰€æœ‰çš„åŸå§‹å‘é€æ•°æ®è¿›è¡Œç´¯ç§¯ä¹˜ç§¯ï¼Œå°†æœ€ç»ˆç»“æœä¼ é€’ç»™ Observerï¼›</li><li><strong>Sum</strong>:  å°†æ‰€æœ‰æ•°æ®æ±‚å’Œï¼›</li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-mathematical-and-aggregate-operators-eb3e37322ac8">Mathematical and Aggregate Operators</a></p><h4 id="å¸¸ç”¨ä¸åŒç±»å‹çš„-observable"><a class="anchor" href="#å¸¸ç”¨ä¸åŒç±»å‹çš„-observable"></a> å¸¸ç”¨ä¸åŒç±»å‹çš„ Observable</h4><ul><li><p><strong>Single</strong>ï¼šè¯¥ Observable æ¯æ¬¡åªä¼ é€’ä¸€ä¸ªå…ƒç´ æˆ–è€…æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œå¸¸ç”¨çš„æœ‰ç½‘ç»œè¿æ¥ç­‰ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Single.create(<span class="keyword">new</span> SingleOnSubscribe&lt;User&gt;() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(SingleEmitter&lt;User&gt; emitter)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="string">"Anitaa"</span>);</span><br><span class="line">    emitter.onSuccess(user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">  .observeOn(Schedulers.io())</span><br><span class="line">  .subscribe(<span class="keyword">new</span> SingleObserver&lt;User&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">      System.out.println(String.format(<span class="string">"User with name %s successfully created: "</span>, user.getName()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>Maybe</strong>ï¼šè¯¥ Observable å¯èƒ½å‘é€å…ƒç´ ä¹Ÿå¯èƒ½ä¸å‘é€å…ƒç´ ï¼›</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Maybe.create(<span class="keyword">new</span> MaybeOnSubscribe&lt;User&gt;() &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">subscribe</span><span class="params">(MaybeEmitter&lt;User&gt; emitter)</span> </span>&#123;</span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="string">"Anitaa"</span>);</span><br><span class="line">    emitter.onSuccess(user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">  .observeOn(Schedulers.io())</span><br><span class="line">  .subscribe(<span class="keyword">new</span> MaybeObserver&lt;User&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSubscribe</span><span class="params">(Disposable d)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(User user)</span> </span>&#123;</span><br><span class="line">      System.out.println(String.format(<span class="string">"User with name '%s' successfully created "</span>, user.getName()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable e)</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"onError is called: "</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"onComplete is called"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure></li><li><p><strong>Completeable</strong>ï¼šè¯¥ Observable ä¸ä¼šå‘é€æ•°æ®ï¼Œä½†æ˜¯ä¼šå…³æ³¨äº‹ä»¶æ˜¯å¦æˆåŠŸæ‰§è¡Œï¼Œ<code>onComplete</code>æˆ–è€…<code>onFail</code>ä¹‹ä¸€ä¼šè¢«è°ƒç”¨ï¼›</p></li><li><p><strong>Flowable</strong>ï¼šå½“ Observable å‘é€å¤§é‡æ•°æ®ï¼Œä½†æ˜¯ Observer ä¸èƒ½åŠæ—¶å¤„ç†è¿™äº›æ•°æ®æ—¶éœ€è¦ä½¿ç”¨æ­¤ Observableï¼›</p></li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-different-types-of-observables-f23b3c78aeb6">Different Types of Observables</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><code>git log â€”grep key-word</code>å‘½ä»¤å¯ä»¥è¿‡æ»¤åŒ…å« key-wordçš„ git log ä¿¡æ¯ï¼›</li><li>EditTextè®¾ç½®è¾¹æ¡†éœ€è¦ä½¿ç”¨ background å±æ€§ ï¼›</li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="http://www.istarx.cn/2019/06/11/adb-commands/">ADB å¸¸ç”¨å‘½ä»¤æ•´ç†</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æ˜¯çˆ¶äº²èŠ‚ï¼Œç¥è€çˆ¸èŠ‚æ—¥å¿«ä¹ï¼Œèº«ä½“å¥åº·ï¼Œä¹Ÿç¥å¤©ä¸‹æ‰€æœ‰çˆ¶äº²èŠ‚æ—¥å¿«ä¹ã€‚ä¸Šå‘¨ç”±äºå¸¦ç«¯åˆèŠ‚å›å®¶æ²¡æ‰“å¡æ‹–å»¶äº†ä¸€å‘¨ã€‚æœ¬å‘¨æ‰“å¡å†…å®¹ä¸»è¦æ˜¯äºŒå‰æ ‘ã€RxJava ä»¥åŠ adb å‘½ä»¤ç›¸å…³çš„å†…å®¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ADB å¸¸ç”¨å‘½ä»¤æ•´ç†</title>
    <link href="http://www.istarx.cn/2019/06/11/adb-commands/"/>
    <id>http://www.istarx.cn/2019/06/11/adb-commands/</id>
    <published>2019-06-11T04:22:46.000Z</published>
    <updated>2019-06-11T07:57:31.805Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>ä½œä¸ºä¸€å Android å¼€å‘äººå‘˜ï¼Œadb å‘½ä»¤æ˜¯ä¸å¯ç¼ºå°‘çš„æŠ€èƒ½ä¹‹ä¸€ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­æˆ–å¤šæˆ–å°‘ä¼šç”¨åˆ°è¿™äº›å‘½ä»¤ï¼Œæœ¬ç¯‡å†…å®¹ä¸»è¦æ˜¯æ•´ç†äº†ä¸€äº›å¸¸ç”¨çš„ adb å‘½ä»¤ï¼ŒåŒæ—¶åŠ å¼ºè®°å¿†ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><ul><li><a href="#adb-%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8%E5%92%8C%E5%85%B3%E9%97%AD">adb å‘½ä»¤å¯åŠ¨å’Œå…³é—­</a></li><li><a href="#adb-%E5%B8%B8%E8%A7%84%E5%91%BD%E4%BB%A4">adb å¸¸è§„å‘½ä»¤</a></li><li><a href="#adb-devices-%E6%9F%A5%E8%AF%A2%E8%AE%BE%E5%A4%87">adb devices æŸ¥è¯¢è®¾å¤‡</a></li><li><a href="#%E6%93%8D%E4%BD%9C%E5%A4%9A%E4%B8%AA%E8%AE%BE%E5%A4%87%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA">æ“ä½œå¤šä¸ªè®¾å¤‡ä¸­çš„ä¸€ä¸ª</a></li><li><a href="#adb-forward-%E8%AE%BE%E7%BD%AE%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91">adb forward è®¾ç½®ç«¯å£è½¬å‘</a></li><li><a href="#adb-connect-%E9%80%9A%E8%BF%87-wifi-%E4%BD%BF%E7%94%A8-adb">adb connect é€šè¿‡ wifi ä½¿ç”¨ adb</a></li><li><a href="#adb-usb">adb usb</a></li><li><a href="#%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C-push-pull">æ–‡ä»¶æ“ä½œ <code>push</code> / <code>pull</code></a></li><li><a href="#%E8%B0%83%E8%AF%95%E5%91%BD%E4%BB%A4">è°ƒè¯•å‘½ä»¤</a></li><li><a href="#%E8%B0%83%E7%94%A8-activity-manageram">è°ƒç”¨ Activity Manager(am)</a></li><li><a href="#%E8%B0%83%E7%94%A8%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8-package-managerpm">è°ƒç”¨è½¯ä»¶åŒ…ç®¡ç†å™¨ Package Manager(pm)</a></li><li><a href="#%E6%88%AA%E5%9B%BEscreencap%E4%BB%A5%E5%8F%8A%E5%BD%95%E5%88%B6%E8%A7%86%E9%A2%91screenrecord">æˆªå›¾(<code>screencap</code>)ä»¥åŠå½•åˆ¶è§†é¢‘(<code>screenrecord</code>)</a></li></ul></li></ul></p><h3 id="adb-å‘½ä»¤å¯åŠ¨å’Œå…³é—­"><a class="anchor" href="#adb-å‘½ä»¤å¯åŠ¨å’Œå…³é—­"></a> adb å‘½ä»¤å¯åŠ¨å’Œå…³é—­</h3><ul><li><strong>adb start-server</strong>ï¼šæ£€æŸ¥ adb æœåŠ¡å™¨è¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œï¼Œå¦‚æœæœªè¿è¡Œåˆ™å¯åŠ¨å®ƒï¼›</li><li><strong>adb kill-server</strong>ï¼šå…³é—­ adb æœåŠ¡ï¼›</li></ul><h3 id="adb-å¸¸è§„å‘½ä»¤"><a class="anchor" href="#adb-å¸¸è§„å‘½ä»¤"></a> adb å¸¸è§„å‘½ä»¤</h3><ul><li><strong>adb version</strong>ï¼šæŸ¥çœ‹ adb ç‰ˆæœ¬ï¼›</li><li><strong>adb help</strong>ï¼šè¾“å‡º adb æ”¯æŒçš„å‘½ä»¤ï¼›</li><li><strong>adb wait-for-device</strong>ï¼šç­‰å¾…è¿æ¥è®¾å¤‡ï¼›</li></ul><h3 id="adb-devices-æŸ¥è¯¢è®¾å¤‡"><a class="anchor" href="#adb-devices-æŸ¥è¯¢è®¾å¤‡"></a> adb devices æŸ¥è¯¢è®¾å¤‡</h3><p>æ­¤å‘½ä»¤ä¼šåˆ—ä¸¾å‡ºå½“å‰ç”µè„‘ä¸Šé“¾æ¥çš„è®¾å¤‡ï¼ŒåŒ…æ‹¬æ¨¡æ‹Ÿå™¨ä»¥åŠå®ä½“è®¾å¤‡ã€‚å‘½ä»¤çª—å£ä¼šè¾“å‡ºå½“å‰é“¾æ¥è®¾å¤‡çš„åºåˆ—å·ä»¥åŠçŠ¶æ€ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">e6b2a367        device</span><br><span class="line">emulator-5654   device</span><br></pre></td></tr></table></figure><div class="alert info"><p>å¿…é¡»è¦å®‰è£…é©±åŠ¨ï¼Œå¹¶ä¸”æ‰“å¼€å¼€å‘è€…æ¨¡å¼ä¸‹çš„ usb è°ƒè¯•æ‰å¯ä»¥æ˜¾ç¤ºå‡ºè®¾å¤‡</p></div><h3 id="æ“ä½œå¤šä¸ªè®¾å¤‡ä¸­çš„ä¸€ä¸ª"><a class="anchor" href="#æ“ä½œå¤šä¸ªè®¾å¤‡ä¸­çš„ä¸€ä¸ª"></a> æ“ä½œå¤šä¸ªè®¾å¤‡ä¸­çš„ä¸€ä¸ª</h3><p>é€šè¿‡ adb devices å‘½ä»¤å¯ä»¥çœ‹åˆ°è¿æ¥ç”µè„‘çš„æ‰€æœ‰ android è®¾å¤‡ï¼Œå¦‚æœè¦å¯¹å¤šä¸ªè®¾å¤‡ä¸­çš„æŸä¸ªè¿›è¡Œæ“ä½œï¼Œéœ€è¦ä½¿ç”¨ <code>-s</code> å‚æ•°ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb [-d|-e|-s serial_number] [shell] command</span><br></pre></td></tr></table></figure><ul><li><strong>-d</strong>ï¼šå°†å‘½ä»¤å‘é€åˆ°å”¯ä¸€è¿æ¥çš„ USB è®¾å¤‡ï¼Œå¦‚æœè¿æ¥å¤šä¸ªè®¾å¤‡åˆ™ä¼šæŠ¥é”™ï¼›</li><li><strong>-e</strong>ï¼šå°†å‘½ä»¤å‘é€åˆ°å”¯ä¸€è¿è¡Œçš„æ¨¡æ‹Ÿå™¨ï¼Œå¦‚æœå¯åŠ¨äº†å¤šä¸ªæ¨¡æ‹Ÿå™¨è®¾å¤‡ï¼Œåˆ™ä¼šæŠ¥é”™ï¼›</li></ul><h3 id="adb-forward-è®¾ç½®ç«¯å£è½¬å‘"><a class="anchor" href="#adb-forward-è®¾ç½®ç«¯å£è½¬å‘"></a> adb forward è®¾ç½®ç«¯å£è½¬å‘</h3><p>å¯ä»¥ä½¿ç”¨è¯¥å‘½ä»¤è®¾ç½®ä»»æ„ç«¯å£è½¬å‘ï¼Œå³å¯¹ç‰¹å®šä¸»æœºç«¯å£çš„è¯·æ±‚è½¬å‘åˆ°æ¨¡æ‹Ÿå™¨/å®ä½“è®¾å¤‡ä¸Šçš„å…¶å®ƒç«¯å£ï¼Œå®ç°ä¸»æœºå’Œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚</p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb forward &lt;local&gt; &lt;remote&gt;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ä»¥ä¸‹å‘½ä»¤å®ç°ä¸»æœº 6100 ç«¯å£åˆ°æ¨¡æ‹Ÿå™¨æˆ–è€…å®ä½“è®¾å¤‡ 7100 ç«¯å£çš„è½¬å‘ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb forward tcp:6100 tcp:7100</span><br></pre></td></tr></table></figure><h3 id="adb-connect-é€šè¿‡-wifi-ä½¿ç”¨-adb"><a class="anchor" href="#adb-connect-é€šè¿‡-wifi-ä½¿ç”¨-adb"></a> adb connect é€šè¿‡ wifi ä½¿ç”¨ adb</h3><p>å‘½ä»¤ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb connect &lt;host&gt;[:&lt;port&gt;]</span><br></pre></td></tr></table></figure><p>æ“ä½œæ­¥éª¤ï¼š</p><ul><li><p>æ‰‹æœºè¿æ¥ usb æ¥å£ï¼›</p></li><li><p>adb devices åˆ—å‡ºè®¾å¤‡ï¼›</p></li><li><p>adb tcpip 5555ï¼šåœ¨ TCP æ¨¡å¼ä¸‹é‡å¯ï¼Œç«¯å£ä¸º5555</p></li><li><p>adb connect #.#.#.# è¿æ¥åˆ° #.#.#.#:5555</p><div class="alert info"><p>å‚æ•° #.#.#.# æ˜¯ Android è®¾å¤‡çš„ IP åœ°å€ã€‚</p></div></li></ul><h3 id="adb-usb"><a class="anchor" href="#adb-usb"></a> adb usb</h3><p>åœ¨ usb æ¨¡å¼ä¸‹é‡æ–°è¿æ¥ï¼›</p><h3 id="æ–‡ä»¶æ“ä½œ-push-pull"><a class="anchor" href="#æ–‡ä»¶æ“ä½œ-push-pull"></a> æ–‡ä»¶æ“ä½œ <code>push</code> / <code>pull</code></h3><p>adb å‘½ä»¤ <code>push</code>ã€<code>pull</code>å°†æ–‡ä»¶ä»æœ¬åœ°æ‹·è´åˆ°æ‰‹æœºæˆ–è€…ä»æ‰‹æœºæ‹·è´åˆ°æœ¬åœ°ï¼›</p><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb pull remote local // ä»è®¾å¤‡æ‹·è´åˆ°æœ¬åœ°</span><br><span class="line">adb push local remote // ä»æœ¬åœ°æ¨é€åˆ°è®¾å¤‡</span><br></pre></td></tr></table></figure><h3 id="è°ƒè¯•å‘½ä»¤"><a class="anchor" href="#è°ƒè¯•å‘½ä»¤"></a> è°ƒè¯•å‘½ä»¤</h3><ul><li><strong><code>dumpsys</code></strong>ï¼šè¾“å‡ºç³»ç»Ÿæ•°æ®ï¼›</li><li><strong><code>dumpstate</code></strong>ï¼šè¾“å‡ºç³»ç»ŸçŠ¶æ€ï¼›</li><li><strong><code>logcat</code></strong>ï¼šè¾“å‡ºæ—¥å¿—ï¼›</li></ul><h3 id="è°ƒç”¨-activity-manageram"><a class="anchor" href="#è°ƒç”¨-activity-manageram"></a> è°ƒç”¨ Activity Manager(am)</h3><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell am command</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨è¯¥å‘½ä»¤å¯ä»¥å¯åŠ¨æŸä¸ª activityã€serviceã€å‘é€å¹¿æ’­ç­‰ã€‚</p><p>å¯ç”¨çš„ Activity Manager å‘½ä»¤å¦‚ä¸‹ï¼š</p><ul><li><p><strong><code>start</code> [<em>options</em>] <em>intent</em></strong>ï¼šå¯åŠ¨ intent æŒ‡å®šçš„ activityã€‚é€‰é¡¹ä¸»è¦æœ‰å¦‚ä¸‹ï¼š</p><ul><li><strong><code>-D</code></strong>ï¼šå¯åŠ¨è°ƒè¯•ï¼›</li><li><strong><code>-W</code></strong>ï¼šç­‰å¾…å¯åŠ¨å®Œæˆï¼›</li><li><strong><code>--start-profiler</code> <em>file</em></strong>ï¼šå¯åŠ¨åˆ†æå™¨å¹¶å°†ç»“æœå‘é€åˆ°fileï¼›</li><li><strong><code>-P</code> <em>file</em></strong>ï¼šç±»ä¼¼ start-profilerï¼Œä½†æ˜¯å½“åº”ç”¨è¿›å…¥ç©ºé—²çŠ¶æ€æ—¶åœæ­¢åˆ†æï¼›</li><li><strong><code>-R</code> <em>count</em></strong>ï¼šé‡å¤å¯åŠ¨ activity count æ¬¡ã€‚æ¯æ¬¡é‡å¤å‰å°†å®Œæˆé¡¶éƒ¨ activityï¼›</li><li><strong><code>-S</code></strong>ï¼šå¯åŠ¨ Activity å‰å¼ºè¡Œåœæ­¢ç›®æ ‡åº”ç”¨ï¼›</li><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li></ul></li><li><p><strong><code>startservice</code> [<em>options</em>] <em>intent</em></strong>ï¼šå¯åŠ¨ intent å¯¹åº”çš„ Serviceï¼›</p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li></ul></li><li><p><strong><code>force-stop</code> <em>package_name</em></strong>ï¼šå¼ºè¡Œåœæ­¢ä¸ package_name(åº”ç”¨åŒ…å) ç›¸å…³è”çš„æ‰€æœ‰<strong>åº”ç”¨</strong>ï¼›</p></li><li><p><strong><code>kill</code> [<em>options</em>] <em>package_name</em></strong>ï¼šç»ˆæ­¢ä¸ <code>package_name</code>ï¼ˆåº”ç”¨çš„åŒ…åç§°ï¼‰å…³è”çš„æ‰€æœ‰<strong>è¿›ç¨‹</strong>ã€‚æ­¤å‘½ä»¤ä»…ç»ˆæ­¢å¯å®‰å…¨ç»ˆæ­¢ä¸”ä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒçš„è¿›ç¨‹ï¼›</p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li></ul></li><li><p><strong><code>kill-all</code></strong>ï¼šç»ˆæ­¢åå°æ‰€æœ‰è¿›ç¨‹ï¼›</p></li><li><p><strong><code>broadcast</code> [<em>options</em>] <em>intent</em></strong>ï¼šå‘å‡ºå¹¿æ’­ intentï¼›</p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li></ul></li><li><p><strong><code>instrument</code>  [<em>options</em>] <em>compoent</em></strong>ï¼šä½¿ç”¨  <code>Instrumentation</code> å®ä¾‹ç›‘æ§ã€‚é€šå¸¸æƒ…å†µä¸‹ component æ˜¯**<em>test_package</em>/<em>runner_class</em>**ï¼›</p><p>å¯é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>-r</code></strong>ï¼šè¾“å‡ºåŸå§‹ç»“æœï¼Œå¦åˆ™å¯¹<code>report_key_streamresult</code> è¿›è¡Œè§£ç ï¼›</li><li><strong><code>-e</code> <em>name value</em></strong>ï¼šå°†å‚æ•° <strong>name</strong> çš„å€¼è®¾ç½®ä¸º <strong>value</strong>ï¼›</li><li><strong><code>-p</code> <em>file</em></strong>ï¼šå°†åˆ†ææ•°æ®å†™å…¥ fileï¼›</li><li><strong><code>-w</code></strong>ï¼šå…ˆç­‰å¾…ä»ªå™¨å®Œæˆï¼Œç„¶åå†è¿”å›ï¼Œæµ‹è¯•è¿è¡Œå™¨éœ€è¦ä½¿ç”¨æ­¤é€‰é¡¹ï¼›</li><li><strong><code>--no-window-animation</code></strong>ï¼šè¿è¡Œæ—¶å…³é—­çª—å£åŠ¨ç”»ï¼›</li><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li></ul></li><li><p><strong><code>profile start</code> <em>process  file</em></strong>ï¼šå¯åŠ¨ process è¿›ç¨‹çš„åˆ†æå™¨ï¼Œå°†ç»“æœå†™å…¥ fileï¼›</p></li><li><p><strong><code>profile start</code> <em>process</em></strong>ï¼šåœæ­¢ process è¿›ç¨‹çš„åˆ†æå™¨ï¼›</p></li><li><p><strong><code>dumpheap</code> [<em>options</em>] <em>process file</em></strong>ï¼šå°† process è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µä¿å­˜åˆ° file æ–‡ä»¶ä¸­ï¼›</p><p>å¯é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li><li><strong><code>-n</code></strong>ï¼šä¿å­˜åŸç”Ÿå †ï¼Œè€Œéæ‰˜ç®¡å †ï¼›</li></ul></li><li><p><strong><code>set-debug-app</code> [<em>options</em>] <em>package</em></strong>ï¼šå°†åº”ç”¨ package è®¾ä¸ºè°ƒè¯•ï¼›</p><p>å¯é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>-w</code></strong>ï¼šåº”ç”¨å¯åŠ¨æ—¶ç­‰å¾…è°ƒè¯•ç¨‹åºï¼›</li><li><strong><code>--persistent</code></strong>ï¼šä¿ç•™æ­¤å€¼ï¼›</li></ul></li><li><p><strong><code>clear-debug-app</code></strong>ï¼šæ¸…é™¤è®¾ç½®çš„è°ƒè¯• è½¯ä»¶ï¼›</p></li><li><p><strong><code>monitor</code> [<em>options</em>]</strong>ï¼šå¯åŠ¨å¯¹ crash æˆ– anr çš„ç›‘æ§ï¼›</p></li><li><p><strong><code>display-size</code> [<em>reset</em> | <em>width</em> x <em>height</em>]</strong>ï¼šæ›¿æ¢æ¨¡æ‹Ÿå™¨ã€è®¾å¤‡çš„æ˜¾ç¤ºå°ºå¯¸ï¼Œç”¨äºå¤„äº‹ä¸åŒåˆ†è¾¨ç‡æ˜¾ç¤ºï¼›</p></li><li><p><strong><code>display-density</code> <em>dpi</em></strong>ï¼šæ›¿æ¢è®¾å¤‡çš„æ˜¾ç¤ºå¯†åº¦ï¼›</p></li><li><p><strong><code>to-uri</code> <em>intent</em></strong>ï¼šå°† intent ä»¥ URI çš„å½¢å¼è¾“å‡ºï¼›</p></li><li><p><strong><code>to-intent-uri</code> <em>intent</em></strong>ï¼šå°†ç»™å®šçš„ intent è§„èŒƒä»¥ <code>intent:URI</code> çš„å½¢å¼è¾“å‡ºï¼›</p></li></ul><h3 id="è°ƒç”¨è½¯ä»¶åŒ…ç®¡ç†å™¨-package-managerpm"><a class="anchor" href="#è°ƒç”¨è½¯ä»¶åŒ…ç®¡ç†å™¨-package-managerpm"></a> è°ƒç”¨è½¯ä»¶åŒ…ç®¡ç†å™¨ Package Manager(pm)</h3><p>ä½¿ç”¨æ–¹æ³•:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell pm command</span><br></pre></td></tr></table></figure><p>å¯ç”¨çš„å‘½ä»¤æœ‰ï¼š</p><ul><li><p><strong><code>list packages</code> [<em>options</em>] <em>filter</em></strong>ï¼šè¾“å‡º æ‰€æœ‰åŒ…å« filter æ–‡æœ¬çš„è½¯ä»¶åŒ…ï¼Œé»˜è®¤åˆ—å‡ºæ‰€æœ‰çš„è½¯ä»¶åŒ…ï¼›</p><p>å¯é€‰é¡¹æœ‰ï¼š</p><ul><li><code>-f</code>ï¼šæŸ¥çœ‹å®ƒä»¬çš„å…³è”æ–‡ä»¶ï¼›</li><li><code>-d</code>ï¼šè¿›è¡Œè¿‡æ»¤ä»¥ä»…æ˜¾ç¤ºå·²åœç”¨çš„è½¯ä»¶åŒ…ï¼›</li><li><code>-e</code>ï¼šè¿›è¡Œè¿‡æ»¤ä»¥ä»…æ˜¾ç¤ºå·²å¯ç”¨çš„è½¯ä»¶åŒ…ï¼›</li><li><code>-s</code>ï¼šè¿›è¡Œè¿‡æ»¤ä»¥ä»…æ˜¾ç¤ºç³»ç»Ÿè½¯ä»¶åŒ…ï¼›</li><li><code>-3</code>ï¼šè¿›è¡Œè¿‡æ»¤ä»¥ä»…æ˜¾ç¤ºç¬¬ä¸‰æ–¹è½¯ä»¶åŒ…ï¼›</li><li><code>-i</code>ï¼šæŸ¥çœ‹è½¯ä»¶åŒ…çš„å®‰è£…ç¨‹åºï¼›</li><li><code>-u</code>ï¼šåŒ…æ‹¬å¸è½½çš„è½¯ä»¶åŒ…ï¼›</li><li><code>--user</code> <em><strong>user_id</strong></em>ï¼šè¦æŸ¥è¯¢çš„ç”¨æˆ·ç©ºé—´ï¼›</li></ul></li><li><p><strong><code>list permission-groups</code></strong>ï¼šè¾“å‡ºæ‰€æœ‰å·²çŸ¥çš„æƒé™ç»„ï¼›</p></li><li><p><strong><code>list permissions</code> [<em>options</em>] <em>group</em></strong>ï¼šè¾“å‡ºæ‰€æœ‰å·²çŸ¥æƒé™ï¼Œæˆ–è€…ï¼Œä»…è¾“å‡º <code>group</code> ä¸­çš„æƒé™ï¼›</p><p>å¯é€‰é¡¹æœ‰ï¼š</p><ul><li><code>-g</code>ï¼šæŒ‰ç»„åŠ ä»¥ç»„ç»‡ï¼›</li><li><code>-f</code>ï¼šè¾“å‡ºæ‰€æœ‰ä¿¡æ¯ï¼›</li><li><code>-s</code>ï¼šä»…è¾“å‡ºé—´æ–­æ‘˜è¦ï¼›</li><li><code>-d</code>ï¼šä»…åˆ—å‡ºå±é™©æƒé™ï¼›</li><li><code>-u</code>ï¼šä»…åˆ—å‡ºç”¨æˆ·çœ‹åˆ°çš„æƒé™ï¼›</li></ul></li><li><p>**<code>list instrumentation</code> [<em>options</em>] **ï¼šåˆ—å‡ºæ‰€æœ‰çš„æµ‹è¯•è½¯ä»¶åŒ…ï¼›</p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><code>-f</code>ï¼šåˆ—å‡ºç”¨äºæµ‹è¯•è½¯ä»¶åŒ…çš„ apk æ–‡ä»¶ï¼›</li><li><code>target_package</code>ï¼šåˆ—å‡ºä»…ç”¨äºæ­¤åº”ç”¨çš„æµ‹è¯•è½¯ä»¶åŒ…ï¼›</li></ul></li><li><p><strong><code>list features</code></strong>ï¼šåˆ—å‡ºç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ï¼›</p></li><li><p><strong><code>list libraries</code></strong>ï¼šåˆ—å‡ºæ”¯æŒçš„æ‰€æœ‰åº“ï¼›</p></li><li><p><strong><code>list users</code></strong>ï¼šåˆ—å‡ºè®¾å¤‡ç³»ç»Ÿä¸Šæ‰€æœ‰çš„ç”¨æˆ·ï¼›</p></li><li><p><strong><code>path</code> <em>package</em></strong>ï¼šè¾“å‡ºç»™å®špackge çš„ apk è·¯å¾„ï¼›</p></li><li><p><strong><code>install</code> [<em>options</em>] <em>path</em></strong>ï¼šå°†è½¯ä»¶å®‰è£…åˆ° path æŒ‡å®šçš„è·¯å¾„</p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><code>-l</code>ï¼šå®‰è£…å…·æœ‰é”å®šåŠŸèƒ½çš„è½¯ä»¶åŒ…ï¼›</li><li><code>-r</code>ï¼šè¦†ç›–ç°æœ‰åº”ç”¨ï¼Œä¿ç•™ç”¨æˆ·æ•°æ®ï¼›</li><li><code>-t</code>ï¼šå…è®¸å®‰è£…æµ‹è¯• apkï¼›</li><li><code>-i</code> <em>install_package_name</em>ï¼šæŒ‡å®šå®‰è£…ç¨‹åºè½¯ä»¶åŒ…åç§°ï¼›</li><li><code>-s</code>ï¼šåœ¨å…±äº«çš„å¤§å®¹é‡å­˜å‚¨ï¼ˆå¦‚ sdcardï¼‰ä¸Šå®‰è£…è½¯ä»¶åŒ…ï¼›</li><li><code>-f</code>ï¼šåœ¨å†…éƒ¨ç³»ç»Ÿå†…å­˜ä¸Šå®‰è£…è½¯ä»¶åŒ…ï¼›</li><li><code>-d</code>ï¼šå…è®¸ç‰ˆæœ¬é™çº§å®‰è£…ï¼›</li><li><code>-g</code>ï¼šæˆäºˆåº”ç”¨æ¸…æ·¡ä¸­åˆ—å‡ºçš„æ‰€æœ‰æƒé™ï¼›</li></ul></li><li><p><strong><code>uninstall</code> [<em>options</em>] <em>package</em></strong>ï¼šä»ç³»ç»Ÿä¸­ç§»é™¤è½¯ä»¶ï¼›</p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><code>-k</code>ï¼šç§»é™¤è½¯ä»¶åä¿ç•™æ•°æ®å’Œç¼“å­˜ç›®å½•ï¼›</li></ul></li><li><p><strong><code>clear</code> <em>package</em></strong>ï¼šåˆ é™¤ä¸è½¯ä»¶åŒ…å…³è”çš„æ‰€æœ‰æ•°æ®ï¼›</p></li><li><p><strong><code>enable</code> <em>package_or_component</em></strong>ï¼šå¯ç”¨ç»™å®šè½¯ä»¶åŒ…æˆ–ç»„ä»¶ï¼ˆä½œä¸ºâ€œpackage/classâ€å†™å…¥ï¼‰ï¼›</p></li><li><p><strong><code>disable</code> <em>package_or_component</em></strong>ï¼šåœç”¨ç»™å®šè½¯ä»¶åŒ…æˆ–ç»„ä»¶ï¼ˆä½œä¸ºâ€œpackage/classâ€å†™å…¥ï¼‰ï¼›</p></li><li><p><strong><code>disable-user</code>[<em>options</em>] <em>package_or_component</em></strong></p><p>é€‰é¡¹æœ‰ï¼š</p><ul><li><strong><code>â€”user</code> <em>user_id</em> | current</strong>ï¼šæŒ‡å®šè¦ä½œä¸ºå“ªä¸ªç”¨æˆ·è¿è¡Œï¼›å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½œä¸ºå½“å‰ç”¨æˆ·è¿è¡Œ;</li></ul></li><li><p>å…è®¸/æ’¤é”€æƒé™ï¼š</p><ul><li><p><code>grant</code> <em>package_name permission</em>ï¼šæˆäºˆåº”ç”¨æƒé™ï¼›</p></li><li><p><code>revoke</code> <em>package_name permission</em>ï¼šæ’¤é”€åº”ç”¨æƒé™ï¼›</p><div class="alert info"><p>åœ¨è¿è¡Œ Android 6.0ï¼ˆAPI çº§åˆ« 23ï¼‰åŠæ›´é«˜ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šï¼Œå¯ä»¥æ˜¯åº”ç”¨æ¸…å•ä¸­å£°æ˜çš„ä»»ä½•æƒé™ã€‚åœ¨è¿è¡Œ Android 5.1ï¼ˆAPI çº§åˆ« 22ï¼‰å’Œæ›´ä½ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šï¼Œå¿…é¡»æ˜¯åº”ç”¨å®šä¹‰çš„å¯é€‰æƒé™ã€‚</p></div></li></ul></li><li><p>è®¾ç½®/è·å–åº”ç”¨å®‰è£…ä½ç½®ï¼š</p><ul><li><p><code>set-install-location</code> <em>location</em>ï¼šæ›´æ”¹é»˜è®¤å®‰è£…ä½ç½®ï¼›</p></li><li><p><code>get-install-location</code>ï¼šè·å–é»˜è®¤å®‰è£…ä½ç½®ï¼›</p><p>ä¸Šè¿°å‘½ä»¤è®¾ç½®æˆ–è€…è·å–ç»“æœéƒ½æ˜¯ä¸‰ä¸ªå€¼ï¼š</p><ul><li><code>0</code>ï¼šè‡ªåŠ¨â€”è®©ç³»ç»Ÿå†³å®šæœ€ä½³ä½ç½®ã€‚</li><li><code>1</code>ï¼šå†…éƒ¨â€”å®‰è£…åœ¨å†…éƒ¨è®¾å¤‡å­˜å‚¨ä¸Šã€‚</li><li><code>2</code>ï¼šå¤–éƒ¨â€”å®‰è£…åœ¨å¤–éƒ¨ä»‹è´¨ä¸Šã€‚</li></ul><div class="alert info"><p>ä½¿ç”¨æ­¤å‘½ä»¤ä¼šå¯¼è‡´åº”ç”¨ä¸­æ–­å’Œå…¶å®ƒæ„å¤–è¡Œä¸º</p></div></li></ul></li><li><p><strong><code>set-permission-enforced</code> <em>permission</em> [true|false]</strong>ï¼šæŒ‡å®šæ˜¯å¦å¼ºåˆ¶æ‰§è¡Œç»™å®šçš„æƒé™ï¼›</p></li><li><p><strong><code>trim-caches</code> <em>desired_free_space</em></strong>ï¼šå‡å°‘ç¼“å­˜æ–‡ä»¶ä»¥è¾¾åˆ°ç»™å®šçš„å¯ç”¨ç©ºé—´ï¼›</p></li><li><p><strong><code>create-user</code> <em>user_name</em></strong>ï¼šåˆ›å»ºæ–°ç”¨æˆ· user_nameï¼›</p></li><li><p><strong><code>remove-user</code> user_id</strong>ï¼š ç§»é™¤ user_id å¯¹åº”çš„ç”¨æˆ·ï¼Œåˆ é™¤ä¸è¯¥ç”¨æˆ·å…³è”çš„æ‰€æœ‰æ•°æ®ï¼›</p></li><li><p><strong><code>get-max-users</code></strong>ï¼šè¾“å‡ºè®¾å¤‡æ”¯æŒçš„æœ€å¤§ç”¨æˆ·æ•°ï¼›</p></li></ul><h3 id="æˆªå›¾screencapä»¥åŠå½•åˆ¶è§†é¢‘screenrecord"><a class="anchor" href="#æˆªå›¾screencapä»¥åŠå½•åˆ¶è§†é¢‘screenrecord"></a> æˆªå›¾(<code>screencap</code>)ä»¥åŠå½•åˆ¶è§†é¢‘(<code>screenrecord</code>)</h3><ul><li><p>æˆªå›¾</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell screencap /sdcard/screen.png</span><br></pre></td></tr></table></figure></li><li><p>å½•åˆ¶è§†é¢‘ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell screenrecord [options] filename</span><br></pre></td></tr></table></figure><div class="alert info"><ul><li>éŸ³é¢‘å’Œè§†é¢‘ä¸èƒ½åŒæ—¶å½•åˆ¶ï¼›</li><li>æŒ‰ Control + C åœæ­¢å±å¹•å½•åˆ¶ï¼Œå¦åˆ™ï¼Œåˆ°ä¸‰åˆ†é’Ÿæˆ– <code>--time-limit</code> è®¾ç½®çš„æ—¶é—´é™åˆ¶æ—¶ï¼Œå½•åˆ¶å°†è‡ªåŠ¨åœæ­¢ï¼›</li></ul></div><p>è§†é¢‘å½•åˆ¶çš„å‚æ•°ï¼š</p><ul><li><p><code>--help</code>ï¼šæ˜¾ç¤ºå¸®åŠ©å‘½ä»¤ï¼›</p></li><li><p><code>--size</code> <em>width</em> x <em>height</em>ï¼šè®¾ç½®è§†é¢‘å¤§å°ï¼Œé»˜è®¤æ˜¯è®¾å¤‡çš„å…ƒç´ æ˜¾ç¤ºåˆ†è¾¨ç‡(å¦‚æœæ”¯æŒ)ï¼Œ<strong>å¦‚æœä¸æ”¯æŒåˆ™ä½¿ç”¨1280 x 720</strong>ï¼›</p></li><li><p><code>--bit-rate</code> <em>rate</em>ï¼šè®¾ç½®è§†é¢‘çš„è§†é¢‘æ¯”ç‰¹ç‡ï¼ˆä»¥å…†æ¯”ç‰¹æ¯ç§’ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤å€¼ä¸º 4Mbpsã€‚æ‚¨å¯ä»¥å¢åŠ æ¯”ç‰¹ç‡ä»¥æå‡è§†é¢‘è´¨é‡ï¼Œä½†è¿™ä¹ˆåšä¼šå¯¼è‡´å½±ç‰‡æ–‡ä»¶å˜å¾—æ›´å¤§ï¼›</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">// è®¾ç½®æ¯”ç‰¹ç‡ä¸º6Mbps</span><br><span class="line">adb shell screenrecord --bit-rate 6000000 /sdcard/demo.mp4</span><br></pre></td></tr></table></figure></li><li><p><code>--time-limit</code> <em><strong>time</strong></em>ï¼šè®¾ç½®æœ€å¤§å½•åˆ¶æ—¶é—´ï¼Œå•ä½ä¸º <strong>s</strong>ï¼Œé»˜è®¤å€¼ä¸º 3åˆ†é’Ÿï¼›</p></li><li><p><code>--rotate</code>ï¼šè§†é¢‘è¾“å‡ºæ—‹è½¬90åº¦(<strong>å®éªŒåŠŸèƒ½</strong>)ï¼›</p></li><li><p><code>--verbose</code>ï¼šå•°å—¦æ¨¡å¼ï¼›</p></li></ul></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä½œä¸ºä¸€å Android å¼€å‘äººå‘˜ï¼Œadb å‘½ä»¤æ˜¯ä¸å¯ç¼ºå°‘çš„æŠ€èƒ½ä¹‹ä¸€ï¼Œåœ¨æ—¥å¸¸å·¥ä½œä¸­æˆ–å¤šæˆ–å°‘ä¼šç”¨åˆ°è¿™äº›å‘½ä»¤ï¼Œæœ¬ç¯‡å†…å®¹ä¸»è¦æ˜¯æ•´ç†äº†ä¸€äº›å¸¸ç”¨çš„ adb å‘½ä»¤ï¼ŒåŒæ—¶åŠ å¼ºè®°å¿†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¨‹åºçŒ¿è¿›åŒ–ä¹‹è·¯" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="adb" scheme="http://www.istarx.cn/tags/adb/"/>
    
      <category term="android" scheme="http://www.istarx.cn/tags/android/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬9å‘¨</title>
    <link href="http://www.istarx.cn/2019/06/02/arts-week-nine/"/>
    <id>http://www.istarx.cn/2019/06/02/arts-week-nine/</id>
    <published>2019-06-02T13:02:06.000Z</published>
    <updated>2019-06-16T02:33:38.784Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>è¿™å‘¨åŠ äº†ä¸€å‘¨ç­ï¼Œæœ‰ä¸¤å¤©éƒ½åŠ åˆ°æ™šä¸Šä¸¤ç‚¹å¤šæ‰å›å®¶ï¼Œç´¯æˆç‹—äº†ğŸ¥¶ï¼Œå‘¨æœ«å¼ºåˆ¶ä¸å»åŠ ç­è¡¥è§‰ï¼Œç°åœ¨è¿˜æ²¡ç¼“è¿‡åŠ²æ¥å‘¢ã€‚æœ¬å‘¨æ‰“å¡å†…å®¹æœ‰ç‚¹å°‘ï¼Œä¸€é“å›æ–‡é“¾è¡¨ç›¸å…³çš„é¢˜ç›®ã€çœ‹äº†ä¸€ç¯‡å…³äº Android Studio  çš„æŠ€å·§ç±»æ–‡ç« ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li></ul></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p>åˆ¤æ–­ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æ—¶å›æ–‡é“¾è¡¨</p><p><strong>Example</strong></p><p><strong>ç¤ºä¾‹ 1:</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> è¾“å…¥: 1-&gt;2</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> è¾“å‡º: <span class="literal">false</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>ç¤ºä¾‹ 2:</strong></p><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&gt; è¾“å…¥: <span class="number">1</span>-&gt;<span class="number">2</span>-&gt;<span class="number">2</span>-&gt;<span class="number">1</span></span><br><span class="line">&gt; è¾“å‡º: <span class="literal">true</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>ç”¨å¿«æ…¢æ–¹æ³•æ‰¾åˆ°ä¸­ç‚¹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æŠŠå‰åŠæ®µé“¾è¡¨å‹è¿›æ ˆï¼Œä¹‹åä»æ…¢èŠ‚ç‚¹å¼€å§‹å’Œæ ˆä¸­çš„å…ƒç´ ä¾æ¬¡è¿›è¡Œå¯¹æ¯”ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ListNode slow = head;</span><br><span class="line">  ListNode fast = head;</span><br><span class="line">  Stack&lt;Integer&gt; pre = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">  <span class="keyword">while</span> (fast != <span class="keyword">null</span> &amp;&amp; fast.next != <span class="keyword">null</span>) &#123;</span><br><span class="line">    pre.push(slow.val);</span><br><span class="line">    slow = slow.next;</span><br><span class="line">    fast = fast.next.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (fast != <span class="keyword">null</span>) &#123; <span class="comment">//å¥‡æ•°</span></span><br><span class="line">    slow = slow.next;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (slow != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (slow.val != pre.pop()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    slow = slow.next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨é˜…è¯»å­¦ä¹ Android studio æŠ€å·§æ–¹é¢çš„ä¸€ä»½ wiki æ–‡æ¡£ï¼š<a href="https://github.com/pavlospt/Android-Studio-Tips-by-Philippe-Breault/wiki">Android-Studio-Tips-by-Philippe-Breault</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li>JobIntentService è°ƒåº¦æ˜¯ä¸ªé˜Ÿåˆ—ï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å› ä¸ºè€—æ—¶ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåˆ™åé¢çš„ä»»åŠ¡æ— æ³•æ‰§è¡Œï¼Œæ‰€ä»¥è¦é¿å…åœ¨ JobIntentService ä¸­åšè€—æ—¶ä»»åŠ¡ï¼Œå°¤å…¶æ˜¯ä¸ç•Œé¢ç›¸å…³çš„ä»»åŠ¡ã€‚é™¤æ­¤ä¹‹å¤–å¦‚æœå‰é¢çš„ä»»åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­åº”ç”¨æˆ–è€…å‡ºç°å¼‚å¸¸ï¼Œåˆ™åé¢çš„ä»»åŠ¡ä¼šæ•´ä½“å»¶æ—¶30åˆ†é’Ÿï¼›</li><li>Messaging ä¸­çŸ­ä¿¡å‘é€æ˜¯ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å‘é€ä¸€æ¡çŸ­ä¿¡ï¼Œå¦‚æœå‰é¢å‘é€å¤±è´¥è§¦å‘äº†é‡å‘æœºåˆ¶ï¼Œåˆ™åé¢çš„çŸ­ä¿¡éƒ½ä¼šåŒæ­¥è¿›è¡Œå»¶æ—¶å‘é€ï¼›</li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="https://blog.csdn.net/houson_c/article/details/78461751">JobIntentServiceè¯¦è§£åŠä½¿ç”¨</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™å‘¨åŠ äº†ä¸€å‘¨ç­ï¼Œæœ‰ä¸¤å¤©éƒ½åŠ åˆ°æ™šä¸Šä¸¤ç‚¹å¤šæ‰å›å®¶ï¼Œç´¯æˆç‹—äº†ğŸ¥¶ï¼Œå‘¨æœ«å¼ºåˆ¶ä¸å»åŠ ç­è¡¥è§‰ï¼Œç°åœ¨è¿˜æ²¡ç¼“è¿‡åŠ²æ¥å‘¢ã€‚æœ¬å‘¨æ‰“å¡å†…å®¹æœ‰ç‚¹å°‘ï¼Œä¸€é“å›æ–‡é“¾è¡¨ç›¸å…³çš„é¢˜ç›®ã€çœ‹äº†ä¸€ç¯‡å…³äº Android Studio  çš„æŠ€å·§ç±»æ–‡ç« ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬8å‘¨</title>
    <link href="http://www.istarx.cn/2019/05/26/arts-week-eight/"/>
    <id>http://www.istarx.cn/2019/05/26/arts-week-eight/</id>
    <published>2019-05-26T09:05:21.000Z</published>
    <updated>2019-06-16T07:52:49.391Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æœ¬å‘¨åšçš„å†…å®¹æ¯”è¾ƒå°‘ï¼ŒæŠ˜è…¾äº†ä¸€é“ LRU ç¼“å­˜çš„é¢˜ç›®ï¼Œé¡ºä¾¿å­¦ä¹ äº†ç›¸å…³çš„ LinkedHashMap æ•°æ®ç»“æ„ã€‚é™¤æ­¤ä¹‹å¤–çœ‹äº†ä¸€ç¯‡ RxJava ç³»åˆ—çš„æ–‡ç« ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%B8%80">æ–¹æ³•ä¸€</a></li><li><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C">æ–¹æ³•äºŒ</a></li></ul></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p>Design and implement a data structure for <a href="https://en.wikipedia.org/wiki/Cache_replacement_policies#LRU">Least Recently Used (LRU) cache</a>. It should support the following operations: <code>get</code> and <code>put</code>.</p><p><strong>Example:</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&gt; LRUCache cache = <span class="keyword">new</span> LRUCache( <span class="number">2</span> <span class="comment">/* capacity */</span> );</span><br><span class="line">&gt; </span><br><span class="line">&gt; cache.put(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">&gt; cache.put(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">&gt; cache.get(<span class="number">1</span>);       <span class="comment">// returns 1</span></span><br><span class="line">&gt; cache.put(<span class="number">3</span>, <span class="number">3</span>);    <span class="comment">// evicts key 2</span></span><br><span class="line">&gt; cache.get(<span class="number">2</span>);       <span class="comment">// returns -1 (not found)</span></span><br><span class="line">&gt; cache.put(<span class="number">4</span>, <span class="number">4</span>);    <span class="comment">// evicts key 1</span></span><br><span class="line">&gt; cache.get(<span class="number">1</span>);       <span class="comment">// returns -1 (not found)</span></span><br><span class="line">&gt; cache.get(<span class="number">3</span>);       <span class="comment">// returns 3</span></span><br><span class="line">&gt; cache.get(<span class="number">4</span>);       <span class="comment">// returns 4</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>è®¾è®¡ä¸€ä¸ª LRU ç¼“å­˜ï¼Œå®ç° get ä»¥åŠ put æ–¹æ³•ã€‚</p><h3 id="æ–¹æ³•ä¸€"><a class="anchor" href="#æ–¹æ³•ä¸€"></a> æ–¹æ³•ä¸€</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> mCapacity;</span><br><span class="line">  <span class="keyword">private</span> Map&lt;Integer, Integer&gt; mCache;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.mCapacity = capacity;</span><br><span class="line">    mCache = <span class="keyword">new</span> LinkedHashMap();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mCache.containsKey(key)) &#123;</span><br><span class="line">      <span class="keyword">int</span> newValue = mCache.get(key);</span><br><span class="line">      mCache.remove(key);</span><br><span class="line">      mCache.put(key, newValue);</span><br><span class="line">      <span class="keyword">return</span> newValue;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mCache.containsKey(key)) &#123;</span><br><span class="line">      mCache.remove(key, value);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mCache.size() &gt;= mCapacity) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> k : lru.keySet()) &#123;</span><br><span class="line">        mCache.remove(k);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mCache.put(key, value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ–¹æ³•äºŒ"><a class="anchor" href="#æ–¹æ³•äºŒ"></a> æ–¹æ³•äºŒ</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">class LRUMap&lt;K, V&gt; extends LinkedHashMap&lt;K, V&gt; &#123;</span><br><span class="line">    private int cacheSize ;</span><br><span class="line"></span><br><span class="line">    public LRUMap(int capacity) &#123;</span><br><span class="line">        super(capacity, <span class="number">0.75</span>f, true) ; //access-based eviction set to <span class="string">'true'</span> (<span class="keyword">as</span> opposed to <span class="string">'insertion'</span>-based eviciton)</span><br><span class="line">        cacheSize = capacity ;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">    @Override</span></span><br><span class="line">    protected boolean removeEldestEntry(Map.Entry&lt;K, V&gt; eldest) &#123;</span><br><span class="line">        <span class="keyword">return</span> size() &gt; cacheSize ;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public class LRUCache  &#123;</span><br><span class="line">LRUMap&lt;Integer, Integer&gt; map ; //use extension of LinkedHashMap here</span><br><span class="line">    public LRUCache(int capacity) &#123;</span><br><span class="line">        map = new LRUMap&lt;Integer, Integer&gt;(capacity) ; //make sure to <span class="keyword">pass</span> <span class="string">'capacity'</span> on to LinkedHashMap ctor</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int get(int key) &#123;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(key)) &#123;</span><br><span class="line">            <span class="keyword">return</span> map.get(key) ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void set(int key, int value) &#123;</span><br><span class="line">        map.put(key, value) ; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><ul><li><p>æœ¬å‘¨é˜…è¯»å­¦ä¹  RxJavaç³»åˆ—çš„æ–‡ç« ã€‚ä¸»è¦è®²è¿°äº†åˆ¤æ–­ç±»å‹çš„ä¸€äº›æ“ä½œï¼š</p><ul><li><strong>All</strong>ï¼š åˆ¤æ–­ä¼ é€’çš„æ‰€æœ‰å‚æ•°æ˜¯å¦æ»¡è¶³ä¸€å®šæ¡ä»¶ï¼Œç»“æœæ˜¯ Bool ç±»å‹ï¼Œ ä¼šè¿”å›è¯¥ç»“æœç»™ onNext() æ–¹æ³•ï¼›</li><li><strong>Amb</strong>ï¼šä¼šå¿½ç•¥åå‘äº‹ä»¶çš„ Observable æ‰€æœ‰äº‹ä»¶ä¼ é€’ï¼Œè€Œä¸å¿½ç•¥å…ˆå‘äº‹ä»¶çš„ Observable å¯¹è±¡ï¼›</li><li><strong>Contains</strong>ï¼šåˆ¤æ–­ä¼ é€’çš„æ‰€æœ‰å‚æ•°æ˜¯å¦åŒ…å«æŸä¸€å‚æ•°ï¼Œç»“æœæ˜¯ Bool ç±»å‹ï¼Œ ä¼šè¿”å›è¯¥ç»“æœç»™ onNext() æ–¹æ³•</li><li><strong>DefaultIfEmpty</strong>: å¦‚æœ Observable å¯¹è±¡æ²¡æœ‰ä¼ é€’ä»»ä½•äº‹ä»¶æˆ–è€…æ•°æ®ï¼Œåˆ™ä¼ é€’è¯¥é»˜è®¤æ•°æ®æˆ–äº‹ä»¶ï¼›</li><li><strong>SequenceEqual</strong>ï¼šåˆ¤æ–­ä¸¤ä¸ª Observable å¯¹è±¡ä¼ é€’çš„å‚æ•°æ˜¯å¦å®Œå…¨ä¸€è‡´ï¼›</li><li><strong>SkipUntil</strong>: å¿½ç•¥æŸä¸ª Observable å¯¹è±¡ä¼ é€’çš„æ•°æ®ï¼Œç›´åˆ°å¦å¤–ä¸€ä¸ª Observable å¯¹è±¡å¼€å§‹ä¼ æ•°æ®ï¼›</li><li><strong>SkipWhile</strong>ï¼šå½“æŸæ¡ä»¶ä¸º true æ—¶ä¸€ç›´å¿½ç•¥ä¼ é€’çš„å‚æ•°ï¼Œç›´åˆ°å®ƒä¸º false æ—¶æ‰å¼€å§‹ä¼ é€’ï¼›</li><li><strong>TakeUntil</strong>ï¼šå’Œ skipUtil æ­£å¥½ç›¸åï¼›</li><li><strong>takeWhile</strong>ï¼šå’Œ SkipWhile æ­£å¥½ç›¸åï¼›</li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-conditional-and-boolean-operators-3bca84c773af">Exploring RxJava in Androidâ€Šâ€”â€ŠConditional and Boolean Operators</a></p></li></ul><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><p>actionbar ä¸­è®¾ç½®è‡ªå®šä¹‰viewï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">actionbar.setDisplayShowCustomEnabled(<span class="keyword">true</span>); <span class="comment">// æ˜¾ç¤ºè‡ªå®šä¹‰view</span></span><br><span class="line">actionbar.setDisplayShowTitleEnabled(<span class="keyword">false</span>); <span class="comment">// ä¸æ˜¾ç¤ºåŸtitle</span></span><br><span class="line">actionbar.setCustomView(view);</span><br></pre></td></tr></table></figure></li><li><p>bit.getPixel(x, y) è·å– bitmap ä¸­æŸä¸ªåƒç´ ç‚¹çš„é¢œè‰²ï¼›</p></li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="https://my.oschina.net/crossoverjie/blog/3051516">çº¿ç¨‹æ± æ²¡ä½ æƒ³çš„é‚£ä¹ˆç®€å•</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬å‘¨åšçš„å†…å®¹æ¯”è¾ƒå°‘ï¼ŒæŠ˜è…¾äº†ä¸€é“ LRU ç¼“å­˜çš„é¢˜ç›®ï¼Œé¡ºä¾¿å­¦ä¹ äº†ç›¸å…³çš„ LinkedHashMap æ•°æ®ç»“æ„ã€‚é™¤æ­¤ä¹‹å¤–çœ‹äº†ä¸€ç¯‡ RxJava ç³»åˆ—çš„æ–‡ç« ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬7å‘¨</title>
    <link href="http://www.istarx.cn/2019/05/19/arts-week-seven/"/>
    <id>http://www.istarx.cn/2019/05/19/arts-week-seven/</id>
    <published>2019-05-19T12:50:14.000Z</published>
    <updated>2019-05-26T12:41:37.925Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>å‘¨æœ«æ„Ÿå†’å•Šï¼Œå¤´ç–¼ï¼Œå„ç§ä¸èˆ’æœï¼Œéš¾æœï¼Œé¦™è‡ï¼Œå¤§å®¶åƒä¸‡æ³¨æ„èº«ä½“å•Šã€‚æœ¬å‘¨ç®—æ³•é¢˜ç›®æ˜¯ä¸€ä¸ªæ¶‰åŠæ ˆçš„é¢˜ç›®ï¼Œ Review æ–¹é¢æ¥ç€ä¸Šå‘¨çœ‹äº†ä¸€åŠçš„ RxJava ç³»åˆ—ï¼Œèº«ä½“åŸå› åªçœ‹äº†ä¸€ç¯‡ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p>Given a string containing just the characters <code>'('</code>, <code>')'</code>, <code>'{'</code>, <code>'}'</code>, <code>'['</code> and <code>']'</code>, determine if the input string is valid.</p><p>An input string is valid if:</p><ol><li>Open brackets must be closed by the same type of brackets.</li><li>Open brackets must be closed in the correct order.</li></ol><p>Note that an empty string is also considered valid.</p><p><strong>Example 1:</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> Input: <span class="string">"()"</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Output: <span class="literal">true</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><p>è¿™ä¸ªé¢˜ç›®å’Œç®—æ•°è¿ç®—åº”è¯¥éƒ½æ˜¯å±äºä¸€ä¸ªç³»åˆ—çš„ï¼Œåˆ©ç”¨æ ˆæ¥åˆ¤æ–­æ‹¬å¼§æ˜¯å¦åŒ¹é…ï¼Œè¿›è€Œåˆ¤æ–­ä¼˜å…ˆçº§å¹¶è¿›è¡Œè¿ç®—å¤„ç†ã€‚</p><h3 id="java"><a class="anchor" href="#java"></a> Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">  Map&lt;Character, Character&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  map.put(<span class="string">'('</span>, <span class="string">')'</span>);</span><br><span class="line">  map.put(<span class="string">'['</span>, <span class="string">']'</span>);</span><br><span class="line">  map.put(<span class="string">'&#123;'</span>, <span class="string">'&#125;'</span>);</span><br><span class="line">  Stack&lt;Character&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">char</span> c : s.toCharArray()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (map.containsKey(c)) &#123;</span><br><span class="line">      stack.push(c);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">char</span> temp = stack.pop();</span><br><span class="line">      <span class="keyword">if</span> (c != map.get(temp)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> stack.isEmpty();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="python"><a class="anchor" href="#python"></a> Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isValid</span><span class="params">(self, s: str)</span> -&gt; bool:</span></span><br><span class="line">  dic = &#123;<span class="string">'('</span>: <span class="string">')'</span>, <span class="string">'['</span>: <span class="string">']'</span>, <span class="string">'&#123;'</span>: <span class="string">'&#125;'</span>&#125;</span><br><span class="line">  lst = []</span><br><span class="line">  <span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">    <span class="keyword">if</span> c <span class="keyword">in</span> dic.keys():</span><br><span class="line">      lst.append(c)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">if</span> len(lst) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">      <span class="keyword">if</span> c != dic[lst.pop()]:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br><span class="line">  <span class="keyword">return</span> len(lst) == <span class="number">0</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Runtime</th><th>Memory</th><th>Language</th></tr></thead><tbody><tr><td>28 ms</td><td>13.3 MB</td><td>python</td></tr><tr><td>2 ms</td><td>33.5 MB</td><td>java</td></tr></tbody></table><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨é˜…è¯»å­¦ä¹  RxJavaç³»åˆ—çš„æ–‡ç« ã€‚ä¸»è¦è®²è¿°äº† <code>Observable</code> å…¶å®ƒä½¿ç”¨æ“ä½œï¼š</p><ul><li><strong>Delay</strong>ï¼š å°†æ‰€æœ‰å…ƒç´ çš„æ“ä½œå»¶æ—¶ä¸€å®šæ—¶é—´ï¼›</li><li><strong>Do</strong>ï¼šæ³¨å†Œä¸€ä¸ª Observable å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„ action æ¥æ‰§è¡Œç›¸å…³æ“ä½œ<code>doOnNext</code>ã€<code>doOnCompleted</code>ã€<code>doOnEach</code>ã€<code>doOnSubscribe</code>ï¼›</li><li><strong>Materialize/Dematerialize</strong></li><li><strong>ObserveOn</strong>: æŒ‡å®šåå°çº¿ç¨‹ï¼›</li><li><strong>SubscribeOn</strong>ï¼šå‰å°å›è°ƒçš„çº¿ç¨‹ï¼›</li><li><strong>Timeout</strong>:  åœ¨è¶…å‡ºä¸€å®šæ—¶é—´åè¿˜æ²¡æœ‰ä¼ é€’æ—¶é—´æ—¶ä¼šæœ‰é”™è¯¯äº‹ä»¶ä¼ é€’ï¼Œå³æ‰§è¡ŒonError</li><li><strong>Timestamp</strong>ï¼šå°†ä¼ é€’çš„å…ƒç´ è½¬æ¢æˆ<code>Timestamped&lt;T&gt;</code>ç±»å‹çš„æ•°æ®ï¼Œé‡Œé¢ä¸ä»…åŒ…å«äº†åŸæœ‰çš„æ•°æ®ï¼Œè¿˜åŒ…å«å…ƒç´ ä¼ é€’çš„æ—¶é—´ï¼›</li><li><strong>Using</strong>ï¼šåˆ›å»ºä¸€ä¸ªä¸€æ¬¡æ€§çš„èµ„æºï¼Œæ­¤èµ„æºå’Œ Observable å¯¹è±¡æ‹¥æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸ</li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-utility-operators-a6115024800d">Exploring RxJava in Androidâ€Šâ€”â€ŠUtility Operators</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><p>Android ä¸­è®¡æ—¶æ§ä»¶å¯ä»¥ç”¨ <code>Chronometer</code>ï¼Œå…¶æœ¬è´¨è¿˜æ˜¯ä¸€ä¸ª TextViewã€‚</p></li><li><p>SQL ä¸­çš„<code>LIKE</code>å…³é”®å­—ï¼Œå¯ä»¥æ­é… <code>%</code>æˆ–è€…<code>_</code>ä½¿ç”¨ï¼Œå…¶ä¸­ç™¾åˆ†å·ï¼ˆ%ï¼‰ä»£è¡¨é›¶ä¸ªã€ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—æˆ–å­—ç¬¦ã€‚ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä»£è¡¨ä¸€ä¸ªå•ä¸€çš„æ•°å­—æˆ–å­—ç¬¦ï¼Œä¸¤è€…å¯ä»¥ç»„åˆä½¿ç”¨ã€‚</p></li><li><p>Android ä¸­è·‘ monkey å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell monkey [options] &lt;event-count&gt;</span><br></pre></td></tr></table></figure><p>option å‚æ•°éƒ¨åˆ†å¯ä»¥æŒ‡å®šmonkey çš„åŒ…åï¼Œäº‹ä»¶ç±»å‹åŠæ¯”ä¾‹ç­‰ã€‚</p></li><li><p>æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin https://github.com/user_name/repositories_name.git</span><br></pre></td></tr></table></figure></li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="https://blog.csdn.net/qq_39521554/article/details/80469666">Pythonä¸­stack(),vstack(),hstack()çš„ç”¨æ³•å’ŒåŒºåˆ«</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‘¨æœ«æ„Ÿå†’å•Šï¼Œå¤´ç–¼ï¼Œå„ç§ä¸èˆ’æœï¼Œéš¾æœï¼Œé¦™è‡ï¼Œå¤§å®¶åƒä¸‡æ³¨æ„èº«ä½“å•Šã€‚æœ¬å‘¨ç®—æ³•é¢˜ç›®æ˜¯ä¸€ä¸ªæ¶‰åŠæ ˆçš„é¢˜ç›®ï¼Œ Review æ–¹é¢æ¥ç€ä¸Šå‘¨çœ‹äº†ä¸€åŠçš„ RxJava ç³»åˆ—ï¼Œèº«ä½“åŸå› åªçœ‹äº†ä¸€ç¯‡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬6å‘¨</title>
    <link href="http://www.istarx.cn/2019/05/12/arts-week-six/"/>
    <id>http://www.istarx.cn/2019/05/12/arts-week-six/</id>
    <published>2019-05-12T06:27:45.000Z</published>
    <updated>2019-05-12T08:26:57.295Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>è¿™å‘¨çš„æ‰“å¡å†…å®¹ä¸»è¦æ˜¯ä¸€é“æ•°ç»„æ“ä½œç›¸å…³çš„é¢˜ç›®ï¼Œæ•°æ®åº“æ–¹é¢æ˜¯ä¸€é“ <code>JOIN</code> å’Œ <code>IN</code> å…³é”®å­—ç›¸å…³çš„é¢˜ç›®ï¼Œä»¥åŠ Review ä¸¤ç¯‡ RxJava ä¸­ Observable å¯¹è±¡è¿‡æ»¤åŠç»„åˆç›¸å…³çš„æ–‡ç« ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#database">Database</a></li><li><a href="#review">Review</a><ul><li><a href="#observable%E8%BF%87%E6%BB%A4"><code>Observable</code>è¿‡æ»¤</a></li><li><a href="#obserable%E7%BB%84%E5%90%88"><code>Obserable</code>ç»„åˆ</a></li></ul></li><li><a href="#tips">Tips</a></li><li></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p><a href="https://leetcode.com/problems/max-increase-to-keep-city-skyline/">807. Max Increase to Keep City Skyline</a></p></blockquote><h3 id="java"><a class="anchor" href="#java"></a> Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxIncreaseKeepingSkyline</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (grid == <span class="keyword">null</span> || grid.length == <span class="number">0</span> || grid[<span class="number">0</span>].length == <span class="number">0</span> ||</span><br><span class="line">      grid.length == <span class="number">1</span> &amp;&amp; grid[<span class="number">0</span>].length == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> N = grid.length;</span><br><span class="line">  <span class="keyword">int</span>[] leftRight = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">  <span class="keyword">int</span>[] topBottom = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt; N; j++) &#123;</span><br><span class="line">      leftRight[i] = Math.max(leftRight[i], grid[i][j]);</span><br><span class="line">      topBottom[i] = Math.max(topBottom[i], grid[j][i]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; N; j++) &#123;</span><br><span class="line">      res += Math.min(leftRight[i], topBottom[j]) - grid[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="python"><a class="anchor" href="#python"></a> Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxIncreaseKeepingSkyline</span><span class="params">(self, grid: List[List[int]])</span> -&gt; int:</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> grid <span class="keyword">or</span> len(grid) == <span class="number">0</span> <span class="keyword">or</span> len(grid) ==<span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  N = len(grid)</span><br><span class="line">  row = [<span class="number">-1</span>] * N</span><br><span class="line">  col = [<span class="number">-1</span>] * N</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(N):</span><br><span class="line">      row[i] = max(row[i], grid[i][j])</span><br><span class="line">      col[i] = max(col[i], grid[j][i])</span><br><span class="line">  res = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(N):</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> range(N):</span><br><span class="line">    res = res + min(row[i], col[j]) - grid[i][j]</span><br><span class="line">  <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><table><thead><tr><th>Runtime</th><th>Memory</th><th>Language</th></tr></thead><tbody><tr><td>68 ms</td><td>13.4 MB</td><td>python</td></tr><tr><td>1 ms</td><td>41.7 MB</td><td>java</td></tr></tbody></table><h2 id="database"><a class="anchor" href="#database"></a> Database</h2><blockquote><p><strong>596. Classes More Than 5 Students</strong></p><p>The <code>Employee</code> table holds all employees. Every employee has an Id, a salary, and there is also a column for the department Id.</p><p>The <code>Department</code> table holds all departments of the company.</p><p>Write a SQL query to find employees who have the highest salary in each of the departments. For the above tables, your SQL query should return the following rows (order of rows does not matter)</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    Department.Name <span class="keyword">AS</span> <span class="string">"Department"</span>,</span><br><span class="line">    Employee.Name <span class="keyword">AS</span> <span class="string">"Employee"</span>,</span><br><span class="line">    Employee.Salary</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Employee</span><br><span class="line">    <span class="keyword">JOIN</span></span><br><span class="line">    Department <span class="keyword">ON</span> Department.Id = Employee.DepartmentId</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    (Employee.DepartmentId , Salary) <span class="keyword">IN</span></span><br><span class="line">    (<span class="keyword">SELECT</span> </span><br><span class="line">        DepartmentId , <span class="keyword">Max</span>(Salary)</span><br><span class="line">     <span class="keyword">FROM</span> </span><br><span class="line">        Employee</span><br><span class="line">     <span class="keyword">GROUP</span> <span class="keyword">BY</span> DepartmentId</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>ä¸»è¦ç”¨åˆ°äº†<code>NOT IN</code>å…³é”®å­—ã€‚</p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨æ¥ç€çœ‹äº†RxJavaç³»åˆ—çš„æ–‡ç« ä¸­çš„ç¬¬ä¸‰åŠç¬¬å››ç¯‡ã€‚ä¸»è¦è®²è¿°äº† <code>Observable</code>çš„è¿‡æ»¤å’Œç»„åˆã€‚</p><h3 id="observableè¿‡æ»¤"><a class="anchor" href="#observableè¿‡æ»¤"></a> <code>Observable</code>è¿‡æ»¤</h3><ul><li><strong>Debounce</strong>ï¼š<code>debounce()</code>æ–¹æ³•ä¼šåœ¨è®¾ç½®æ—¶é—´å†…æ²¡æœ‰ä¼ é€’æ•°æ®æˆ–äº‹ä»¶çš„æƒ…å†µä¸‹æ‰ä¼šä¼ é€’æ­¤æ—¶é—´ä¹‹å‰çš„æœ€åä¸€ä¸ªæ•°æ®æˆ–è€…äº‹ä»¶ï¼›</li><li><strong>Distinct()</strong>ï¼šè¿‡æ»¤é‡å¤æ•°æ®æˆ–è€…æ—¶é—´ï¼Œéœ€è¦é‡å†™æ—¶é—´æˆ–è€…æ•°æ®çš„<code>equals</code>æ–¹æ³•ï¼›</li><li><strong>ElementAt</strong>ï¼šä»…ä¼ é€’ä¼ é€’åºåˆ—ä¸­çš„ç¬¬ N ä¸ªæ•°æ®æˆ–è€…å…ƒç´ ï¼›</li><li><strong>Filter</strong>ï¼š å¯¹åŸå§‹ä¼ é€’çš„å…ƒç´ è¿›è¡Œè¿‡æ»¤ï¼Œä»…ä¼ é€’æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼›</li><li><strong>IgnoreElements</strong>ï¼šå¿½ç•¥æ‰€æœ‰å…ƒç´ çš„ä¼ é€’ï¼Œä½†æ˜¯ä¼šåœ¨ä¼ é€’å®Œæˆåä¼šè¿›è¡Œé€šçŸ¥ï¼Œå¦‚æœä¸å…³å¿ƒæ‰€ä¼ é€’çš„å…ƒç´ ï¼Œä»…ä»…åœ¨ä¼ é€’å®Œæˆåè¿›è¡Œé€šçŸ¥ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ­¤æ–¹æ³•ï¼›</li><li><strong>Sample</strong>ï¼šå¯¹ä¼ é€’å…ƒç´ æ¯éš”ä¸€å®šé˜¶æ®µå†ä¼ é€’ä¸€æ¬¡ï¼›</li><li><strong>Skip</strong>ï¼šè·³è¿‡å¼€å§‹çš„ N ä¸ªå…ƒç´ ï¼›</li><li><strong>skipLast</strong>ï¼šè·³è¿‡ç»“å°¾çš„ N ä¸ªå…ƒç´ ï¼›</li><li><strong>Take</strong>ï¼šä»…ä¼ é€’å¼€å§‹çš„ N ä¸ªå…ƒç´ ï¼›</li><li><strong>TakeLast</strong>ï¼šä»…ä¼ é€’æœ€åçš„ N ä¸ªå…ƒç´ ï¼›</li></ul><h3 id="obserableç»„åˆ"><a class="anchor" href="#obserableç»„åˆ"></a> <code>Obserable</code>ç»„åˆ</h3><ul><li><strong>CombineLatest</strong>ï¼šå½“æŸå…ƒç´ è¢«ä¸¤ä¸ª Observable å¯¹è±¡åˆ†åˆ«ä¹‹ä¸€å‘é€æ—¶ï¼Œå¯æ˜¯æŠŠä¸¤ä¸ªObservable å¯¹è±¡è¿›è¡Œç»„åˆï¼Œå¹¶ä¼ é€’ç»è¿‡å¤„ç†ä¹‹åçš„å…ƒç´ ï¼›</li><li><strong>Join</strong>ï¼šå½“ä¸¤ä¸ªå…ƒç´ æœ‰é‡åˆæ—¶ï¼ŒæŠŠæ‰€ä¼ é€’çš„å…ƒç´ ä¸¤ä¸ªå…ƒç´ å½“æˆä¸€å¯¹ç—…ç»è¿‡å¤„ç†å†è¿›è¡Œä¼ é€’ï¼›</li><li><strong>Merge</strong>ï¼šå°†å¤šä¸ª Observable å¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªï¼Œåˆå¹¶ä¹‹åä¼ é€’æ•°æ®æ—¶åŒæ­¥ä¼ è¾“ï¼Œå¹¶éç­‰å¾…å‰é¢çš„ Observable ä¼ é€’å®Œæˆååé¢çš„æ‰å¼€å§‹ä¼ é€’ï¼›</li><li><strong>Concat</strong>ï¼šæŠŠä¸¤ä¸ªæˆ–è€…å¤šä¸ª Observable å¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªï¼Œè€Œéæ’å…¥ï¼Œåˆå¹¶ä¹‹åçš„ Observable æ•°æ®ä¼ é€’æ—¶é¡ºåºä¼ é€’çš„ï¼Œå³ç¬¬ä¸€ä¸ª Observable ä¼ é€’å®Œæ¯•ä¹‹åæ‰ä¼šä¼ é€’ç¬¬äºŒä¸ª Observable å¯¹è±¡çš„æ•°æ®(åŒºåˆ«äº Merge)ï¼›</li><li><strong>Zip</strong>ï¼šå°†å¤šä¸ª Observable å¯¹è±¡çš„ä¼ é€’çš„å…ƒç´ é€šè¿‡ä¸€å®šçš„æ–¹æ³•è¿›è¡Œå¤„ç†ï¼Œå¹¶åªä¼ é€’å¤„ç†ä¹‹åçš„ç»“æœï¼›</li><li><strong>SwitchOnNext</strong>ï¼šåœ¨ç¬¬äºŒä¸ª Observable å¼€å§‹ä¼ é€’ä¹‹å‰ç¬¬ä¸€ä¸ª Observable ä¸€ç›´ä¼šä¼ é€’æ•°æ®ï¼Œå½“ç¬¬äºŒä¸ª Observable å¼€å§‹ä¼ é€’æ•°æ®æ—¶ï¼Œå–æ¶ˆç¬¬ä¸€ä¸ª Observable å¯¹è±¡çš„è®¢é˜…ï¼Œå¹¶åˆ‡æ¢åˆ°è®¢é˜…ç¬¬äºŒä¸ª Observable å¯¹è±¡ï¼›</li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-operators-for-filtering-observables-b0a299ea23a3">Exploring RxJava in Androidâ€Šâ€”â€ŠOperators for Filtering Observables</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><p>python list åˆå§‹åŒ–ï¼š<code>[-1] * N</code></p></li><li><p>adb å‘½ä»¤è·å–logçš„æ—¶å€™æœ‰æ—¶å€™ä¼šå¡ç€ä¸åŠ¨ï¼Œè¿™æ—¶å€™å¯ä»¥è·å–è¯•è¯•ï¼Œå¦‚æœè¿˜ä¸è¡Œçš„è¯ä½¿ç”¨Android Studioè‡ªå¸¦çš„Device Exploeræ‰“å¼€logæ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œåˆ†æ‰¹æ¬¡å–å‡ºlogï¼ŒçŒœæµ‹æ˜¯logæ–‡ä»¶å¤ªå¤§å¯¼è‡´ï¼›</p></li><li><p>imeå‘½ä»¤å¯ä»¥ç»Ÿè®¡cpuå®é™…è¿è¡Œäº†å¤šé•¿æ—¶é—´ï¼Œå‘½ä»¤è¿”å›ä¸‰ä¸ªå€¼ï¼Œreal timeä¹Ÿå°±æ˜¯wall clock timeï¼Œç¬¬äºŒä¸ªæ˜¯user timeï¼Œcpuè¿è¡Œä½ çš„ç¨‹åºï¼Œåœ¨ç”¨æˆ·æ€è¿è¡Œçš„æ—¶é—´ï¼Œç¬¬ä¸‰ä¸ªä¸ªsys timeï¼Œæ˜¯cpuè¿è¡Œç¨‹åºæ—¶å†…æ ¸é‡Œè¿è¡ŒæŒ‡ä»¤çš„æ—¶é—´ï¼Œå®é™…ç¨‹åºè¿è¡Œæ—¶é—´ä¸ºuser time+sys time;</p></li><li><p><code>print(**f**â€xxx {var} yyyâ€)</code>æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²ï¼Œformatæ–¹æ³•å¯ä»¥å¾—åˆ°åŒæ ·çš„ç»“æœï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">name = â€˜cuzâ€™</span><br><span class="line">str_var = â€˜His name <span class="keyword">is</span> &#123;&#125;â€™</span><br><span class="line">str_var.format(name)</span><br><span class="line"><span class="comment"># Output: His name is cuz</span></span><br></pre></td></tr></table></figure></li><li><p>pythonä¸­çš„æœ‰åºå­—å…¸: <code>collections.OrderedDict</code></p></li><li><p>Linux ä¸­ç›®å½•åˆ‡æ¢ï¼špushdã€popd</p></li><li><p>å‚æ•°è§£åŒ…ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> argv</span><br><span class="line">a, b, c = argv <span class="comment"># å‚æ•°è§£åŒ…</span></span><br></pre></td></tr></table></figure></li></ol><h2 id=""><a class="anchor" href="#"></a> </h2><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p>Android OOMæ¡ˆä¾‹åˆ†æï¼š<a href="https://tech.meituan.com/2017/04/14/oom-analysis.html">https://tech.meituan.com/2017/04/14/oom-analysis.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™å‘¨çš„æ‰“å¡å†…å®¹ä¸»è¦æ˜¯ä¸€é“æ•°ç»„æ“ä½œç›¸å…³çš„é¢˜ç›®ï¼Œæ•°æ®åº“æ–¹é¢æ˜¯ä¸€é“ &lt;code&gt;JOIN&lt;/code&gt; å’Œ &lt;code&gt;IN&lt;/code&gt; å…³é”®å­—ç›¸å…³çš„é¢˜ç›®ï¼Œä»¥åŠ Review ä¸¤ç¯‡ RxJava ä¸­ Observable å¯¹è±¡è¿‡æ»¤åŠç»„åˆç›¸å…³çš„æ–‡ç« ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬5å‘¨</title>
    <link href="http://www.istarx.cn/2019/05/03/arts-week-five/"/>
    <id>http://www.istarx.cn/2019/05/03/arts-week-five/</id>
    <published>2019-05-03T05:02:44.000Z</published>
    <updated>2019-05-12T08:19:44.291Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>äº”ä¸€æ”¾å‡æ²¡æœ‰å‡ºé—¨ï¼Œçœ‹ç€å„ç§äººæŒ¤äººï¼Œè½¦æŒ¤è½¦ï¼Œæˆ‘å¿ƒç”šæ…°ğŸ¤£ğŸ¤£ã€‚è¿™å‘¨çš„æ‰“å¡å†…å®¹ä¸»è¦æ˜¯ä¸€é“äºŒå‰æ ‘éå†é¢˜ç›®ï¼Œæ•°æ®åº“æ–¹é¢æ˜¯ä¸€é“<code>NOT IN</code>å…³é”®å­—çš„é¢˜ç›®ï¼Œä»¥åŠ REVIEW ä¸€ç¯‡ RxJava çš„æ–‡ç« ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#database">Database</a></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p>Given a binary tree, return the <em>inorder</em> traversal of its nodesâ€™ values.</p><p><strong>Example:</strong></p><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&gt; Input: [<span class="number">1</span>,<span class="literal">null</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">&gt;    <span class="number">1</span></span><br><span class="line">&gt;     \</span><br><span class="line">&gt;      <span class="number">2</span></span><br><span class="line">&gt;     /</span><br><span class="line">&gt;    <span class="number">3</span></span><br><span class="line">&gt; </span><br><span class="line">&gt; Output: [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>]</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>äºŒå‰æ ‘çš„éå†é—®é¢˜ï¼Œæœ€ç»å…¸çš„æ–¹æ³•å°±æ˜¯é€’å½’äº†ã€‚</p><h3 id="java"><a class="anchor" href="#java"></a> Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (root == <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">  &#125;</span><br><span class="line">  List&lt;Integer&gt; res = <span class="keyword">new</span> ArrayList&lt;&gt;(inorderTraversal(root.left));</span><br><span class="line">  res.add(root.val);</span><br><span class="line">  res.addAll(inorderTraversal(root.right));</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="python"><a class="anchor" href="#python"></a> Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inorderTraversal</span><span class="params">(self, root: TreeNode)</span> -&gt; List[int]:</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">    <span class="keyword">return</span> []</span><br><span class="line">  res = []</span><br><span class="line">  res.extend(self.inorderTraversal(root.left))</span><br><span class="line">  res.append(root.val)</span><br><span class="line">  res.extend(self.inorderTraversal(root.right))</span><br><span class="line">  <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure><table><thead><tr><th>Runtime</th><th>Memory</th><th>Language</th></tr></thead><tbody><tr><td>36 ms</td><td>13.1 MB</td><td>python</td></tr><tr><td>1 ms</td><td>36.1 MB</td><td>java</td></tr></tbody></table><h2 id="database"><a class="anchor" href="#database"></a> Database</h2><blockquote><p><strong>596. Classes More Than 5 Students</strong></p><p>There is a table <code>courses</code> with columns: <strong>student</strong> and <strong>class</strong></p><p>Please list out all classes which have more than or equal to 5 students.</p><p><strong>Note:</strong><br>The students should not be counted duplicate in each course.</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="keyword">class</span></span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    (<span class="keyword">SELECT</span> </span><br><span class="line">    <span class="keyword">class</span>, <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span>(student)) <span class="keyword">AS</span> <span class="keyword">num</span> </span><br><span class="line">    <span class="keyword">FROM</span> courses</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">class</span>) <span class="keyword">AS</span> tmp</span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    <span class="keyword">num</span> &gt;= <span class="number">5</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦ç”¨åˆ°äº†<code>NOT IN</code>å…³é”®å­—ã€‚</p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨æ¥ç€çœ‹äº†RxJavaç³»åˆ—çš„æ–‡ç« ä¸­çš„ç¬¬äºŒç¯‡ã€‚ä¸»è¦è®²è¿°äº† <code>Observable</code>ä¼ é€’è¿‡ç¨‹ä¸­çš„ç›¸å…³æ“ä½œï¼š</p><ul><li><strong>Buffer</strong>ï¼šObservable.buffer(int num)æ–¹æ³•ï¼Œä¼šå‘¨æœŸæ€§çš„ä» Obserable ä¸­å–å‡º num ä¸ªæ•°çš„æ•°æ®æˆ–è€…äº‹ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªçš„ä¼ é€’ï¼›</li><li><strong>Map</strong>ï¼šè¯¥æ–¹æ³•æ˜¯å¯¹æ¯ä¸€ä¸ªä¼ é€’çš„æ•°æ®æˆ–è€…äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œæ¯•ä¹‹åå†è¿›è¡Œå‘ä¸‹ä¼ é€’ï¼›</li><li><strong>FlatMap</strong>ï¼šè¯¥æ–¹æ³•è¿”å›çš„è¿˜æ˜¯ä¸€ä¸ª Observable å¯¹è±¡ï¼Œæ˜¯å¯¹åŸæ¥ä¼ é€’çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè¿”å›ä¸€ä¸ªå¯¹åº”çš„ Observable å¯¹è±¡(ä¸»è¦ç”¨äºå¯¹å…ƒç´ é¡ºåºä¸å…³æ³¨çš„æƒ…å†µ)ï¼›</li><li><strong>SwitchMap</strong>ï¼š è¿”å›åŸå§‹ Observable å¯¹è±¡ä¼ é€’æ•°æ®ä¸­æœ€åçš„ä¸€é¡¹ ï¼›</li><li><strong>ConcatMap</strong>ï¼šå’Œ flatMap æœ‰ç‚¹ç±»ä¼¼ï¼›</li><li><strong>GroupBy</strong>ï¼šå°†åŸå§‹ Observable å¯¹è±¡ä¼ é€’çš„æ•°æ®æŒ‰æŸä¸€ key è¿›è¡Œåˆ†ç±»ï¼Œå°†åˆ†ç±»ä¹‹åçš„æ•°æ®è¿›è¡Œä¼ é€’(applyæ–¹æ³•è¿”å›ä¸º <code>true</code> çš„æ—¶å€™è¯¥æ•°æ®æˆ–äº‹ä»¶æ‰ä¼šè¿›è¡Œä¼ é€’)ï¼›</li><li><strong>Scan</strong>ï¼šå¯¹ä¼ é€’çš„å‚æ•°è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯è¯¥å‚æ•°ä¸ä»…ä»…æŒ‡å½“å‰ä¼ é€’çš„ï¼Œè¿˜åŒ…æ‹¬ä»¥å‰ä¼ é€’çš„ã€‚</li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-operators-for-transforming-observables-367c22d86677">Exploring RxJava in Androidâ€Šâ€”â€ŠOperators for Transforming Observables</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><p>pythonä¸­ç»™listä¸€æ¬¡æ·»åŠ å¤šä¸ªå…ƒç´ æ—¶ä½¿ç”¨æ–¹æ³•<code>extend()</code></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">list1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">list2 = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">list1.extend(list2)</span><br><span class="line"><span class="comment"># list1 is [1,2,3,2,3,4]</span></span><br></pre></td></tr></table></figure></li><li><p>pythonä¸­è¯»å–ä¸€ä¸ªæ–‡ä»¶çš„æ‰€æœ‰å†…å®¹é™¤äº†<code>file.readlines()</code>æ–¹æ³•ï¼Œè¿˜å¯ä»¥ä½¿ç”¨<code>file.read()</code>æ–¹æ³•ï¼›</p></li><li><p>NinePatchDrawable åœ¨ç»™ background è®¾ç½® bounds ä¹‹åï¼Œä¸‹æ¬¡ draw æ—¶ bottom ä¼šå˜å°ï¼Œå¯¼è‡´çœ‹èµ·æ¥ä¼šé—ªä¸€ä¸‹ï¼Œç›®å‰æƒ³åˆ°çš„è§£å†³åŠæ³•å°±æ˜¯åœ¨åŸæ¥èƒŒæ™¯çš„åŸºç¡€ä¸Šé€šè¿‡è®¾ç½®ç€è‰²è¾¾åˆ°æ”¹å˜èƒŒæ™¯çš„ç›®çš„ã€‚</p></li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p>python å†…å®¹è¾ƒå¤šçš„æ–‡ä»¶å†…å®¹è¯»å–æ–¹å¼æ¯”è¾ƒï¼š<a href="https://www.cnblogs.com/6tian/p/5886284.html">https://www.cnblogs.com/6tian/p/5886284.html</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;äº”ä¸€æ”¾å‡æ²¡æœ‰å‡ºé—¨ï¼Œçœ‹ç€å„ç§äººæŒ¤äººï¼Œè½¦æŒ¤è½¦ï¼Œæˆ‘å¿ƒç”šæ…°ğŸ¤£ğŸ¤£ã€‚è¿™å‘¨çš„æ‰“å¡å†…å®¹ä¸»è¦æ˜¯ä¸€é“äºŒå‰æ ‘éå†é¢˜ç›®ï¼Œæ•°æ®åº“æ–¹é¢æ˜¯ä¸€é“&lt;code&gt;NOT IN&lt;/code&gt;å…³é”®å­—çš„é¢˜ç›®ï¼Œä»¥åŠ REVIEW ä¸€ç¯‡ RxJava çš„æ–‡ç« ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬4å‘¨</title>
    <link href="http://www.istarx.cn/2019/04/27/arts-week-four/"/>
    <id>http://www.istarx.cn/2019/04/27/arts-week-four/</id>
    <published>2019-04-27T11:35:01.000Z</published>
    <updated>2019-05-03T05:00:32.759Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>é©¬ä¸Šäº”ä¸€æ”¾å‡äº†ï½ä½†æ˜¯ï¼Œä½†æ˜¯ï¼ï¼ï¼ä½†æ˜¯äº”ä¸€è¦åŠ ç­ï¼Œå‘œå‘¼å“€å“‰ã€‚ã€‚ã€‚è¿™å‘¨çš„æ‰“å¡ä¸»è¦æ˜¯ä¸€é“å›æ–‡æ•°åˆ¤æ–­çš„é¢˜ç›®ï¼Œæ•°æ®åº“æ–¹é¢æ˜¯ä¸€é“<code>NOT IN</code>å…³é”®å­—çš„é¢˜ç›®ï¼Œä»¥åŠ REVIEW ä¸€ç¯‡ RxJava çš„æ–‡ç« ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#database">Database</a></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p>Determine whether an integer is a palindrome. An integer is a palindrome when it reads the same backward as forward.</p><p><strong>Example 1:</strong></p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> Input: 121</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Output: <span class="literal">true</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><blockquote><p><strong>Follow up:</strong></p><p>Coud you solve it without converting the integer to a string?</p></blockquote><p>å›æ–‡æ•°åˆ¤æ–­ï¼Œä¸€ç§æ–¹æ³•æ˜¯æŠŠæ•´æ•°è½¬æ¢æˆå­—ç¬¦ä¸²ï¼Œåˆ¤æ–­æ­£åå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒï¼Œä½†æ˜¯é¢˜ç›®ä¸­è¦æ±‚ä¸èƒ½ä½¿ç”¨å­—ç¬¦ä¸²ã€‚ç¬¬äºŒç§å°±æ˜¯æŠŠæ•´æ•°åè½¬ï¼Œå¯ä»¥æ•´è½¬æˆ–è€…åŠè½¬ï¼ŒåŠè½¬çš„æ•ˆç‡ç›¸å¯¹è¾ƒé«˜ï¼Œæ‰€ä»¥é‡‡ç”¨åŠè½¬çš„æ–¹æ³•ã€‚</p><h3 id="java"><a class="anchor" href="#java"></a> Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isPalindrome</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (x &lt; <span class="number">0</span> || (x % <span class="number">10</span> == <span class="number">0</span> &amp;&amp; x != <span class="number">0</span>)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">long</span> reverseNumber = <span class="number">0</span>;</span><br><span class="line">  reverseNumber = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (reverseNumber &lt; x) &#123;</span><br><span class="line">    reverseNumber = reverseNumber * <span class="number">10</span> + x % <span class="number">10</span>;</span><br><span class="line">    x = x / <span class="number">10</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> x == reverseNumber || x == reverseNumber / <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="python"><a class="anchor" href="#python"></a> Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isPalindrome</span><span class="params">(self, x: int)</span> -&gt; bool:</span></span><br><span class="line">  <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">or</span> x % <span class="number">10</span> == <span class="number">0</span> <span class="keyword">and</span> x != <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">False</span>;</span><br><span class="line">  reverseNumber = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">while</span> (reverseNumber &lt; x):</span><br><span class="line">    reverseNumber = reverseNumber * <span class="number">10</span> + x % <span class="number">10</span></span><br><span class="line">    x = x // <span class="number">10</span></span><br><span class="line">    <span class="keyword">return</span> x == reverseNumber <span class="keyword">or</span> x == reverseNumber // <span class="number">10</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Runtime</th><th>Memory</th><th>Language</th></tr></thead><tbody><tr><td>84 ms</td><td>13.2 MB</td><td>python</td></tr><tr><td>6 ms</td><td>34.5 MB</td><td>java</td></tr></tbody></table><h2 id="database"><a class="anchor" href="#database"></a> Database</h2><blockquote><p><strong>183. Customers Who Never Order</strong></p><p>Suppose that a website contains two tables, the <code>Customers</code> table and the <code>Orders</code> table. Write a SQL query to find all customers who never order anything.</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Customers.Name <span class="keyword">AS</span> Customers</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    Customers.Id <span class="keyword">NOT</span> <span class="keyword">IN</span> </span><br><span class="line">        (<span class="keyword">SELECT</span> Orders.CustomerId <span class="keyword">FROM</span> Orders)</span><br></pre></td></tr></table></figure><p>ä¸»è¦ç”¨åˆ°äº†<code>NOT IN</code>å…³é”®å­—ã€‚</p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨ç”±äºå·¥ä½œæ¯”è¾ƒå¿™ï¼Œæ‰€ä»¥åªçœ‹äº†RxJavaç³»åˆ—çš„æ–‡ç« ä¸­çš„ç¬¬ä¸€ç¯‡ã€‚ä¸»è¦è®²è¿°äº† <code>Observable</code> ä»¥åŠå…¶åŸºæœ¬æ“ä½œï¼š</p><ul><li><p><strong>Create</strong>ï¼šObservable.create()æ–¹æ³•ï¼Œä¼ å…¥ObservableOnSubscribeå¯¹è±¡ï¼Œéœ€è¦å®ç°æ­¤å¯¹è±¡çš„<code>subscribe</code>æ–¹æ³•ï¼›</p></li><li><p><strong>Defer</strong>ï¼šå’Œ Create ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºä¸æ˜¯æ¯æ¬¡éƒ½åˆ›å»ºæ–°çš„ Observable å¯¹è±¡ï¼Œæ•ˆç‡æ›´é«˜ï¼›</p></li><li><p><strong>From</strong>ï¼šä»ä¸€ä¸ªæ•°ç»„æˆ–è€…è¿­ä»£å™¨åˆ›å»º Observable å¯¹è±¡ï¼ŒåŒ…æ‹¬<code>fromCallable(), fromFuture(), fromIterable(), fromPublisher(), fromArray()</code></p></li><li><p><strong>Interval</strong>ï¼š åˆ›å»ºæ¯éš”ä¸€å®šæ—¶é—´æäº¤æ—¶é—´çš„ Observable å¯¹è±¡ï¼›</p></li><li><p><strong>Just</strong>ï¼šä¼ å…¥ä¸€ç³»åˆ—çš„å‚æ•°(æœ€å¤š10ä¸ª)ï¼Œæ‰€åˆ›å»ºçš„ Observable å¯¹è±¡ä¾æ¬¡æŠŠè¿™äº›å‚æ•°è½¬æ¢æˆ Observable å…ƒç´ å¹¶è¿›è¡Œäº‹ä»¶å‘é€ã€‚</p><div class="alert info"><p>from å’Œ just çš„åŒºåˆ«åœ¨äº just ä¸€æ¬¡æŠŠæ‰€æœ‰çš„å…ƒç´ å‘å¸ƒå‡ºæ¥ï¼Œä½†æ˜¯ from åˆ™æ˜¯æŠŠå…ƒç´ ä¾æ¬¡å‘å¸ƒå‡ºæ¥</p></div></li><li><p><strong>Range</strong>ï¼šä¼ å…¥ä¸¤ä¸ªå‚æ•°åˆ†åˆ«åœ¨èµ·å§‹å€¼å’Œé•¿åº¦ï¼Œåˆ™ä¼šå‘å¸ƒå¯¹åº”çš„å…ƒç´ åºåˆ—ï¼›</p></li><li><p><strong>Repeat</strong>ï¼šå‘å¸ƒæ—¶é—´çš„é‡å¤æ¬¡æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Observable.range(<span class="number">2</span>, <span class="number">5</span>)</span><br><span class="line">          .repeat(<span class="number">2</span>) <span class="comment">//ä¸Šé¢çš„åºåˆ—è¿ç»­å‘å¸ƒä¸¤æ¬¡</span></span><br></pre></td></tr></table></figure></li><li><p><strong>Timer</strong>ï¼šåˆ›å»ºä¸€ä¸ª Observable å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨ç‰¹å®šæ—¶é—´ä¹‹åå‘å¸ƒä¸€ä¸ªäº‹ä»¶ï¼›</p><div class="alert info"><p>interval å’Œ timer çš„åŒºåˆ«åœ¨äº time ä»…ä»…åªå‘é€ä¸€æ¬¡äº‹ä»¶ï¼Œä½†æ˜¯ interval åˆ™æ˜¯æ¯éš”ä¸€å®šæ—¶é—´ä¼šå‘å¸ƒäº‹ä»¶ï¼›</p></div></li></ul><p><a href="https://proandroiddev.com/exploring-rxjava-in-android-e52ed7ef32e2">Exploring RxJava in Androidâ€Šâ€”â€ŠIntroduction</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li><p>æœ¬åœ°å’Œè¿œç¨‹ä»“åº“å…³è”ï¼šgit branch --set-upstream-to &lt;æœ¬åœ°åˆ†æ”¯&gt; origin/&lt;è¿œç¨‹åˆ†æ”¯&gt;ï¼›</p></li><li><p>æœ¬åœ°ä»“åº“å…³è”è¿œç¨‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git remote add origin https://github.com/user_name/repositories_name.git</span><br></pre></td></tr></table></figure></li><li><p>å»ºç«‹ç´¢å¼•:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> index_name <span class="keyword">on</span> table_name</span><br></pre></td></tr></table></figure></li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p>ä¸€ç¯‡ Android å†…å­˜ä¼˜åŒ–ç›¸å…³çš„æ–‡ç« ï¼š<a href="https://mp.weixin.qq.com/s/2MsEAR9pQfMr1Sfs7cPdWQ">Android å†…å­˜ä¼˜åŒ–æ€»ç»“&amp;å®è·µ</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é©¬ä¸Šäº”ä¸€æ”¾å‡äº†ï½ä½†æ˜¯ï¼Œä½†æ˜¯ï¼ï¼ï¼ä½†æ˜¯äº”ä¸€è¦åŠ ç­ï¼Œå‘œå‘¼å“€å“‰ã€‚ã€‚ã€‚è¿™å‘¨çš„æ‰“å¡ä¸»è¦æ˜¯ä¸€é“å›æ–‡æ•°åˆ¤æ–­çš„é¢˜ç›®ï¼Œæ•°æ®åº“æ–¹é¢æ˜¯ä¸€é“&lt;code&gt;NOT IN&lt;/code&gt;å…³é”®å­—çš„é¢˜ç›®ï¼Œä»¥åŠ REVIEW ä¸€ç¯‡ RxJava çš„æ–‡ç« ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬3å‘¨</title>
    <link href="http://www.istarx.cn/2019/04/21/arts-week-three/"/>
    <id>http://www.istarx.cn/2019/04/21/arts-week-three/</id>
    <published>2019-04-21T14:00:11.000Z</published>
    <updated>2019-04-21T14:52:25.571Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æœ¬å‘¨ä¸»è¦æ˜¯åšäº†ä¸€é“å…³äºé“¾è¡¨ç›¸å…³æ“ä½œçš„ç®—æ³•é¢˜ç›®ï¼Œæ•°æ®åº“æŸ¥è¯¢çš„é¢˜ç›®ï¼Œé˜…è¯»äº†ä¸€ç¯‡å…³äº UI è‡ªåŠ¨åŒ–æµ‹è¯•ç›¸å…³çš„è‹±æ–‡æ–‡ç« ï¼Œä»”ç»†å­¦ä¹ äº†ä¸‹ ConstraintLayout ç›¸å…³çš„èµ„æ–™ï¼ŒåæœŸè¦ä»”ç»†æ€»ç»“ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0">é¢˜ç›®æè¿°</a></li><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#database">Database</a></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="é¢˜ç›®æè¿°"><a class="anchor" href="#é¢˜ç›®æè¿°"></a> é¢˜ç›®æè¿°</h3><blockquote><p>You are given two <strong>non-empty</strong> linked lists representing two non-negative integers. The digits are stored in <strong>reverse order</strong> and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p><p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p><p><strong>Example:</strong></p><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&gt; Input: (<span class="number">2</span> -&gt; <span class="number">4</span> -&gt; <span class="number">3</span>) + (<span class="number">5</span> -&gt; <span class="number">6</span> -&gt; <span class="number">4</span>)</span><br><span class="line">&gt; Output: <span class="number">7</span> -&gt; <span class="number">0</span> -&gt; <span class="number">8</span></span><br><span class="line">&gt; Explanation: <span class="number">342</span> + <span class="number">465</span> = <span class="number">807.</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><p>é¢˜ç›®ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯ç®€å•çš„é“¾è¡¨æ“ä½œã€‚</p><h3 id="java"><a class="anchor" href="#java"></a> Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l1 == <span class="keyword">null</span> || l2 == <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> l1 == <span class="keyword">null</span> ? l2 == <span class="keyword">null</span> ? <span class="keyword">null</span> : l2 : l1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> upNum = <span class="number">0</span>;</span><br><span class="line">    ListNode current = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">    ListNode res = current;</span><br><span class="line">    <span class="keyword">while</span> (l1 != <span class="keyword">null</span> || l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">if</span> (l1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            tmp += l1.val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            tmp += l2.val;</span><br><span class="line">        &#125;</span><br><span class="line">        tmp += upNum;</span><br><span class="line">        ListNode tmpNode= <span class="keyword">new</span> ListNode(tmp % <span class="number">10</span>);</span><br><span class="line">        current.next = tmpNode;</span><br><span class="line">        current = tmpNode;</span><br><span class="line">        upNum = tmp / <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">if</span> (l1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            l1 = l1.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (l2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (upNum != <span class="number">0</span>) &#123;</span><br><span class="line">        current.next = <span class="keyword">new</span> ListNode(upNum);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res.next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="python"><a class="anchor" href="#python"></a> Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addTwoNumbers</span><span class="params">(self, l1: ListNode, l2: ListNode)</span> -&gt; ListNode:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> l1 <span class="keyword">or</span> <span class="keyword">not</span> l2:</span><br><span class="line">        <span class="keyword">if</span> l1:</span><br><span class="line">            <span class="keyword">return</span> l1</span><br><span class="line">        <span class="keyword">elif</span> l2:</span><br><span class="line">            <span class="keyword">return</span> l2</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">    current = ListNode(<span class="number">0</span>)</span><br><span class="line">    res = current</span><br><span class="line">    upNum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> l1 <span class="keyword">or</span> l2:</span><br><span class="line">        tmp = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> l1:</span><br><span class="line">            tmp = tmp + l1.val</span><br><span class="line">        <span class="keyword">if</span> l2:</span><br><span class="line">            tmp = tmp + l2.val</span><br><span class="line">        tmp = tmp + upNum</span><br><span class="line">        upNum = tmp // <span class="number">10</span></span><br><span class="line">        tmpNode = ListNode(tmp % <span class="number">10</span>)</span><br><span class="line">        current.next = tmpNode</span><br><span class="line">        current = tmpNode</span><br><span class="line">        <span class="keyword">if</span> l1:</span><br><span class="line">            l1 = l1.next</span><br><span class="line">        <span class="keyword">if</span> l2:</span><br><span class="line">            l2 = l2.next</span><br><span class="line">    <span class="keyword">if</span> upNum != <span class="number">0</span>:</span><br><span class="line">        current.next = ListNode(upNum)</span><br><span class="line">    <span class="keyword">return</span> res.next</span><br></pre></td></tr></table></figure><table><thead><tr><th>Runtime</th><th>Memory</th><th>Language</th></tr></thead><tbody><tr><td>96ms</td><td>13.4 MB</td><td>python</td></tr><tr><td>2ms</td><td>45.1 MB</td><td>java</td></tr></tbody></table><h2 id="database"><a class="anchor" href="#database"></a> Database</h2><blockquote><p><strong>181. Employees Earning More Than Their Managers</strong></p><p>The <code>Employee</code> table holds all employees including their managers. Every employee has an Id, and there is also a column for the manager Id.</p><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">&gt; +----+-------+--------+-----------+</span><br><span class="line">&gt; |<span class="string"> Id </span>|<span class="string"> Name  </span>|<span class="string"> Salary </span>|<span class="string"> ManagerId </span>|</span><br><span class="line">&gt; +----+-------+--------+-----------+</span><br><span class="line">&gt; |<span class="string"> 1  </span>|<span class="string"> Joe   </span>|<span class="string"> 70000  </span>|<span class="string"> 3         </span>|</span><br><span class="line">&gt; |<span class="string"> 2  </span>|<span class="string"> Henry </span>|<span class="string"> 80000  </span>|<span class="string"> 4         </span>|</span><br><span class="line">&gt; |<span class="string"> 3  </span>|<span class="string"> Sam   </span>|<span class="string"> 60000  </span>|<span class="string"> NULL      </span>|</span><br><span class="line">&gt; |<span class="string"> 4  </span>|<span class="string"> Max   </span>|<span class="string"> 90000  </span>|<span class="string"> NULL      </span>|</span><br><span class="line">&gt; +----+-------+--------+-----------+</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>Given the <code>Employee</code> table, write a SQL query that finds out employees who earn more than their managers. For the above table, Joe is the only employee who earns more than his manager.</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> +----------+</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> | Employee |</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> +----------+</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> | Joe      |</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> +----------+</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    a.Name <span class="keyword">AS</span> Employee</span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    Employee <span class="keyword">AS</span> a,</span><br><span class="line">    Employee <span class="keyword">AS</span> b</span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    a.ManagerId = b.Id <span class="keyword">AND</span> a.Salary &gt; b.Salary</span><br></pre></td></tr></table></figure><p>ç”¨åˆ°çš„æ–¹æ³•å°±æ˜¯æ˜¯æŠŠè¡¨æŸ¥è¯¢ä¸¤éï¼Œé€šè¿‡å¯¹æ¯”ä¸¤ä¸ªè¡¨çš„æ•°æ®æ¥ç¡®å®šæœ€åçš„ç»“æœã€‚</p><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨ä¸»è¦å­¦ä¹ äº†å’Œ UI æµ‹è¯•ç›¸å…³çš„æ–‡ç« ï¼Œæ–‡ç« ä¸­ç”¨åˆ°äº† Espressã€Mock æ¡†æ¶ï¼Œå¯¹å¼‚æ­¥åˆ·æ–° UI æ•°æ®çš„æƒ…å†µè¿›è¡Œäº†æµ‹è¯•æ–¹æ³•çš„ä»‹ç»ã€‚</p><p><a href="https://medium.com/@timstreet_52329/espresso-ui-testing-in-android-a-unit-testing-approach-b785b2a46411">Espresso UI Testing With Android Architecture Components</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ol><li>python å–ä½™<code>%</code>ï¼Œè¿™ä¸€ç‚¹å’Œjavaä¸€æ ·ï¼Œå–æ•´æ•°<code>\\</code>,å’Œjavaæœ‰æ‰€å·®å¼‚ã€‚</li><li>è°·æ­Œæä¾›çš„æ–°çš„å¸ƒå±€<code>ConstraintLayout</code>ï¼Œè™½ç„¶å¯ä»¥å‡å°‘å¸ƒå±€å±‚æ¬¡ï¼Œä½†æ˜¯è¿™ä¸ªæ–°å¸ƒå±€measureè¿‡ç¨‹ç›¸å¯¹ä¼ ç»Ÿå¸ƒå±€æ¥è¯´è¾ƒé•¿ï¼Œå°¤å…¶æ˜¯è¯¥å¸ƒå±€ç”¨åœ¨ListItemçš„è‡ªå®šä¹‰ View æ—¶ï¼Œå¯åŠ¨é€Ÿåº¦ä¼šè¾ƒæ…¢ã€‚</li></ol><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p>ä¸€ç¯‡çº¦æŸå¸ƒå±€ç›¸å…³çš„æ–‡ç« ï¼š<a href="https://blog.csdn.net/guolin_blog/article/details/53122387">https://blog.csdn.net/guolin_blog/article/details/53122387</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬å‘¨ä¸»è¦æ˜¯åšäº†ä¸€é“å…³äºé“¾è¡¨ç›¸å…³æ“ä½œçš„ç®—æ³•é¢˜ç›®ï¼Œæ•°æ®åº“æŸ¥è¯¢çš„é¢˜ç›®ï¼Œé˜…è¯»äº†ä¸€ç¯‡å…³äº UI è‡ªåŠ¨åŒ–æµ‹è¯•ç›¸å…³çš„è‹±æ–‡æ–‡ç« ï¼Œä»”ç»†å­¦ä¹ äº†ä¸‹ ConstraintLayout ç›¸å…³çš„èµ„æ–™ï¼ŒåæœŸè¦ä»”ç»†æ€»ç»“ä¸€ä¸‹ç›¸å…³çš„çŸ¥è¯†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬2å‘¨</title>
    <link href="http://www.istarx.cn/2019/04/14/arts-week-two/"/>
    <id>http://www.istarx.cn/2019/04/14/arts-week-two/</id>
    <published>2019-04-14T10:16:11.000Z</published>
    <updated>2019-04-14T10:52:15.062Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æ¸…æ˜æ”¾å‡å‡ºå»æ—…æ¸¸ï¼Œæ²¡æœ‰æ‰“å¡ï¼Œè¿™æ¬¡æ—¶è¡¥ä¸Šå‘¨çš„æ‰“å¡ã€‚æœ¬å‘¨ä¸»è¦å¯¹Leetcode ç½‘ç«™ä¸Šåšäº†ä¸€é“ç®—æ³•é¢˜åŠä¸€é“æ•°æ®ç»“æ„é¢˜ï¼Œç®—æ³•æ¶‰åŠåˆ°äº†åŠ¨æ€è§„åˆ’ï¼Œæ•°æ®ç»“æ„æ¶‰åŠåˆ°äº†Limitçš„ç”¨æ³•ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E6%8F%8F%E8%BF%B0">æè¿°</a></li><li><a href="#%E5%88%86%E6%9E%90">åˆ†æ</a></li><li><a href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%96%B9%E6%B3%95%E4%BB%A3%E7%A0%81">åŠ¨æ€è§„åˆ’æ–¹æ³•ä»£ç </a><ul><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li></ul></li><li><a href="#database">DataBase</a></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="æè¿°"><a class="anchor" href="#æè¿°"></a> æè¿°</h3><blockquote><p>Given a string <strong>s</strong>, find the longest palindromic substring in <strong>s</strong>. You may assume that the maximum length of <strong>s</strong> is 1000.</p><p><strong>Example 1:</strong></p><p><strong>Input</strong>: â€œbabadâ€<br><strong>Output</strong>: â€œbabâ€<br><strong>Note</strong>: â€œabaâ€ is also a valid answer.</p><p><strong>Example 2:</strong></p><p><strong>Input</strong>: â€œcbbdâ€<br><strong>Output</strong>: â€œbbâ€</p></blockquote><p>å¤§è‡´æ„æ€å°±æ˜¯ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚å…¶æœ€å¤§çš„å›æ–‡å­—ç¬¦ä¸²ï¼Œæ‰€è°“å›æ–‡å­—ç¬¦ä¸²ï¼Œç®€å•æ¥è®²å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ­£ç€è¯»å’Œå€’ç€è¯»è¯—ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯ä»¥ä¸­å¿ƒç‚¹å¯¹ç§°çš„ã€‚</p><h3 id="åˆ†æ"><a class="anchor" href="#åˆ†æ"></a> åˆ†æ</h3><p>é¢˜ç›®è§£å†³æ–¹æ³•æœ‰å¥½å‡ ç§ï¼Œæ¯”å¦‚</p><ul><li><p>æš´åŠ›è§£æ³•ï¼šå¾ªç¯å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦ï¼Œä»¥è¯¥å­—ç¬¦èµ·ç‚¹åˆ†åˆ«å‘å·¦å³ä¸¤ä¾§å­—ç¬¦è¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°é‡åˆ°ä¸¤ä¾§æœ‰ä¸ç›¸åŒçš„å­—ç¬¦ä¸ºæ­¢ã€‚è¿™ç§æ–¹æ³•éœ€è¦æ³¨æ„å¶æ•°å¯¹ç§°å’Œå¥‡æ•°å¯¹ç§°çš„å·®å¼‚åŒ–å¤„ç†ã€‚</p></li><li><p>æœ€é•¿å…¬å…±å­ä¸²ï¼šæŠŠç»™å®šçš„å­—ç¬¦ä¼ åè½¬å¾—åˆ°æ–°çš„å­—ç¬¦ä¼ ï¼Œæ±‚ä¸¤ä¸ªå­—ç¬¦ä¸²æœ€å¤§çš„å…¬å…±å­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µä¸‹æœ‰äº›è§£æ˜¯é”™è¯¯çš„ã€‚</p></li><li><p>åŠ¨æ€è§„åˆ’ï¼š</p><p>å®šä¹‰</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mtext>Â </mtext><mi>j</mi><mo>)</mo><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo separator="true">,</mo><mtext>Â </mtext><mi mathvariant="normal">ä¸‹</mi><mi mathvariant="normal">æ ‡</mi><mi mathvariant="normal">ä»</mi><mi>i</mi><mi mathvariant="normal">åˆ°</mi><mi>j</mi><mi mathvariant="normal">çš„</mi><mi mathvariant="normal">å­</mi><mi mathvariant="normal">ä¸²</mi><mi mathvariant="normal">æ˜¯</mi><mi mathvariant="normal">å›</mi><mi mathvariant="normal">æ–‡</mi><mi mathvariant="normal">å­</mi><mi mathvariant="normal">ä¸²</mi></mrow><annotation encoding="application/x-tex">P(i,\ j)=true, \ ä¸‹æ ‡ä» i åˆ° j çš„å­ä¸²æ˜¯å›æ–‡å­ä¸²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord cjk_fallback">ä¸‹</span><span class="mord cjk_fallback">æ ‡</span><span class="mord cjk_fallback">ä»</span><span class="mord mathdefault">i</span><span class="mord cjk_fallback">åˆ°</span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mord cjk_fallback">çš„</span><span class="mord cjk_fallback">å­</span><span class="mord cjk_fallback">ä¸²</span><span class="mord cjk_fallback">æ˜¯</span><span class="mord cjk_fallback">å›</span><span class="mord cjk_fallback">æ–‡</span><span class="mord cjk_fallback">å­</span><span class="mord cjk_fallback">ä¸²</span></span></span></span></span></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mtext>Â </mtext><mi>j</mi><mo>)</mo><mo>=</mo><mi>f</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>e</mi><mo separator="true">,</mo><mtext>Â </mtext><mi mathvariant="normal">å…¶</mi><mi mathvariant="normal">å®ƒ</mi><mi mathvariant="normal">æƒ…</mi><mi mathvariant="normal">å†µ</mi></mrow><annotation encoding="application/x-tex">P(i,\ j)=false,\ å…¶å®ƒæƒ…å†µ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord cjk_fallback">å…¶</span><span class="mord cjk_fallback">å®ƒ</span><span class="mord cjk_fallback">æƒ…</span><span class="mord cjk_fallback">å†µ</span></span></span></span></span></p><p>å› æ­¤</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo><mo>=</mo><mi>P</mi><mo>(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo>âˆ’</mo><mn>1</mn><mo>)</mo><mtext>Â Â </mtext><mi>a</mi><mi>n</mi><mi>d</mi><mtext>Â Â </mtext><mi>S</mi><mtext>Â </mtext><mi>i</mi><mtext>Â </mtext><mo>=</mo><mo>=</mo><mi>S</mi><mtext>Â </mtext><mi>j</mi><mtext>Â </mtext></mrow><annotation encoding="application/x-tex">P(i, j) = P(i + 1, j - 1) \ \ and \ \ S~i~ == S~j~</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">d</span><span class="mspace">Â </span><span class="mspace">Â </span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace nobreak">Â </span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace nobreak">Â </span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace nobreak">Â </span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mspace nobreak">Â </span></span></span></span></span></p><p>æ‰€ä»¥é€’æ¨å…¬å¼ä¸ºï¼š</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mtext>Â </mtext><mi>i</mi><mo>)</mo><mo>=</mo><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">P(i, \ i) = true</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace">Â </span><span class="mord mathdefault">i</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span></span></span></span></span></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mo>(</mo><mi>i</mi><mo separator="true">,</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo>=</mo><mo>(</mo><mi>S</mi><mtext>Â </mtext><mi>i</mi><mtext>Â </mtext><mo>=</mo><mo>=</mo><mi>S</mi><mtext>Â </mtext><mi>i</mi><mo>+</mo><mn>1</mn><mtext>Â </mtext><mo>)</mo></mrow><annotation encoding="application/x-tex">P(i, i + 1) = (S~i~ == S~i+1~)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace nobreak">Â </span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace nobreak">Â </span><span class="mrel">=</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mspace nobreak">Â </span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mspace nobreak">Â </span><span class="mclose">)</span></span></span></span></span></p></li></ul><h3 id="åŠ¨æ€è§„åˆ’æ–¹æ³•ä»£ç "><a class="anchor" href="#åŠ¨æ€è§„åˆ’æ–¹æ³•ä»£ç "></a> åŠ¨æ€è§„åˆ’æ–¹æ³•ä»£ç </h3><h4 id="java"><a class="anchor" href="#java"></a> Java</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function">String <span class="title">longestPalindrome</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> len = s.length();</span><br><span class="line">  <span class="keyword">boolean</span>[][] temp = <span class="keyword">new</span> <span class="keyword">boolean</span>[len][len];</span><br><span class="line">  <span class="keyword">int</span> maxLen = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> start = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    temp[i][i] = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (s.charAt(i) == s.charAt(i + <span class="number">1</span>)) &#123;</span><br><span class="line">      maxLen = <span class="number">2</span>;</span><br><span class="line">      temp[i][i + <span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">      start = i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  temp[len - <span class="number">1</span>][len - <span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> tmpLen = <span class="number">3</span>; tmpLen &lt;= len; tmpLen++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len - tmpLen + <span class="number">1</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> j = i + tmpLen - <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">if</span> (temp[i + <span class="number">1</span>][j - <span class="number">1</span>] &amp;&amp; s.charAt(i) == s.charAt(j)) &#123;</span><br><span class="line">        maxLen = tmpLen;</span><br><span class="line">        start = i;</span><br><span class="line">        temp[i][j] = <span class="keyword">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s.substring(start, start + maxLen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="python"><a class="anchor" href="#python"></a> Python</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longestPalindrome</span><span class="params">(self, s: str)</span> -&gt; str:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> s <span class="keyword">or</span> len(s) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line">        res = [[<span class="keyword">False</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(len(s))] <span class="keyword">for</span> j <span class="keyword">in</span> range(len(s))]</span><br><span class="line">        max_len = <span class="number">1</span></span><br><span class="line">        start = <span class="number">0</span></span><br><span class="line">        str_len = len(s)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(str_len - <span class="number">1</span>):</span><br><span class="line">            res[i][i] = <span class="keyword">True</span></span><br><span class="line">            <span class="keyword">if</span> s[i] == s[i + <span class="number">1</span>]:</span><br><span class="line">                res[i][i + <span class="number">1</span>] = <span class="keyword">True</span></span><br><span class="line">                start = i</span><br><span class="line">                max_len = <span class="number">2</span></span><br><span class="line">        res[str_len - <span class="number">1</span>][str_len - <span class="number">1</span>] = <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">for</span> tmp_len <span class="keyword">in</span> range(<span class="number">3</span>, str_len + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(str_len - tmp_len + <span class="number">1</span>):</span><br><span class="line">                j = i + tmp_len - <span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> res[i+<span class="number">1</span>][j<span class="number">-1</span>] <span class="keyword">and</span> s[i] == s[j]:</span><br><span class="line">                    max_len = tmp_len;</span><br><span class="line">                    start = i</span><br><span class="line">                    res[i][j]=<span class="keyword">True</span></span><br><span class="line">        <span class="keyword">return</span> s[start: start + max_len]</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•°æ®å¦‚ä¸‹ï¼š</p><table><thead><tr><th>Language</th><th>Time</th><th>Memory</th></tr></thead><tbody><tr><td>python3</td><td>3768 ms</td><td>21.7 MB</td></tr><tr><td>java</td><td>35 ms</td><td>39.4 MB</td></tr></tbody></table><p>è²Œä¼¼å¯ä»¥ä¼˜åŒ–ï¼Ÿä¸è¿‡è¿™æ ·ç›¸å¯¹æ¯”è¾ƒå¥½ç†è§£å•Š</p><h2 id="database"><a class="anchor" href="#database"></a> DataBase</h2><blockquote><p>Write a SQL query to get the second highest salary from the <code>Employee</code> table.</p></blockquote><blockquote><p>Write a SQL query to get the <em>n</em><sup>th</sup> highest salary from the <code>Employee</code> table.</p></blockquote><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç¬¬äºŒé«˜</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">IFNULL</span>(</span><br><span class="line">        (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</span><br><span class="line">        <span class="keyword">FROM</span> Employee</span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">        <span class="keyword">LIMIT</span> <span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">    <span class="literal">NULL</span>) <span class="keyword">AS</span> SecondHighestSalary</span><br><span class="line"><span class="comment"># ç¬¬Né«˜</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> getNthHighestSalary(N <span class="built_in">INT</span>) <span class="keyword">RETURNS</span> <span class="built_in">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">set</span> N = N - <span class="number">1</span>;</span><br><span class="line">  RETURN (</span><br><span class="line">      <span class="comment"># Write your MySQL query statement below.</span></span><br><span class="line">      <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Salary</span><br><span class="line">      <span class="keyword">FROM</span> Employee</span><br><span class="line">      <span class="keyword">ORDER</span> <span class="keyword">BY</span> Salary <span class="keyword">DESC</span></span><br><span class="line">      <span class="keyword">LIMIT</span> <span class="number">1</span> <span class="keyword">OFFSET</span> N</span><br><span class="line">  );</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p><a href="https://medium.com/mindorks/understanding-clean-code-in-android-ebe42ad89a99">Understanding Clean Code in Android</a></p><p>ä¸»è¦è®²äº†Androidä¸­çš„ä»£ç è§„èŒƒï¼š<code>S.O.L.I.D</code>è§„èŒƒ:</p><ul><li>Single Responsibility Principleâ€Šâ€”â€ŠSRPï¼š æ¯ä¸ªç±»å¿…é¡»åªæœ‰å•ä¸€çš„åŠŸèƒ½</li><li>Open-Closed Principleâ€Šâ€”â€ŠOCPï¼šå¯¹ç»§æ‰¿å¼€æ”¾ï¼Œä½†æ˜¯è¦å¯¹ä¿®æ”¹å…³é—­</li><li>Liskov Substitutions Principleâ€Šâ€”â€ŠLSPï¼šå­ç±»å¯ä»¥ç»§æ‰¿å¹¶é‡å†™è‡ªå·±çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½æ”¹å˜çˆ¶ç±»çš„åŠŸèƒ½</li><li>Interface Segregation Principleâ€Šâ€”â€ŠISPï¼šå®ç°æ¥å£æ—¶ä¸åº”è¯¥å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•ï¼Œåº”åªå®ç°ä½¿ç”¨åˆ°çš„æ–¹æ³•</li><li>Dependency Inversion Principleâ€Šâ€”â€ŠDIPï¼šé«˜çº§æ¨¡å—ä¸åº”ä¾èµ–ä½çº§æ¨¡å—ï¼ŒæŠ½è±¡ä¸åº”ä¾èµ–äºç»†èŠ‚ï¼Œç»†èŠ‚åº”ä¾èµ–æŠ½è±¡</li></ul><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ul><li><p>ä¿®æ”¹Ubuntuå¤šç³»ç»Ÿçš„é»˜è®¤å¯åŠ¨é¡ºåº</p><ul><li><code>sudo gedit /etc/default/grub</code>ä¿®æ”¹# <code>GRUB_DEFAULT=0</code>ä¸€è¡Œ</li><li><code>sudo update-grub</code></li></ul></li><li><p>pythonä¸­äº¤æ¢ list ä¸­ i, j ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®ï¼š</p><p><code>num[i], num[j] = num[j], num[i]</code></p></li><li><p>git status ä¸æ˜¾ç¤ºæ–‡ä»¶æƒé™ä¿®æ”¹</p><p><code>git config fileMode false</code></p></li></ul><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p><a href="https://blog.csdn.net/Luoshengyang/article/details/6564592">https://blog.csdn.net/Luoshengyang/article/details/6564592</a></p><p>è€ç½—çš„ Android è¯¾ä¸­çš„ä¸‹è½½ android å†…æ ¸ä»£ç çš„æ–¹æ³•ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¸…æ˜æ”¾å‡å‡ºå»æ—…æ¸¸ï¼Œæ²¡æœ‰æ‰“å¡ï¼Œè¿™æ¬¡æ—¶è¡¥ä¸Šå‘¨çš„æ‰“å¡ã€‚æœ¬å‘¨ä¸»è¦å¯¹Leetcode ç½‘ç«™ä¸Šåšäº†ä¸€é“ç®—æ³•é¢˜åŠä¸€é“æ•°æ®ç»“æ„é¢˜ï¼Œç®—æ³•æ¶‰åŠåˆ°äº†åŠ¨æ€è§„åˆ’ï¼Œæ•°æ®ç»“æ„æ¶‰åŠåˆ°äº†Limitçš„ç”¨æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬1å‘¨</title>
    <link href="http://www.istarx.cn/2019/03/31/arts-week-one/"/>
    <id>http://www.istarx.cn/2019/03/31/arts-week-one/</id>
    <published>2019-03-31T02:40:11.000Z</published>
    <updated>2019-03-31T07:32:11.936Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æœ¬å‘¨ä¸»è¦æ˜¯åšäº†ä¸€é“LeetCodeçš„ç®—æ³•é¢˜åŠä¸€é“DataBaseçš„é¢˜ï¼Œæ¶‰åŠåˆ°äº†å¿«é€Ÿæ’åºä»¥åŠ SQL è¯­å¥ä¸­çš„<code>LEFT JOIN</code>è¯­å¥ï¼Œé¡ºä¾¿å­¦ä¹ äº†ä¸€ä¸‹å‡ ä¸ªè¡¨åˆå¹¶æ–¹å¼çš„åŒºåˆ«ï¼ŒåæœŸä¼šåšä¸€ä¸ªæ€»ç»“ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#algorithm">Algorithm</a><ul><li><a href="#java">Java</a></li><li><a href="#python">Python</a></li></ul></li><li><a href="#database">Database</a></li><li><a href="#review">Review</a></li><li><a href="#tips">Tips</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><p>æœ¬å‘¨é¢˜ç›®æè¿°å¦‚ä¸‹ï¼š</p><blockquote><p>Given an array <code>A</code> of positive lengths, return the largest perimeter of a triangle with <strong>non-zero area</strong>, formed from 3 of these lengths.</p><p>If it is impossible to form any triangle of non-zero area, return <code>0</code>.</p></blockquote><p>é¢˜ç›®å¾ˆç®€å•ï¼Œç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæ±‚å‘¨é•¿æœ€å¤§çš„ä¸‰è§’å½¢ï¼Œå¦‚æœæ²¡æœ‰å¯ä»¥ç»„æˆä¸‰è§’å½¢çš„ä¸‰ä¸ªæ•°ï¼Œåˆ™è¿”å›0ã€‚æœ€ç®€å•çš„å½“ç„¶å°±æ˜¯æš´åŠ›ç®—æ³•äº†ï¼Œä¸‰ä¸ª for å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯$$O(n^3)$$ã€‚å¦å¤–ä¸€ç§è§£æ³•å°±æ˜¯åˆ©ç”¨æ’åºï¼Œä»å¤§åˆ°å°ä¾æ¬¡å¯»æ‰¾æ»¡è¶³ä¸‰è§’å½¢æ¡ä»¶çš„æ•´æ•°ï¼Œè®¡ç®—å…¶å‘¨é•¿ï¼Œå¦‚ä¸å­˜åœ¨åˆ™è¿”å›é›¶ã€‚Java æœ¬èº«çš„<code>Arrays</code>ç±»ä¸­å¸¦äº†æ’åºçš„æ–¹æ³•ï¼Œä½†æ˜¯æ²¡ç”¨ï¼Œæƒ³ç€å¤ä¹ ç€å†™å†™å¿«æ’ã€‚ä»£ç å¦‚ä¸‹ï¼š</p><h3 id="java"><a class="anchor" href="#java"></a> Java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NO976_LargestPerimeterTriangle</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] A = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>&#125;;</span><br><span class="line">        System.out.println(largestPerimeter(A));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">largestPerimeter</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">        quickSort(A, <span class="number">0</span>, A.length - <span class="number">1</span>); <span class="comment">// increase</span></span><br><span class="line">        <span class="keyword">int</span> numCount = A.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> index = numCount - <span class="number">3</span>; index &gt;= <span class="number">0</span>; index--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (A[index] + A[index + <span class="number">1</span>] &gt; A[index + <span class="number">2</span>]) &#123;</span><br><span class="line">                <span class="keyword">return</span> A[index] + A[index + <span class="number">1</span>] + A[index + <span class="number">2</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (start &gt;= end) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> pivot = partition(nums, start, end);</span><br><span class="line">        quickSort(nums, start, pivot - <span class="number">1</span>);</span><br><span class="line">        quickSort(nums, pivot + <span class="number">1</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pivot = nums[end];</span><br><span class="line">        <span class="keyword">int</span> i = start;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = start; j &lt; end; j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nums[j] &lt; pivot) &#123;</span><br><span class="line">                swap(nums, i, j);</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        swap(nums, i, end);</span><br><span class="line">        <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> tmp = nums[j];</span><br><span class="line">        nums[j] = nums[i];</span><br><span class="line">        nums[i] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="python"><a class="anchor" href="#python"></a> Python</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">largestPerimeter</span><span class="params">(self, A: list)</span> -&gt; int:</span></span><br><span class="line">        self.quick_sort(A, <span class="number">0</span>, len(A) - <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(A) - <span class="number">3</span>, <span class="number">-1</span>, <span class="number">-1</span>): <span class="comment"># -1 </span></span><br><span class="line">            <span class="keyword">if</span> A[i] + A[i + <span class="number">1</span>] &gt; A[i + <span class="number">2</span>]:</span><br><span class="line">                <span class="keyword">return</span> A[i] + A[i + <span class="number">1</span>] + A[i + <span class="number">2</span>]</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">quick_sort</span><span class="params">(self, A: list, start: int, end: int)</span> -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start &gt;= end:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        pivot = self.partition(A, start, end)</span><br><span class="line">        self.quick_sort(A, start, pivot - <span class="number">1</span>)</span><br><span class="line">        self.quick_sort(A, pivot + <span class="number">1</span>, end)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">partition</span><span class="params">(A: list, start: int, end: int)</span> -&gt; int:</span></span><br><span class="line">        pivot = A[end]</span><br><span class="line">        i = start</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> range(start, end, <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> A[j] &lt; pivot:</span><br><span class="line">                A[i], A[j] = A[j], A[i]</span><br><span class="line">                i = i + <span class="number">1</span></span><br><span class="line">        A[i], A[end] = A[end], A[i]</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    print(str(Solution().largestPerimeter([<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>])))</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦ä¸º $$O(n)$$ .</p><table><thead><tr><th>è¯­è¨€</th><th>Runtime</th><th>Memory</th></tr></thead><tbody><tr><td>Java</td><td>9ms</td><td>41.8M</td></tr><tr><td>Python</td><td>352ms</td><td>14M</td></tr></tbody></table><h2 id="database"><a class="anchor" href="#database"></a> Database</h2><blockquote><p>Table: <code>Person(PersonId, FirstName, LastName)</code> and Table: <code>Address(AddressId, PersonId, City, State)</code>. Write a SQL query for a report that provides the following information for each person in the Person table, regardless if there is an address for each of those people:</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> FirstName, LastName, City, State</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure></blockquote><p>SQLè¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    FirstName, LastName, City, State</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    Person</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">    Address</span><br><span class="line"><span class="keyword">ON</span></span><br><span class="line">    Person.personId = Address.PersonId</span><br></pre></td></tr></table></figure><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>è¿™å‘¨å¼€å§‹å­¦ä¹ äº†ä¸€ä¸‹ä¼˜ç¾çš„<code>RxJava</code>åŠ<code>RxAndroid</code>ï¼Œä¸»è¦çœ‹githubçš„é¡¹ç›®wikiï¼Œè®¡åˆ’ä¸¤å‘¨æ—¶é—´å†…é˜…è¯»å®Œè¯¥wikiï¼š</p><p><a href="https://github.com/ReactiveX/RxJava/wiki">https://github.com/ReactiveX/RxJava/wiki</a></p><h2 id="tips"><a class="anchor" href="#tips"></a> Tips</h2><ul><li><p>ä¿®æ”¹Ubuntuå¤šç³»ç»Ÿçš„é»˜è®¤å¯åŠ¨é¡ºåº</p><p><img src="stat-item.png" alt="stat-item"></p><p>å®‰è£…Ubuntuå’ŒWindowsåŒç³»ç»Ÿä¹‹åï¼Œå¼€æœºé»˜è®¤ä¼šè¿›ubuntuç³»ç»Ÿï¼Œåˆ‡æ¢é»˜è®¤å¯åŠ¨é¡¹çš„æ–¹æ³•å¦‚ä¸‹ï¼š</p><ol><li>åœ¨ termianl ä¸­æ‰§è¡Œä¸€ä¸‹ä»£ç ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo gedit /etc/default/grub</span><br></pre></td></tr></table></figure><ol start="2"><li>è¾“å…¥å¯†ç åä¼šæ‰“å¼€ä¸€ä¸ªé—®é¢˜ï¼Œç¼–è¾‘å…¶ä¸­<code>GRUB_DEFAULT=0</code>ä¸€è¡Œï¼Œå°†<code>0</code>ä¿®æ”¹ä¸º<code>4</code>ï¼Œå¹¶ä¿å­˜</li></ol><div class="alert info"><p><code>4</code>ä¸ºä¸Šå›¾å¯åŠ¨é¡¹æ‰€åœ¨çš„åºå·ï¼Œä»<code>0</code>å¼€å§‹è®¡æ•°</p></div><div class="alert info"><p>å¯ä»¥ä¿®æ”¹<code>GRUB_TIMEOUT</code>é¡¹ï¼Œè¡¨ç¤ºåœ¨é€‰æ‹©ç•Œé¢ç­‰å¾…æ—¶é—´ã€‚</p></div><ol start="3"><li>åœ¨ terminal ä¸­æ‰§è¡Œä»¥ä¸‹ä»£ç æ›´æ–°grub</li></ol><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo update-grub</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆã€‚</p></li><li><p>pythonä¸­äº¤æ¢ list ä¸­ i, j ä¸¤ä¸ªå…ƒç´ çš„ä½ç½®ï¼š</p></li></ul>  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line">num[i], num[j] = num[j], num[i]</span><br></pre></td></tr></table></figure><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p>åˆ†äº«ä¸€ç¯‡å¾ˆèµçš„æ–‡ç« ï¼Œå…³äºRxJavaçš„ç»™ <a href="http://gank.io/post/560e15be2dca930e00da1083">Android å¼€å‘è€…çš„ RxJava è¯¦è§£</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬å‘¨ä¸»è¦æ˜¯åšäº†ä¸€é“LeetCodeçš„ç®—æ³•é¢˜åŠä¸€é“DataBaseçš„é¢˜ï¼Œæ¶‰åŠåˆ°äº†å¿«é€Ÿæ’åºä»¥åŠ SQL è¯­å¥ä¸­çš„&lt;code&gt;LEFT JOIN&lt;/code&gt;è¯­å¥ï¼Œé¡ºä¾¿å­¦ä¹ äº†ä¸€ä¸‹å‡ ä¸ªè¡¨åˆå¹¶æ–¹å¼çš„åŒºåˆ«ï¼ŒåæœŸä¼šåšä¸€ä¸ªæ€»ç»“ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>ARTSæ‰“å¡â€”ç¬¬0å‘¨</title>
    <link href="http://www.istarx.cn/2019/03/22/arts-week-zero/"/>
    <id>http://www.istarx.cn/2019/03/22/arts-week-zero/</id>
    <published>2019-03-22T15:03:23.000Z</published>
    <updated>2019-03-24T12:56:43.692Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æœ€è¿‘å‚åŠ äº†è€—å­å”çš„ARTS100å¤©æ‰“å¡æ´»åŠ¨ï¼Œæ¯å‘¨ä¸€æ¬¡ã€‚æœ¬å‘¨æ‰“å¡ä¸ºç¬¬ä¸€å‘¨ã€‚å¸Œæœ›èƒ½å¤Ÿå€ŸåŠ©ARTSæ‰“å¡æ´»åŠ¨å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼Œèƒ½å¤Ÿåœ¨æŠ€æœ¯å’Œæ¯…åŠ›ç­‰å¤šæ–¹é¢æœ‰è¿›æ­¥ï¼Œå¹¶ä¸”èƒ½å…‹æœæ‹–å»¶ç—‡ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#%E4%BB%80%E4%B9%88%E6%98%AFarts">ä»€ä¹ˆæ˜¯ARTS</a></li><li><a href="#algorithm">Algorithm</a><ul><li><a href="#%E6%8F%8F%E8%BF%B0">æè¿°</a></li><li><a href="#%E8%A7%A3%E6%B3%95">è§£æ³•</a><ul><li><a href="#java%E7%89%88">Javaç‰ˆ</a></li><li><a href="#python%E7%89%88">Pythonç‰ˆ</a></li></ul></li></ul></li><li><a href="#database">Database</a></li><li><a href="#review">Review</a></li><li><a href="#tip">Tip</a></li><li><a href="#share">Share</a></li></ul></p><h2 id="ä»€ä¹ˆæ˜¯arts"><a class="anchor" href="#ä»€ä¹ˆæ˜¯arts"></a> ä»€ä¹ˆæ˜¯ARTS</h2><p>ARTSæ˜¯è€—å­å‘èµ·çš„ä¸€é¡¹æ‰“å¡æ´»åŠ¨ï¼Œæ¯å‘¨è¦å®Œæˆä¸€ä¸ªARTSæ‰“å¡ä¸€æ¬¡ã€‚</p><p>ä»¥ARTSåˆ†åˆ«è¡¨ç¤ºä¸º</p><ul><li>A-<strong>Algorithm</strong>ï¼šæ¯å‘¨è‡³å°‘åš<a href="https://leetcode.com/problemset/all/">LeetCode</a>ä¸€é“ç®—æ³•é¢˜ï¼›</li><li>R-<strong>Review</strong>ï¼šæ¯å‘¨è‡³å°‘é˜…è¯»ä¸€ç¯‡è‹±æ–‡æ–‡ç« ï¼Œå­¦ä¹ è‹±æ–‡çš„åŒæ—¶å­¦ä¹ æŠ€æœ¯ï¼›</li><li>T-<strong>Tip</strong>ï¼šæ¯å‘¨è‡³å°‘å­¦ä¹ ä¸€ä¸ªå°æŠ€å·§ï¼›</li><li>S-<strong>Share</strong>ï¼šæ¯å‘¨åˆ†äº«ä¸€ç¯‡æœ‰è§‚ç‚¹å’Œæ€è€ƒçš„æŠ€æœ¯æ–‡ç« ï¼›</li></ul><p>é™¤äº†ä»¥ä¸Šçš„å†…å®¹å¤–ï¼Œè‡ªå·±ç»™è‡ªå·±åŠ äº†ç‚¹æ–™ï¼šåœ¨Algorithmä¸­åˆ†åˆ«ç”¨Javaå’ŒPythonå®ç°ï¼Œå¹¶ç ”ç©¶å…¶ç”¨åˆ°çš„çŸ¥è¯†ç‚¹åŠç®—æ³•çŸ¥è¯†ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ¯å‘¨åšä¸€é“æ•°æ®åº“çš„é¢˜ï¼›æ¯ä¸¤å‘¨éœ€è¦è‡³å°‘ä¸€ç¯‡çš„æ€»ç»“åšå®¢è¾“å‡ºã€‚</p><h2 id="algorithm"><a class="anchor" href="#algorithm"></a> Algorithm</h2><h3 id="æè¿°"><a class="anchor" href="#æè¿°"></a> æè¿°</h3><p>Given an array of integers, return <strong>indices</strong> of the two numbers such that they add up to a specific target.</p><p>You may assume that each input would have <strong>exactly</strong> one solution, and you may not use the <em>same</em> element twice.</p><p><strong>Example</strong></p><p>è¾“å…¥ï¼šnums = [2, 7, 11, 15], target = 9</p><p>è¾“å‡ºï¼š[0,1]ï¼Œå› ä¸ºnums[0] + nums[1] == target</p><h3 id="è§£æ³•"><a class="anchor" href="#è§£æ³•"></a> è§£æ³•</h3><p>è¿™ä¸ªæ˜¯æ¯”è¾ƒç®€å•çš„é¢˜ç›®äº†ï¼Œä¸è€ƒè™‘æ—¶é—´çš„æƒ…å†µä¸‹å¯ä»¥è€ƒè™‘æš´åŠ›è§£æ³•ï¼Œå¦‚æœè€ƒè™‘æ—¶é—´çš„è¯åˆ™éœ€è¦ä¼˜åŒ–ç®—æ³•ã€‚</p><ul><li>æš´åŠ›è§£æ³•ï¼šå¯¹æ•°ç»„åšåŒå±‚forå¾ªç¯ï¼ŒæŒ‰ä¸ªå¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„è§£ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(n<sup>2</sup>)ï¼Œæ•°æ®é‡è¿‡å¤§æ—¶åˆ™ä¼šæ—¶é—´è¶…è¶Šä¸Šé™ï¼›</li><li>åˆ©ç”¨Mapæˆ–è€…dictå‡å°‘æ—¶é—´å¤æ‚åº¦ï¼Œä¿å­˜å½“å‰target-å½“å‰å…ƒç´ ä»¥åŠå½“å‰ç´¢å¼•å€¼ï¼›</li></ul><h4 id="javaç‰ˆ"><a class="anchor" href="#javaç‰ˆ"></a> Javaç‰ˆ</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer,Integer&gt; tmp = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (tmp.containsKey(nums[i])) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;tmp.get(nums[i]), i&#125;;</span><br><span class="line">&#125;</span><br><span class="line">            tmp.put(target - nums[i], i);</span><br><span class="line">            </span><br><span class="line">&#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="pythonç‰ˆ"><a class="anchor" href="#pythonç‰ˆ"></a> Pythonç‰ˆ</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">twoSum</span><span class="params">(self, nums: List[int], target: int)</span> -&gt; List[int]:</span></span><br><span class="line">        tmp_dic = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums)):</span><br><span class="line">            <span class="keyword">if</span> nums[i] <span class="keyword">in</span> tmp_dic:</span><br><span class="line">                <span class="keyword">return</span> [tmp_dic.get(nums[i]), i]</span><br><span class="line">            tmp_dic[target - nums[i]] = i</span><br></pre></td></tr></table></figure><table><thead><tr><th>è¯­è¨€</th><th>Runtime</th><th>Memory</th></tr></thead><tbody><tr><td>Java</td><td>4ms</td><td>39.8M</td></tr><tr><td>Python</td><td>40ms</td><td>14.6M</td></tr></tbody></table><h2 id="database"><a class="anchor" href="#database"></a> Database</h2><p>éšæœºåˆ°äº†ä¸€é“å¾ˆç®€å•çš„é¢˜ç›®ï¼Œåªæ¶‰åŠåˆ°äº†<code>OR</code>å…³é”®å­—ã€‚é¢˜ç›®æè¿°å¦‚ä¸‹ï¼š</p><p>æŸ¥è¯¢Wordè¡¨ä¸­æ»¡è¶³area &gt; 3000000 æˆ–è€… population &gt; 25000000 çš„åŸå¸‚çš„nameï¼ŒpopulationåŠareaã€‚</p><p>æŸ¥è¯¢è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    <span class="keyword">name</span>, population,area </span><br><span class="line"><span class="keyword">FROM</span> </span><br><span class="line">    World </span><br><span class="line"><span class="keyword">WHERE</span> </span><br><span class="line">    area &gt; <span class="number">3000000</span> <span class="keyword">OR</span> population &gt; <span class="number">25000000</span></span><br></pre></td></tr></table></figure><p>é¢˜ç›®å¾ˆç®€å•ï¼Œçœ‹äº†ä¸€ä¸‹LeetCodeä¸Šçš„æ ‡å‡†è§£ç­”ï¼Œæœ‰ä¸€ç§è§£æ³•æ˜¯åˆ©ç”¨è¡¨åˆå¹¶ï¼Œå³æŸ¥è¯¢åˆ†åˆ«æ»¡è¶³ä¸€ä¸ªæ¡ä»¶çš„è¡¨ï¼Œå¹¶æŠŠç»“æœè¿›è¡Œåˆå¹¶ï¼Œæ¶‰åŠåˆ°çš„å…³é”®å­—æ˜¯<code>UNION</code>ï¼ŒæŸ¥è¯¢è¯­å¥å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">name</span>, population, area</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    World</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    area &gt; <span class="number">3000000</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">name</span>, population, area</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    World</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    population &gt; <span class="number">25000000</span></span><br></pre></td></tr></table></figure><h2 id="review"><a class="anchor" href="#review"></a> Review</h2><p>æœ¬å‘¨é˜…è¯»çš„è‹±æ–‡æ–‡ç« æ˜¯æ¥è‡ªMediumçš„ä¸€ç¯‡æ–‡ç« <a href="https://android.jlelse.eu/android-shape-drawables-tutorial-17fbece6fef5/">Shape Drawables</a>ï¼ŒShape Drawableså¯ä»¥æ›¿æ¢pngå›¾ç‰‡ä»¥å‡å°‘åŠ è½½åŠç»˜åˆ¶æ—¶é—´ï¼Œè¿˜å¯ä»¥å‡å°apkæœ¬èº«çš„å¤§å°ã€‚</p><p>Androidçš„å¼€æ”¾æ€§å†³å®šäº†åº”ç”¨éœ€è¦é€‚é…ä¸åŒå¤§å°å±å¹•ï¼Œåœ¨ä½¿ç”¨<code>jpg</code>æˆ–è€…<code>png</code>å›¾ç‰‡åšå±å¹•é€‚é…æ—¶ï¼Œéœ€è¦è®¾è®¡å¸ˆåšé’ˆå¯¹ä¸åŒå±å¹•åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå¹¶æ‹·è´åˆ°å¯¹åº”çš„èµ„æºæ–‡ä»¶ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´åŒä¸€å¼ ä¸åŒå¤§å°çš„å›¾ç‰‡éœ€è¦ä¿å­˜å¾ˆå¤šä»½ã€‚ä¸ºäº†é¿å…ä¸Šè¿°æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨<code>xml</code>ä»£æ›¿jpgå’Œpngå›¾ç‰‡ã€‚</p><p>ShapeDrawableæ˜¯Drawableçš„å­ç±»ï¼Œå¯ä»¥é€šè¿‡åœ¨drawableæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ ¹æ ‡ç­¾ä¸º<code>shape</code>çš„xmlæ–‡ä»¶ï¼Œå¹¶åœ¨layoutæ–‡ä»¶ä¸­å¼•ç”¨å¾—åˆ°ï¼Œxmlæ–‡ä»¶å¤§è‡´å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">shape</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">android:shape</span>=<span class="string">"line"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"8dp"</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æ¸å˜è‰²--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">gradient</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">padding</span> <span class="attr">android:bottom</span>=<span class="string">"2dp"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/colorPrimaryDark"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">size</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:height</span>=<span class="string">"16dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:width</span>=<span class="string">"16dp"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">stroke</span> <span class="attr">android:width</span>=<span class="string">"2dp"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>android:shapeå¯é€‰é¡¹æœ‰<code>line</code>ã€<code>rectangle</code>ã€<code>oval</code>ã€<code>ring</code>ç­‰ï¼›</li><li>strokeå¯ä»¥ç†è§£æˆç”»ç¬”ï¼›</li></ul><div class="alert info"><p>xmlæ–‡ä»¶å»ºç«‹è™šçº¿ShapeDrawableæ—¶ï¼Œéœ€è¦ç”¨åˆ°stroke itemä¸‹çš„<code>dashWidth</code>åŠ<code>dashGap</code>åˆ†åˆ«è¡¨ç¤ºå®çº¿å®½åº¦åŠç©ºéš™å®½åº¦ã€‚è¿˜éœ€è¦æ³¨æ„çš„æ˜¯sizeçš„å®½åº¦å¿…é¡»è¦å¤§äºstrokeçš„å®½åº¦ï¼Œå¦åˆ™æ— æ³•æ˜¾ç¤ºè™šçº¿ï¼›</p></div><h2 id="tip"><a class="anchor" href="#tip"></a> Tip</h2><ol><li><p>åˆ†äº«ä¸€ä¸ªgitç›¸å…³çš„å°æŠ€å·§çš„ï¼Œä»åŒäº‹é‚£å­¦ä¹ çš„ï¼Œç¡®å®åœ¨ä»£ç åˆå…¥çš„æ—¶å€™å¸®åŠ©å¾ˆå¤§ï¼›</p><p>å‡å¦‚æœ¬åœ°æœ‰ä¸‰ä¸ªæœªpushåˆ°è¿œç¨‹çš„èŠ‚ç‚¹Aã€Bã€Cï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p><p><img src="commit-state.gif" alt="commit-state"></p><p>git logè®°å½•å¦‚ä¸‹ï¼š</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">commit af75163b2dd46891ccef6989a9c661e001d372f5 (HEAD -&gt; master)</span><br><span class="line">Author: Cherlas &lt;vm@li.cm&gt;</span><br><span class="line">Date:   Sun Mar 24 10:53:18 2019 +0800</span><br><span class="line"></span><br><span class="line">    commitA</span><br><span class="line"></span><br><span class="line">commit ab2b7b369d5e6f79626850c602a05b5101c4fd49</span><br><span class="line">Author: Cherlas &lt;vm@li.cm&gt;</span><br><span class="line">Date:   Sun Mar 24 10:52:48 2019 +0800</span><br><span class="line"></span><br><span class="line">    commitB</span><br><span class="line"></span><br><span class="line">commit 1b0a9a519a83f9771ef57a60084e7a58e365468c</span><br><span class="line">Author: Cherlas &lt;vm@li.cm&gt;</span><br><span class="line">Date:   Sun Mar 24 10:52:11 2019 +0800</span><br><span class="line"></span><br><span class="line">    commitC</span><br></pre></td></tr></table></figure><p>å¦‚æœä»…ä»…è¦ä¿®æ”¹BèŠ‚ç‚¹è€Œä¸å½±å“Aå’ŒCï¼Œåˆ™æ“ä½œå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git rebase -i 1b0a9a519a83f9771ef57a60084e7a58e365468c</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤ä¸­çš„èŠ‚ç‚¹å·ä¸ºè¦ä¿®æ”¹çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å³CèŠ‚ç‚¹çš„ç¼–å·ï¼Œä¸Šè¿°å‘½ä»¤æ‰§è¡Œåä¼šæœ‰vimç¼–è¾‘æç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pick ab2b7b3 commitB</span><br><span class="line">pick af75163 commitA</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Rebase 1b0a9a5..af75163 onto 1b0a9a5 (2 commands)</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æ˜¯<code>pick</code>å…³é”®è¯ï¼Œå¯ä»¥ä¿®æ”¹æ­¤å…³é”®è¯è¾¾åˆ°ä¿®æ”¹ã€åˆ é™¤åŠåˆå¹¶ç­‰æ“ä½œï¼š</p><table><thead><tr><th>å…³é”®è¯</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>pick</td><td>ä¿æŒå½“å‰èŠ‚ç‚¹æ‰€æœ‰å†…å®¹ä¸å˜</td></tr><tr><td>reword</td><td>ä»…ä¿®æ”¹è¯¥èŠ‚ç‚¹çš„commit message</td></tr><tr><td>edit</td><td>å¯ä»¥ä¿®æ”¹æäº¤å†…å®¹åŠcommit message</td></tr><tr><td>squash</td><td>å½“å‰èŠ‚ç‚¹å’Œä¸Šä¸€èŠ‚ç‚¹åˆå¹¶</td></tr><tr><td>break</td><td>rebaseåˆ°å½“å‰èŠ‚ç‚¹æ—¶åœç•™ï¼Œä¹‹åéœ€è¦æ‰‹åŠ¨rebase --continue</td></tr><tr><td>drop</td><td>åˆ é™¤å½“å‰èŠ‚ç‚¹ï¼Œå¦‚æœvimç¼–è¾‘æ¡†ä¸­çš„æŸä¸€èŠ‚ç‚¹æ‰€åœ¨çš„è¡Œåˆ é™¤ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ</td></tr></tbody></table><p>æŠŠvimç¼–è¾‘å†…å®¹ä¸­commitBå¯¹åº”çš„<code>pick</code>ä¿®æ”¹ä¸º<code>edit</code>ä¿å­˜å¹¶æ¨å‡ºï¼Œgitä¼šrebaseåˆ°commitBèŠ‚ç‚¹å¹¶åœç•™ï¼Œæç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Stopped at ab2b7b3...  commitB</span><br><span class="line">You can amend the commit now, with</span><br><span class="line"></span><br><span class="line">  git commit --amend </span><br><span class="line">Once you are satisfied with your changes, run</span><br><span class="line"></span><br><span class="line">  git rebase --continue</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶å°±å¯ä»¥ç›´æ¥ä¿®æ”¹BèŠ‚ç‚¹çš„å†…å®¹ï¼Œå¹¶åœ¨ä¿®æ”¹ä¹‹åè¿›è¡Œcommit æ‰“patchå¹¶è¿›è¡Œrebaseå³å¯ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">touch commitB_edit</span><br><span class="line">git add commitB_edit</span><br><span class="line">git commit --amend</span><br><span class="line">git rebase --continue</span><br></pre></td></tr></table></figure><h2 id="share"><a class="anchor" href="#share"></a> Share</h2><p>æœ¬å‘¨åˆ†äº«çš„æ–‡ç« çš„æ–‡ç« æ—¶æ¥è‡ªMediunä¸­AndroidPubæ¿å—ä¸­çš„å…³äºMVMåŠMVVMçš„ä¸€ç¯‡æ–‡ç« ï¼š</p><p><a href="https://android.jlelse.eu/why-to-choose-mvvm-over-mvp-android-architecture-33c0f2de5516">Why to choose MVVM over MVPâ€Šâ€”â€ŠAndroid Architecture</a></p><p>ä¸»è¦è®²äº†Architectureçš„å®šä¹‰ï¼šç®€å•å®šä¹‰ä¸ºåšå†³ä»£ç ç¼–å†™è¿‡ç¨‹ä¸­ä»£ç è€¦åˆæ€§è¾ƒå¼ºç­‰é—®é¢˜çš„ä¸€ç§æ–¹æ³•æˆ–æ¨¡å¼ã€‚</p><p>æ–‡ç« ä¸­è®²åˆ°äº†MVPçš„ç¼ºç‚¹:Presenterå’ŒViewä¹‹é—´äº’æœ‰å¯¹æ–¹çš„å¼•ç”¨(è¯„è®ºä¸­ä¹Ÿæœ‰äººåé©³è¿™ä¸€ç‚¹)ï¼Œç»™æµ‹è¯•åŠä»£ç åˆ†ç¦»ç­‰å¸¦æ¥å›°éš¾ã€‚è€ŒMVVMæ¨¡å¼ä¸­çš„ViewModuleåˆ™åªå¯¹å¤–æš´éœ²æ•°æ®è€Œä¸çŸ¥é“æ•°æ®å…·ä½“æ˜¯è°ç”¨ï¼Œå•ä¸ªçš„View(Activity)ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªViewModuleçš„å®ä¾‹ï¼Œåœ¨å¯æµ‹è¯•æ€§åŠä»£ç è€¦åˆæ€§æ–¹é¢è¦ä¼˜äºPresenterã€‚</p><p>æ‰“å¡å®Œæ¯•ï¼Œæ„Ÿè§‰ç›¸å½“çš„å¯ä»¥ï¼Œåé¢ä¹Ÿä¼šç»™è‡ªå·±é€‚å½“çš„å†åŠ ä¸€äº›å†…å®¹ï¼ŒFightingâ€¦</p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å‚åŠ äº†è€—å­å”çš„ARTS100å¤©æ‰“å¡æ´»åŠ¨ï¼Œæ¯å‘¨ä¸€æ¬¡ã€‚æœ¬å‘¨æ‰“å¡ä¸ºç¬¬ä¸€å‘¨ã€‚å¸Œæœ›èƒ½å¤Ÿå€ŸåŠ©ARTSæ‰“å¡æ´»åŠ¨å…»æˆè‰¯å¥½çš„ä¹ æƒ¯ï¼Œèƒ½å¤Ÿåœ¨æŠ€æœ¯å’Œæ¯…åŠ›ç­‰å¤šæ–¹é¢æœ‰è¿›æ­¥ï¼Œå¹¶ä¸”èƒ½å…‹æœæ‹–å»¶ç—‡ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ARTSæ‰“å¡" scheme="http://www.istarx.cn/categories/ARTS%E6%89%93%E5%8D%A1/"/>
    
    
      <category term="ARTS" scheme="http://www.istarx.cn/tags/ARTS/"/>
    
  </entry>
  
  <entry>
    <title>SQL ä¸­çš„ UNIQUE å…³é”®å­—</title>
    <link href="http://www.istarx.cn/2018/12/17/unique-keyword-of-mysql/"/>
    <id>http://www.istarx.cn/2018/12/17/unique-keyword-of-mysql/</id>
    <published>2018-12-17T08:19:45.000Z</published>
    <updated>2019-02-18T17:02:24.232Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>æœ¬æ–‡ä¸»è¦å¯¹å·¥ä½œä¸­ç”±<code>UNIQUE</code>å”¯ä¸€æ€§çº¦æŸæ›´æ”¹å¯¼è‡´æ•°æ®åº“å‡çº§æ‹·è´æ•°æ®çš„æ—¶å€™å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå¼•å‘VPNæ”¹å˜çš„é—®é¢˜åšä¸€ä¸ªç®€å•çš„ç¬”è®°ï¼Œé¡ºä¾¿æ¢³ç†ä¸€ä¸‹UNIQUEå…³é”®å­—ç›¸å…³çš„çŸ¥è¯†ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#%E8%B5%B7%E5%9B%A0">èµ·å› </a></li><li><a href="#%E8%A7%A3%E5%86%B3%E8%BF%87%E7%A8%8B">è§£å†³è¿‡ç¨‹</a></li><li><a href="#%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E7%9F%A5%E8%AF%86">æ¶‰åŠåˆ°çš„çŸ¥è¯†</a><ul><li><a href="#%E5%BC%80%E5%90%AFsql-log">å¼€å¯SQL log</a><ul><li><a href="#%E6%AD%A3%E5%B8%B8%E5%BC%80%E5%90%AFsql-log%E7%9A%84%E6%96%B9%E6%B3%95">æ­£å¸¸å¼€å¯SQL logçš„æ–¹æ³•</a></li><li><a href="#%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9prop%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%90%AFlog">é€šè¿‡ä¿®æ”¹propæ–‡ä»¶è¿›è¡Œå¼€å¯log</a></li><li><a href="#example">Example</a></li></ul></li></ul></li></ul></p><h2 id="èµ·å› "><a class="anchor" href="#èµ·å› "></a> èµ·å› </h2><p>å‰å‡ å¤©æ”¶åˆ°äº†ç”¨æˆ·æçš„ä¸€ä¸ªæ•…éšœï¼Œæ•…éšœæè¿°æ˜¯è¿™æ ·çš„ï¼šä»Android Oç‰ˆæœ¬é€šè¿‡fotaå‡çº§åˆ°Pç‰ˆæœ¬çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´å‡çº§ä¹‹åçš„VPNå‘ç”Ÿæ”¹å˜ï¼Œç”±cmnetæ›´æ”¹ä¸ºcmwapã€‚åœ¨ç”¨æˆ·æ‰‹æœºä¸Šçš„è¡¨ç°ä¸ºå‡çº§ä¹‹åç½‘ç»œå¼‚å¸¸å¡é¡¿ï¼Œå¾®ä¿¡æ¶ˆæ¯æ¥å—ç¼“æ…¢ï¼Œå°¤å…¶èŠå¤©å›¾ç‰‡ç”šè‡³å‘ç”Ÿå‘é€ä¸å‡ºå»æˆ–è€…æ¥æ”¶ä¸åˆ°çš„æƒ…å†µã€‚</p><h2 id="è§£å†³è¿‡ç¨‹"><a class="anchor" href="#è§£å†³è¿‡ç¨‹"></a> è§£å†³è¿‡ç¨‹</h2><p>åœ¨ Android ä¸­ä¸ VPNç›¸å…³çš„æ¨¡å—ä¸º TelephonyProviderï¼Œè€Œåœ¨è®¾ç½®é‡Œé¢åŠ è½½é»˜è®¤APNçš„æ—¶å€™ä¹Ÿæ˜¯é€šè¿‡uriå» TelephonyProvider ä¸­è¿›è¡ŒæŸ¥è¯¢ã€‚æ‰€æœ‰è¿è¥å•†çš„ APN ç›¸å…³çš„é…ç½®æ˜¯é€šè¿‡éœ€æ±‚ä»è¿è¥å•†æ‹¿åˆ°æ•°æ®ä¹‹åé…ç½®åˆ°apn-config.xml æ–‡ä»¶ä¸­çš„ï¼Œè€Œæ‰‹æœºç¬¬ä¸€æ¬¡å¼€æœºçš„æ—¶å€™ TelephonyProvider ä¼šè§£ææ­¤ xml æ–‡ä»¶ï¼ŒåŠ è½½æ‰€æœ‰ APNï¼Œå¹¶ä¿å­˜åˆ° telephony.db æ•°æ®åº“é‡Œé¢çš„ carriers è¡¨ä¸­(å…·ä½“è·¯å¾„ä¸ºï¼š/data/user_de/0/com.android.providers.telephony/databases/telephony.dbï¼Œéœ€è¦rootæ‰èƒ½çœ‹å¾—åˆ°)ã€‚å› æ­¤æ­¤æ¬¡é—®é¢˜å°±å¯ä»¥å®šä½åˆ°äº† TelephonyProvider ä¸­çš„æ•°æ®åº“ä»Oå‡çº§åˆ°P çš„æ—¶å€™å‘ç”Ÿå¼‚å¸¸ã€‚</p><p>APNåŠ è½½æ˜¯ç”¨sharedPreference ä¿å­˜çš„apn_idè¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œåœ¨å‡çº§onUpgradeå®Œæˆä¹‹ååˆ©ç”¨æ­¤idæ›´æ–°ä¸€äº›å¿…è¦çš„å­—æ®µï¼Œåœ¨åŠ è½½æ–°ç‰ˆæœ¬çš„apn-config.xmlæ–‡ä»¶ä¹‹ååå‘åˆ©ç”¨è¿™äº›å­—æ®µæŸ¥è¯¢apn_id.æŸ¥çœ‹xmlä¿å­˜çš„å­—æ®µå†…å®¹å‘ç°æŸ¥è¯¢åˆ°çš„è¯¥apn_idå¯¹åº”çš„å­—æ®µå’Œå‡çº§ä¹‹å‰æ•°æ®åº“ä¸­æ•°æ®ä¸ä¸€è‡´ï¼Œè¿›è€Œä¹Ÿè¯´æ˜äº†æ•°æ®åº“å‡çº§çš„æ—¶å€™å‘ç”Ÿäº†å¼‚å¸¸ã€‚</p><p>æ¥ç€å†è¯´è¯´ TelephonyProvider æ¨¡å—ä¸­å’Œ apn ç›¸å…³çš„æ•°æ®åº“å‡çº§æµç¨‹ã€‚ç”±äºè¦å…¼å®¹å„ä¸ª Android ç‰ˆæœ¬ï¼Œæ‰€ä»¥åœ¨providerçš„onUpgrade()æ–¹æ³•ä¸­å¯¹ä¸åŒç‰ˆæœ¬çš„æ•°æ®åº“è¿›è¡Œäº†å¤„ç†ï¼Œä¸»è¦åšçš„å·¥ä½œæœ‰ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>é€šè¿‡ ALTER å…³é”®å­—å¯¹æ—§ç‰ˆæœ¬æ•°æ®åº“å¢åŠ åˆ—ï¼›</li><li>å¯¹æ—§è¡¨æ•°æ®è¿›è¡Œæ‹·è´ï¼›<ul><li>åˆ›å»ºä¸€ä¸ªcarriers_tmp è¡¨ï¼ˆæ–°ç‰ˆæœ¬çš„å»ºè¡¨è¯­å¥ï¼‰;</li><li><span class="highlight-text red">æŸ¥è¯¢ carriers è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®å¹¶é€æ¡æ’å…¥åˆ°carriers_tmpè¡¨ä¸­ï¼›</span></li><li>åˆ é™¤ carriers è¡¨ï¼›</li><li>å°†carriers_tmp é‡å‘½åä¸º carriers;</li></ul></li></ul><p>æ¥åˆ°è¿™ä¸ªé—®é¢˜ç¬¬ä¸€æ—¶é—´çœ‹äº†ä¸‹logå‘ç°æ²¡æœ‰ä¸è¡¨æ‹·è´ç›¸å…³çš„è¾“å…¥ï¼Œå› æ­¤åŠ äº†ä¸€äº›è¾“å‡ºlogå¹¶æ¨¡æ‹Ÿfotaå‡çº§æµç¨‹ï¼Œæœä¸å…¶ç„¶æ˜¯ä¸Šè¿°çº¢è‰²æ­¥éª¤å‡ºäº†é—®é¢˜ï¼šåœ¨æ‰§è¡Œå®Œä¸Šè¿°ç¬¬äºŒæ­¥ä¹‹ååˆ©ç”¨apn_idæŸ¥è¯¢å¯¹åº”çš„æ•°æ®åº“å†…å®¹å·²ç»å’Œç¬¬äºŒæ­¥æ‰§è¡Œä¹‹å‰çš„æ•°æ®åº“å†…å®¹ä¸ä¸€è‡´(å®é™…é—®é¢˜ä¸­å·®äº†ä¸€è¡Œ)ï¼›</p><p>å¼€å¯SQLiteç›¸å…³logå‘ç°åœ¨æ•°æ®æ‹·è´çš„è¿‡ç¨‹ä¸­æ’å…¥æŸä¸€è¡Œçš„æ—¶å€™ä¼šæ’å…¥å¤±è´¥ï¼Œæç¤ºè¿åå”¯ä¸€æ€§çº¦æŸã€‚æ–°è¡¨æ¯”æ—§è¡¨å°‘äº†ä¸€è¡Œæ•°æ®ï¼Œæ‰€ä»¥æŸ¥è¯¢å†…å®¹å‡ºé”™ä¹Ÿå°±é‚£ä¹ˆæ„å¤–äº†ã€‚</p><p>æ¥ç€å¯¹æ¯”å‡çº§å‰åçš„ä»£ç æœç„¶å‘ç°åœ¨å‡çº§åçš„æ•°æ®åº“å»ºè¡¨è¯­å¥ä¸­å‡å°‘äº†ä¸€ä¸ªå”¯ä¸€æ€§çº¦æŸæ¡ä»¶ï¼Œè¿™ä¹Ÿå°±æ˜¯è¿™ä¸ªé—®é¢˜çš„ç½ªé­ç¥¸é¦–äº†ã€‚</p><div class="alert info"><p>å¦‚æœå»ºè¡¨çš„æ—¶å€™åšäº†å”¯ä¸€æ€§çº¦æŸï¼Œé‚£ä¹ˆåœ¨æ’å…¥æ•°æ®çš„æ—¶å€™æ•°æ®åº“ä¼šå¯¹çº¦æŸå­—æ®µè¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœè¿™äº›å­—æ®µå’Œå·²æœ‰æ•°æ®ä¸­æŸä¸€è¡Œä¸€è‡´ï¼Œéš¾ä¹ˆæ’å…¥æ–°æ•°æ®çš„æ—¶å€™ä¼šäº§ç”Ÿå†²çªï¼Œjavaä¸­å¯ä»¥åˆ©ç”¨<code>insertWithOnConflict()</code>æ–¹æ³•å®ç°ã€‚</p></div><h2 id="æ¶‰åŠåˆ°çš„çŸ¥è¯†"><a class="anchor" href="#æ¶‰åŠåˆ°çš„çŸ¥è¯†"></a> æ¶‰åŠåˆ°çš„çŸ¥è¯†</h2><h3 id="å¼€å¯sql-log"><a class="anchor" href="#å¼€å¯sql-log"></a> å¼€å¯SQL log</h3><h4 id="æ­£å¸¸å¼€å¯sql-logçš„æ–¹æ³•"><a class="anchor" href="#æ­£å¸¸å¼€å¯sql-logçš„æ–¹æ³•"></a> æ­£å¸¸å¼€å¯SQL logçš„æ–¹æ³•</h4><p>Androidä¸Šé»˜è®¤æ˜¯å…³é—­SQL logçš„ï¼Œåœ¨å¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œçš„æ—¶å€™é™¤éåœ¨javaä»£ç é‡Œé¢æ‰“å°ï¼Œå¦åˆ™çœ‹ä¸åˆ°æ•°æ®åº“æ“ä½œè¯¦æƒ…ï¼Œå°±ç®—åœ¨javaä»£ç é‡Œé¢è¿›è¡Œäº†æ‰“å°ï¼Œä¹Ÿä¸ä¸€å®šå‘ç°æ•°æ®åº“æ“ä½œå‘ç”Ÿçš„é—®é¢˜ã€‚</p><p>å› æ­¤åœ¨åšæ•°æ®åº“ç›¸å…³åˆ†æçš„æ—¶å€™é™¤äº†åœ¨javaå±‚è¿›è¡Œæ‰“å°ï¼Œä¹Ÿåº”è¯¥æ‰“å¼€SQL ç›¸å…³çš„logè¿›è¡Œåˆ†æï¼›æ‰“å¼€æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell setprop log.tag.SQLiteLog VERBOSE</span><br><span class="line">adb shell setprop log.tag.SQLiteStatements VERBOSE</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¸Šè¿°æ–¹æ³•æœ‰ä¸å¥½çš„ä¸€ç‚¹å°±æ˜¯å¦‚æœæ‰‹æœºé‡å¯ï¼Œåˆ™ä¸Šè¿°æ–¹æ³•ä¼šåœ¨é‡å¯ä¹‹åå¤±æ•ˆã€‚ç”±äºåšTelephonyProviderå‡çº§ç›¸å…³çš„åˆ†æï¼Œæ‰‹æœºå¿…é¡»å¾—é‡å¯ã€‚å› æ­¤ä¸Šè¿°æ–¹æ³•ä¸è§å¾—å¯è¡Œã€‚</p><h4 id="é€šè¿‡ä¿®æ”¹propæ–‡ä»¶è¿›è¡Œå¼€å¯log"><a class="anchor" href="#é€šè¿‡ä¿®æ”¹propæ–‡ä»¶è¿›è¡Œå¼€å¯log"></a> é€šè¿‡ä¿®æ”¹propæ–‡ä»¶è¿›è¡Œå¼€å¯log</h4><p>åœ¨Android å¼€æœºçš„æ—¶å€™ä¼šä»<code>/vendor/build.prop</code> å’Œ <code>system/build.prop</code>ä»¥åŠ<code>/product/build.prop</code>æ–‡ä»¶åŠ è½½propå±æ€§ã€‚å› æ­¤åªéœ€è¦ä¿®æ”¹propæ–‡ä»¶å°±å¯ä»¥è¾¾åˆ°é‡å¯å¯ç”¨çš„ç›®çš„ã€‚</p><p>è¿™é‡Œä¿®æ”¹/vendor/build.prop`æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">log.tag.SQLiteLog=VERBOSE</span><br><span class="line">log.tag.SQLiteStatements=VERBOSE</span><br></pre></td></tr></table></figure><p>ä¹‹åè¿›è¡Œé‡å¯é‚£ä¹ˆSQL logä¹Ÿä¸ä¼šå…³é—­äº†ã€‚</p><div class="alert info"><ul><li>æ­¤æ–¹æ³•å¿…é¡»åœ¨æ‰‹æœºrootä¹‹åæˆ–è€…åˆ·debugã€engç‰ˆæœ¬æ‰å¯ä»¥æ“ä½œï¼›</li><li>åœ¨ä¿®æ”¹propæ–‡ä»¶çš„æ—¶å€™å¯èƒ½å› ä¸ºæƒé™æ— æ³•ä¿®æ”¹ï¼Œæ­¤æ—¶è¦ä¹ˆä¿®æ”¹æƒé™ï¼Œè¦ä¹ˆå¯ä»¥æŠŠæ–‡ä»¶pullå‡ºæ¥ä¿®æ”¹å®Œæ¯•å†pushè¿›å»å³å¯ï¼›</li></ul></div><p>###SQLè¯­å¥ä¸­çš„ UNIQUE å…³é”®å­—</p><p><code>UNIQUE</code>æ˜¯SQLä¸­ç”¨æ¥å¯¹å­—æ®µè¿›è¡Œå”¯ä¸€æ€§çº¦æŸçš„å…³é”®å­—ï¼Œå®ƒå¯ä»¥çº¦æŸä¸€ä¸ªé”®ï¼Œä¹Ÿå¯ä»¥çº¦æŸå¤šä¸ªé”®ï¼ˆçº¦æŸå¤šä¸ªé”®æ—¶è¿™ä¸ªé”®å€¼çš„ç»„åˆå”¯ä¸€ï¼‰ã€‚SQL å…³é”®å­—ä¸­å’Œ UNIQUEåŠŸèƒ½æ¯”è¾ƒç›¸ä¼¼çš„æ˜¯<code>PRIMARY</code>ï¼Œè¿™ä¸¤ä¸ªå…³é”®å­—è™½ç„¶åŠŸèƒ½ä¸Šå¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ï¼š</p><ul><li><p><code>PRIMARY</code>åªå¯ä»¥çº¦æŸä¸€ä¸ªé”®ï¼Œè¢«çº¦æŸçš„é”®ç§°ä¸º<code>ä¸»é”®</code>ï¼Œè€Œ<code>UNIQUE</code>å¯ä»¥ä¿®é¥°å¤šä¸ªé”®ï¼Œä½†å”¯ä¸€æ€§çº¦æŸæ‰€åœ¨çš„åˆ—å¹¶ä¸æ˜¯è¡¨çš„ä¸»é”®åˆ—ï¼›</p></li><li><p><code>UNIQUE</code> çº¦æŸçš„é”®å€¼å¯ä»¥ä¸ºç©ºï¼Œä½†æ˜¯<code>PRIMARY</code>çº¦æŸçš„é”®å€¼ä¸å¯ä»¥ä¸ºç©ºå¹¶ä¸å¯é‡å¤ï¼Œå³ï¼š</p><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">PRIMARY</span> = <span class="keyword">UNIQUE</span> + <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure></li><li><p>PRIMARY çº¦æŸæ˜¯ä¸ºäº†è®©å¤–é”®å¼•ç”¨ï¼›</p></li><li><p>ä¸€ä¸ªè¡¨æœ€å¤šåªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†å¯ä»¥æœ‰å¾ˆå¤šUNIQUEçº¦æŸçš„é”®ï¼›</p></li></ul><h4 id="example"><a class="anchor" href="#example"></a> Example</h4><p>æ–°å»ºä¸€ä¸ªç”¨æˆ·èµ„æ–™è¡¨ï¼Œå»ºè¡¨è¯­å¥å¦‚ä¸‹ï¼Œå…¶ä¸­_idä¸ºä¸»é”®ï¼Œname_textå’Œid_card_numberç”¨å”¯ä¸€æ€§çº¦æŸã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> unique_test ( </span><br><span class="line">_id <span class="built_in">INTEGER</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> , </span><br><span class="line">name_text <span class="built_in">VARCHAR</span> ( <span class="number">20</span> ), </span><br><span class="line">age <span class="built_in">INTEGER</span>, </span><br><span class="line">id_card_number <span class="built_in">VARCHAR</span> ( <span class="number">18</span> ), </span><br><span class="line"><span class="keyword">UNIQUE</span> ( name_text, id_card_number ) );</span><br></pre></td></tr></table></figure><p>æ¥ç€æ’å…¥ä¸‰æ¡æ•°æ®åˆ°è¯¥è¡¨ä¸­ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">10</span>,<span class="string">"123456"</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name2"</span>,<span class="number">20</span>,<span class="string">"234561"</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"234561"</span>);</span><br></pre></td></tr></table></figure><p>æ¥ç€æ’å…¥ä¸‹é¢è¿™æ¡æ•°æ®ï¼š</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"123456"</span>);</span><br></pre></td></tr></table></figure><p>è¿è¡Œå®Œè¿™æ¡è¯­å¥åˆ™ä¼šæŠ¥é”™ï¼Œæç¤ºå¦‚ä¸‹ï¼š</p><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">Duplicate <span class="keyword">entry</span> <span class="symbol">'name1</span>-<span class="number">123456</span>' <span class="keyword">for</span> key <span class="symbol">'name_text</span>'</span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å› ä¸ºname_textå­—æ®µå’Œid_card_numberå­—æ®µæ˜¯è¢«UNIQUEè¿›è¡Œçº¦æŸçš„ï¼Œå› æ­¤è¿™ä¸¤ä¸ªå­—æ–­çš„ç»„åˆåœ¨æ•°æ®åº“è¡¨ä¸­åº”è¯¥ä¿æŒå”¯ä¸€ï¼Œä½†æ˜¯ä¸Šé¢ä¸€å¤©æ•°æ®çš„ç»„åˆ<code>name1-123456</code>å’Œæ’å…¥çš„ç¬¬ä¸€æ¡æ•°æ®é‡å¤ï¼Œå› æ­¤ä¼šæç¤ºé”™è¯¯ã€‚</p><p>å¦‚æœè¦æ’å…¥çš„æ—¶å€™ä¸æŠ¥é”™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>ignore</code>æˆ–è€…<code>update</code>æ–¹æ³•ï¼š</p><ul><li><p><code>ignore</code></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">IGNORE</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"123456"</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ¡æ’å…¥çš„æ•°æ®ç›´æ¥è¢«å¿½ç•¥ï¼›</p></li><li><p><code>update</code>æ–¹æ³•:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"123456"</span>) <span class="keyword">ON</span> <span class="keyword">DUPLICATE</span> <span class="keyword">KEY</span> <span class="keyword">UPDATE</span> id_card_number = <span class="string">'654321'</span>;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå®Œæ¯•åå½“å‰æ•°æ®åº“è¡¨ä¸­çš„è®°å½•ä¸ªæ•°ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å·²æœ‰çš„æ•°æ®ä¼šä¸­çš„<code>id_card_number</code>å€¼ä¼šè¢«æ›´æ–°ä¸º<code>654321</code>ã€‚</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦å¯¹å·¥ä½œä¸­ç”±&lt;code&gt;UNIQUE&lt;/code&gt;å”¯ä¸€æ€§çº¦æŸæ›´æ”¹å¯¼è‡´æ•°æ®åº“å‡çº§æ‹·è´æ•°æ®çš„æ—¶å€™å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå¼•å‘VPNæ”¹å˜çš„é—®é¢˜åšä¸€ä¸ªç®€å•çš„ç¬”è®°ï¼Œé¡ºä¾¿æ¢³ç†ä¸€ä¸‹UNIQUEå…³é”®å­—ç›¸å…³çš„çŸ¥è¯†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¨‹åºçŒ¿è¿›åŒ–ä¹‹è·¯" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/"/>
    
    
      <category term="sql" scheme="http://www.istarx.cn/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>å•å…ƒæµ‹è¯•ä¹‹ â€”  Robolectric æ¡†æ¶</title>
    <link href="http://www.istarx.cn/2018/05/07/robolectric-framework/"/>
    <id>http://www.istarx.cn/2018/05/07/robolectric-framework/</id>
    <published>2018-05-07T15:21:28.000Z</published>
    <updated>2019-02-18T16:56:16.445Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>Robolectric æ¡†æ¶æ˜¯ä¸€æ¬¾å¯ä»¥åœ¨JVM ä¸Šè¿è¡Œ Android ç›¸å…³ä»£ç çš„æ¡†æ¶ï¼Œåœ¨ Android å•å…ƒæµ‹è¯•æ€»èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å®ƒæ—¢æœ‰å‡å°‘ç¼–è¯‘ã€æµ‹è¯•ç”¨ä¾‹è¿è¡Œçš„æ—¶é—´ç­‰ä¼˜ç‚¹ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#robolectric-%E6%A1%86%E6%9E%B6%E7%AE%80%E4%BB%8B">Robolectric æ¡†æ¶ç®€ä»‹</a></li><li><a href="#gralde-%E9%85%8D%E7%BD%AE">Gralde é…ç½®</a></li><li><a href="#robolectric-%E9%85%8D%E7%BD%AE">Robolectric é…ç½®</a></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-runner-%E5%8A%A0%E5%BF%AB%E4%B8%8B%E8%BD%BD-jar-%E5%8C%85%E7%9A%84%E9%80%9F%E5%BA%A6">è‡ªå®šä¹‰ Runner åŠ å¿«ä¸‹è½½ jar åŒ…çš„é€Ÿåº¦</a></li><li><a href="#%E6%B5%8B%E8%AF%95-android-%E7%BB%84%E4%BB%B6">æµ‹è¯• Android ç»„ä»¶</a><ul><li><a href="#activity%E6%B5%8B%E8%AF%95">Activityæµ‹è¯•</a><ul><li><a href="#activity-%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95">Activity åˆ›å»ºæµ‹è¯•</a></li><li><a href="#activity-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%B5%8B%E8%AF%95">Activity ç”Ÿå‘½å‘¨æœŸæµ‹è¯•</a></li><li><a href="#activity-%E8%B7%B3%E8%BD%AC%E6%B5%8B%E8%AF%95">Activity è·³è½¬æµ‹è¯•</a></li></ul></li><li><a href="#dialog-%E6%B5%8B%E8%AF%95">Dialog æµ‹è¯•</a></li><li><a href="#toast-%E6%B5%8B%E8%AF%95">Toast æµ‹è¯•</a></li><li><a href="#%E6%8E%A7%E4%BB%B6%E7%8A%B6%E6%80%81%E6%B5%8B%E8%AF%95">æ§ä»¶çŠ¶æ€æµ‹è¯•</a></li><li><a href="#broadcastreceiver-%E6%B5%8B%E8%AF%95">BroadCastReceiver æµ‹è¯•</a></li><li><a href="#service-%E6%B5%8B%E8%AF%95">Service æµ‹è¯•</a></li><li><a href="#%E8%B5%84%E6%BA%90%E6%B5%8B%E8%AF%95">èµ„æºæµ‹è¯•</a></li><li><a href="#looper-%E6%B5%8B%E8%AF%95">Looper æµ‹è¯•</a></li></ul></li><li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89-shadow">è‡ªå®šä¹‰ Shadow</a></li><li><a href="#%E5%B0%8F%E7%BB%93">å°ç»“</a></li></ul></p><h2 id="robolectric-æ¡†æ¶ç®€ä»‹"><a class="anchor" href="#robolectric-æ¡†æ¶ç®€ä»‹"></a> Robolectric æ¡†æ¶ç®€ä»‹</h2><p>Android æµ‹è¯•ç”¨ä¾‹ç¼–å†™çš„è¿‡ç¨‹ä¸­ï¼Œå’Œ Android æ¡†æ¶è¿›è¡Œäº¤äº’çš„å•å…ƒæ˜¯æµ‹è¯•éš¾ç‚¹æ‰€åœ¨ï¼Œä¹Ÿæ˜¯ä¸»è¦è€—è´¹æ—¶é—´çš„åœ°æ–¹ï¼Œé’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œåœ¨ Robolectric æ¡†æ¶å‡ºç°ä¹‹å‰ä¸»è¦æœ‰ä¸¤ç§è§£æ³•ï¼š</p><ul><li>ç¼–å†™ Android JUnit Testï¼Œè¿™ç±»æµ‹è¯•ç”¨ä¾‹çš„ä¼˜ç‚¹æ˜¯ä¸ç”¨å¯¹æ¡†æ¶ç›¸å…³çš„ä»£ç è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œç¼ºç‚¹æ˜¯æ¯æ¬¡è¿è¡Œéƒ½éœ€è¦ç¼–è¯‘è¢«æµ‹è¯•ä»£ç  apk å’Œæµ‹è¯•ä»£ç  apkï¼Œæ¯”è¾ƒè€—æ—¶ï¼›</li><li>å¯¹ Android æ¡†æ¶ç›¸å…³çš„ç±»ã€æ–¹æ³•ç­‰è¿›è¡Œ mockï¼Œæ­¤æ–¹æ³•å¯ä»¥å‡å°‘ç¼–è¯‘åŠè¿è¡Œæ—¶é—´ï¼Œä½†æ˜¯å¯¹å¤§é‡æ¡†æ¶ç›¸å…³ä»£ç çš„mock å¯¹æµ‹è¯•ç”¨ä¾‹ç¼–å†™å¸¦æ¥äº†ä¸€å®šçš„éš¾åº¦åŠå¤æ‚åº¦ï¼›</li></ul><p>å¹¸è¿çš„æ˜¯ Robolectric æ¡†æ¶çš„å‡ºç°è§£å†³äº†è¿™ä¸€ç³»åˆ—é—®é¢˜ã€‚Robolectricå¯ä»¥åœ¨ JVM ä¸Šè¿è¡Œ Android ç›¸å…³çš„ä»£ç ï¼Œä¸éœ€è¦å€ŸåŠ©æ‰‹æœºå°±å¯ä»¥å¯¹ Activityã€Service ç­‰å››å¤§ç»„ä»¶ã€èµ„æºç­‰è¿›è¡Œæµ‹è¯•ï¼Œç»™ Android æµ‹è¯•å¸¦æ¥äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚</p><p>Robolectric æ¡†æ¶ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li><p>æ¡†æ¶å¯¹ Android.jar åŒ…ä¸­å‡ ä¹æ‰€æœ‰çš„ç±»éƒ½è¿›è¡Œäº†æ˜ å°„(Shadow)ï¼Œå³å¯¹äºä¸€ä¸ªç±»<code>X</code>ï¼Œåˆ™æœ‰ä¸€ä¸ªå…¶å½±å­<code>ShadowX</code>ï¼Œæ¯”å¦‚ï¼Œ<code>Log</code>ç±»å¯¹åº”çš„å½±å­ä¸º<code>ShadowLog</code>ï¼Œæµ‹è¯•ç”¨ä¾‹è¿‡ç¨‹ä¸­å¯ä»¥æƒ³æ“ä½œåŸå§‹ç±»ä¸€æ ·æ“ä½œå…¶æ˜ å°„ã€‚åŒæ—¶Robolectric è¿˜æä¾›äº†è‡ªå®šä¹‰å½±å­çš„æ–¹æ³•ï¼Œè¿™ç‚¹åé¢ä¼šè¯´åˆ°ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒRobolectric æ¡†æ¶è¿˜å¯¹èµ„æºã€Native æ–¹æ³•éƒ½è¿›è¡Œäº†ç‰¹æ®Šçš„å¤„ç†ï¼Œä½¿ä¹‹èƒ½åœ¨ JVM ä¸Šè¿è¡Œã€‚</p></li><li><p>åœ¨è™šæ‹Ÿæœºå’ŒçœŸå®è®¾å¤‡ä¹‹å¤–è¿è¡Œæµ‹è¯•ç”¨ä¾‹ï¼Œæ­£å¦‚å‰é¢è¯´åˆ°çš„ä¸€æ ·ï¼ŒRobolectric å¯¹æ¡†æ¶çš„ä»£ç åšäº†é‡æ–°å®ç°ï¼Œä½¿ä¹‹å¯ä»¥è„±ç¦»æ‰‹æœºæˆ–è€…è™šæ‹Ÿæœºè¿è¡Œã€‚</p></li><li><p>ä¸éœ€è¦å» mock æ¡†æ¶ç›¸å…³ä»£ç ï¼Œå½“ç„¶ï¼Œå¿…è¦çš„æƒ…å†µä¸‹å¯ä»¥é…åˆ mock æˆ–è€… powermock ç­‰ mock æ¡†æ¶è¿›è¡Œæ›´å…¨é¢çš„æµ‹è¯•(åç»­æ–‡ç« ä¼šé™åˆ° Robolectric å’Œ PowerMock æ¡†æ¶æ­é…è¿›è¡Œå•å…ƒæµ‹è¯•)ã€‚</p></li></ul><h2 id="gralde-é…ç½®"><a class="anchor" href="#gralde-é…ç½®"></a> Gralde é…ç½®</h2><p>ä½¿ç”¨ Robolectric æ¡†æ¶éœ€è¦å¼•å…¥å…¶å¯¹åº”çš„ä¾èµ–åŒ…ï¼Œå¹¶åšå…¶å®ƒçš„ä¸€äº›ç®€å•é…ç½®ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">...</span><br><span class="line">    testOptions &#123;</span><br><span class="line">        unitTests &#123;</span><br><span class="line">            includeAndroidResources = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">dependencies &#123;</span><br><span class="line">    testImplementation <span class="string">'org.robolectric:robolectric:3.8'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="robolectric-é…ç½®"><a class="anchor" href="#robolectric-é…ç½®"></a> Robolectric é…ç½®</h2><p>Robolectric æ¡†æ¶çš„é…ç½®ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªï¼š</p><ul><li><p>Runner æŒ‡å®šï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(RobolectricTestRunner.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span>  <span class="title">RobolectricDemoTest</span></span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨ <code>@Config</code>æŒ‡å®šä¸€äº›å…¶å®ƒçš„é…ç½®ï¼Œå¯ä»¥æŒ‡å®šçš„é…ç½®ä¸»è¦æœ‰ä»¥ä¸‹ä¸€äº›ï¼š</p><table><thead><tr><th>é…ç½®å±æ€§</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>sdk</code> / <code>minSdk</code> / <code>maxSdk</code></td><td>æŒ‡å®šæµ‹è¯•ç”¨ä¾‹æ‰€å·¥ä½œ / æœ€å° / æœ€å¤§çš„ sdk ç‰ˆæœ¬</td></tr><tr><td><code>manifest</code></td><td>æŒ‡å®š Android manifest æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸­çš„èµ„æºã€assert æ–‡ä»¶éƒ½å°†è¢«åŠ è½½ã€‚</td></tr><tr><td><code>constants</code></td><td>æŒ‡å®šç”± Gradle ç¼–è¯‘ç”Ÿæˆçš„ <code>BuildConfig</code>æ–‡ä»¶ï¼Œé»˜è®¤ä¸º <code>Void.class</code></td></tr><tr><td><code>packageName</code></td><td><code>R.class</code>æ–‡ä»¶æ‰€åœ¨çš„åŒ…åï¼Œå¦‚æœåœ¨ gradle æ–‡ä»¶çš„ productflavor å¯¹åŒ…åè¿›è¡Œäº†æ”¹å˜ï¼Œåˆ™éœ€è¦æŒ‡å®šè¯¥è®¾ç½®</td></tr><tr><td><code>application</code></td><td>æŒ‡å®šæµ‹è¯•ç”¨ä¾‹æ‰€ä½¿ç”¨çš„ <code>Application</code>ç±»ï¼Œæ¬¡æŒ‡å®šå°†ä¼šè¦†ç›– AndroidManifestä¸­æŒ‡å®šçš„ Application ç±»</td></tr><tr><td><code>qualifiers</code></td><td>æŒ‡å®šèµ„æºæ–‡ä»¶æ‰€ä½¿ç”¨çš„è¯­è¨€ã€æ¨ªç«–å±ç­‰ï¼Œåœ¨å¤šè¯­è¨€æµ‹è¯•æ—¶å¾ˆæœ‰ç”¨ï¼Œæ–¹æ³•å’Œç±»çº§åˆ«æ³¨è§£éƒ½å¯ä»¥</td></tr><tr><td><code>resourceDir</code></td><td>æŒ‡å®šåŠ è½½èµ„æºæ‰€ä½¿ç”¨çš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸º<code>res</code></td></tr><tr><td><code>assetDir</code></td><td>æŒ‡å®šåŠ è½½ assert æ–‡ä»¶æ‰€ä½¿ç”¨çš„æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ä¸º<code>assets</code></td></tr><tr><td><code>shadows</code></td><td>æŒ‡å®šè‡ªå®šä¹‰ shadow æ–‡ä»¶ï¼Œå¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ª</td></tr><tr><td><code>instrumentedPackages</code></td><td>å·²ç»è®¾å¤‡åŒ–çš„åŒ…ååˆ—è¡¨</td></tr><tr><td><code>libraries</code></td><td>å·¥ç¨‹æ‰€ä¾èµ–çš„ library æ–‡ä»¶å¤¹ï¼Œå¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªï¼Œé»˜è®¤ä¸º<code>{}</code></td></tr></tbody></table><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Config</span>(manifest = <span class="string">"AndroidManifest.xml"</span>,</span><br><span class="line"><span class="comment">// sdk = 27,</span></span><br><span class="line">minSdk = <span class="number">26</span>,</span><br><span class="line">maxSdk = <span class="number">28</span>,</span><br><span class="line">shadows = CustomShadow.class,</span><br><span class="line">libraries = &#123;</span><br><span class="line">        <span class="string">"path/to/library1"</span>,</span><br><span class="line">        <span class="string">"path/to/library2"</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="meta">@RunWith</span>(RobolectricTestRunner.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RobolectricTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="meta">@Config</span>(qualifiers = <span class="string">"zh-CN"</span>ï¼Œ</span><br><span class="line">           application = CustomApplication.class)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">name</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="alert warning"><p><code>minSdk</code>æˆ–<code>maxSdk</code>ä¸èƒ½åŒæ—¶å’Œ<code>sdk</code>åŒæ—¶å‡ºç°</p></div></li><li><p>gradle æ–‡ä»¶ä¸­é…ç½®ç³»ç»Ÿå±æ€§</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">  testOptions &#123;</span><br><span class="line">    unitTests.all &#123;</span><br><span class="line">      systemProperty <span class="string">'robolectric.dependency.repo.url'</span>, <span class="string">'https://local-mirror/repo'</span></span><br><span class="line">      systemProperty <span class="string">'robolectric.dependency.repo.id'</span>, <span class="string">'local'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="è‡ªå®šä¹‰-runner-åŠ å¿«ä¸‹è½½-jar-åŒ…çš„é€Ÿåº¦"><a class="anchor" href="#è‡ªå®šä¹‰-runner-åŠ å¿«ä¸‹è½½-jar-åŒ…çš„é€Ÿåº¦"></a> è‡ªå®šä¹‰ Runner åŠ å¿«ä¸‹è½½ jar åŒ…çš„é€Ÿåº¦</h2><p>ä»¥ RobolectricTestRunner ä½œä¸ºæ³¨è§£çš„æµ‹è¯•ç”¨ä¾‹åœ¨è¿è¡Œä¹‹å‰ä¼šä¸‹è½½ android-all-x.x.x ç›¸å…³æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªç½‘ç«™ä¸‹è½½é€Ÿåº¦æ˜¯èƒ½æ˜¯é¾Ÿé€Ÿï¼Œæœ‰æ—¶å€™è¿˜ä¼šå‡ºç°ä¸‹è½½å¤±è´¥çš„é—®é¢˜ã€‚è¿™ç§æƒ…å†µå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ Runnerï¼Œæ·»åŠ è‡ªå®šä¹‰çš„ maven åœ°å€ï¼Œä¾‹å¦‚é˜¿é‡Œäº‘ç­‰ã€‚å½“ç„¶ä¹Ÿå¯ä»¥ç¦»çº¿ä¸‹è½½åˆ°<code>&lt;USER_HOME&gt;/.m2/repository/org/robolectric/android-all/xxx/</code>ç›®å½•ä¸‹ï¼Œ<code>xxx</code>ä¸º jar åŒ…çš„ç‰ˆæœ¬å·ã€‚</p><p><code>RoboSettings</code> ç±»ä¸­å®šä¹‰ä¸¤ä¸ªé™æ€å˜é‡<code>mavenRepositoryId</code>å’Œ<code>mavenRepositoryUrl</code>ï¼Œåˆ†åˆ«ä¸º maven ä»“åº“çš„ id å’Œ urlï¼ŒRobolectric æ˜¯é€šè¿‡è¯»å–è¿™ä¸¤ä¸ªçš„å€¼æ¥è·å– maven ä»“åº“åœ°å€ï¼Œå› ä¸ºåªéœ€è¦åœ¨è‡ªå®šä¹‰ Runner ä¸­åˆ†åˆ«åˆ¶å®šè¿™ä¸¤ä¸ªå˜é‡å€¼ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomRobolectricRunner</span> <span class="keyword">extends</span> <span class="title">RobolectricTestRunner</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomRobolectricRunner</span><span class="params">(Class&lt;?&gt; testClass)</span> <span class="keyword">throws</span> InitializationError </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(testClass);</span><br><span class="line"><span class="comment">// è®¾ç½® maven ä»“åº“ id å’Œ url</span></span><br><span class="line">        RoboSettings.setMavenRepositoryId(<span class="string">"aliyun"</span>);</span><br><span class="line">        RoboSettings.setMavenRepositoryUrl(<span class="string">"http://maven.aliyun.com/nexus/content/groups/public/"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœè¦ä¿®æ”¹å…¨å±€é…ç½®ï¼Œåˆ™éœ€è¦åœ¨è‡ªå®šä¹‰ Runner ä¸­é‡å†™<code>buildGlobalConfig</code>æ–¹æ³•ã€‚</p><h2 id="æµ‹è¯•-android-ç»„ä»¶"><a class="anchor" href="#æµ‹è¯•-android-ç»„ä»¶"></a> æµ‹è¯• Android ç»„ä»¶</h2><p>Robolectric æ¡†æ¶ä¸ä»…å¯ä»¥æµ‹è¯• Activity ç­‰ Android å››å¤§ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æµ‹è¯•ä¾‹å¦‚ Dialogã€Toastç­‰ï¼Œä¹Ÿå¯ä»¥æµ‹è¯•æ§ä»¶çš„çŠ¶æ€ã€‚</p><h3 id="activityæµ‹è¯•"><a class="anchor" href="#activityæµ‹è¯•"></a> Activityæµ‹è¯•</h3><p>Activity æµ‹è¯•ä¸»è¦åŒ…æ‹¬ Activity çš„åˆ›å»ºã€ç”Ÿå‘½å‘¨æœŸä»¥åŠ Activity çš„è·³è½¬ç­‰ï¼Œä¸‹é¢åˆ†åˆ«è¿›è¡Œä¸¾ä¾‹ã€‚</p><h4 id="activity-åˆ›å»ºæµ‹è¯•"><a class="anchor" href="#activity-åˆ›å»ºæµ‹è¯•"></a> Activity åˆ›å»ºæµ‹è¯•</h4><p>Robolectric æ¡†æ¶æä¾›äº†<code>ActivityController</code> ç±»æ¥æ“ä½œ Activityï¼Œä¸ä»…å¯ä»¥åˆ›å»º Activityï¼Œè¿˜å¯ä»¥å¯¹ Activity çš„å‘¨æœŸå‡½æ•°è¿›è¡Œæ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">activitySetupTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RobolectricDemoActivity activity = Robolectric.buildActivity(RobolectricDemoActivity.class)</span><br><span class="line">        .create()</span><br><span class="line">        .get();</span><br><span class="line"></span><br><span class="line">    assertNotNull(activity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="activity-ç”Ÿå‘½å‘¨æœŸæµ‹è¯•"><a class="anchor" href="#activity-ç”Ÿå‘½å‘¨æœŸæµ‹è¯•"></a> Activity ç”Ÿå‘½å‘¨æœŸæµ‹è¯•</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">activityLifeCycleTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ActivityController&lt;RobolectricDemoActivity&gt; controller = Robolectric.buildActivity(RobolectricDemoActivity.class);</span><br><span class="line"></span><br><span class="line">    controller.create(); <span class="comment">// ç›¸å½“äºæ‰§è¡Œå®Œ onCreate å‘¨æœŸå‡½æ•°</span></span><br><span class="line">    <span class="comment">// æµ‹è¯• onCreate æ‰§è¡Œä¹‹åçš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">    controller.resume(); <span class="comment">// ç›¸å½“äºæ‰§è¡Œå®Œ onResume å‘¨æœŸå‡½æ•°</span></span><br><span class="line">    <span class="comment">// æµ‹è¯• onResume æ‰§è¡Œä¹‹åçš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">    controller.pause(); <span class="comment">// ç›¸å½“äºæ‰§è¡Œå®Œ onPause å‘¨æœŸå‡½æ•°</span></span><br><span class="line">    <span class="comment">// æµ‹è¯• onPause æ‰§è¡Œä¹‹åçš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">    controller.stop(); <span class="comment">// ç›¸å½“äºæ‰§è¡Œå®Œ onStop å‘¨æœŸå‡½æ•°</span></span><br><span class="line">    <span class="comment">// æµ‹è¯• onStop æ‰§è¡Œä¹‹åçš„çŠ¶æ€</span></span><br><span class="line"></span><br><span class="line">    controller.destroy(); <span class="comment">// ç›¸å½“äºæ‰§è¡Œå®Œ onDestroy å‘¨æœŸå‡½æ•°</span></span><br><span class="line">    <span class="comment">// æµ‹è¯• onDestroy æ‰§è¡Œä¹‹åçš„çŠ¶æ€</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="activity-è·³è½¬æµ‹è¯•"><a class="anchor" href="#activity-è·³è½¬æµ‹è¯•"></a> Activity è·³è½¬æµ‹è¯•</h4><p>ä¸‹é¢æ˜¯æµ‹è¯•ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®èµ·åŠ¨ Activity çš„ç”¨ä¾‹</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">jumpActivityTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RobolectricDemoActivity activity = Robolectric.buildActivity(RobolectricDemoActivity.class)</span><br><span class="line">        .create().get();</span><br><span class="line">    Button button = activity.findViewById(R.id.aty_jump);</span><br><span class="line"></span><br><span class="line">    Intent exceptIntent = <span class="keyword">new</span> Intent(activity, LoginActivity.class);</span><br><span class="line"></span><br><span class="line">    button.performClick(); <span class="comment">// æ¨¡æ‹Ÿç‚¹å‡»æŒ‰é”®</span></span><br><span class="line">    Intent actualIntent = ShadowApplication.getInstance().getNextStartedActivity();</span><br><span class="line"></span><br><span class="line">    assertEquals(exceptIntent.getComponent(), actualIntent.getComponent());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="dialog-æµ‹è¯•"><a class="anchor" href="#dialog-æµ‹è¯•"></a> Dialog æµ‹è¯•</h3><p>æµ‹è¯•ç‚¹å‡»æŒ‰é’®å¼¹å‡º Dialog çš„æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dialogTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RobolectricDemoActivity activity = Robolectric.buildActivity(RobolectricDemoActivity.class)</span><br><span class="line">        .create().get();</span><br><span class="line">    Button button = activity.findViewById(R.id.show_dialog);</span><br><span class="line">    button.performClick();</span><br><span class="line">    ShadowDialog dialog = ShadowApplication.getInstance().getLatestDialog(); <span class="comment">// è·å–æœ€è¿‘å¼¹å‡ºçš„å¯¹è¯æ¡†</span></span><br><span class="line"></span><br><span class="line">    assertNotNull(dialog);</span><br><span class="line">    assertEquals(<span class="string">"DialogTest"</span>, dialog.getTitle());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="toast-æµ‹è¯•"><a class="anchor" href="#toast-æµ‹è¯•"></a> Toast æµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">toastTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RobolectricDemoActivity activity = Robolectric.buildActivity(RobolectricDemoActivity.class)</span><br><span class="line">        .create().get();</span><br><span class="line">    Button button = activity.findViewById(R.id.toast);</span><br><span class="line">    button.performClick();</span><br><span class="line">    Toast toast = ShadowToast.getLatestToast(); <span class="comment">// è·å–æœ€è¿‘å¼¹å‡ºçš„ toast</span></span><br><span class="line"></span><br><span class="line">    assertNotNull(toast);</span><br><span class="line">    assertEquals(<span class="string">"ToastTest"</span>, ShadowToast.getTextOfLatestToast());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ§ä»¶çŠ¶æ€æµ‹è¯•"><a class="anchor" href="#æ§ä»¶çŠ¶æ€æµ‹è¯•"></a> æ§ä»¶çŠ¶æ€æµ‹è¯•</h3><p>åœ¨ Activity èµ·åŠ¨è·å–åˆ°æ§ä»¶ä¹‹åï¼Œå¯ä»¥å¯¹æ§ä»¶çš„çŠ¶æ€è¿›è¡ŒéªŒè¯ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªéªŒè¯æ˜¯å¦å¯ç”¨çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">widgetTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RobolectricDemoActivity activity = Robolectric.buildActivity(RobolectricDemoActivity.class)</span><br><span class="line">        .create().get();</span><br><span class="line">    Button button = activity.findViewById(R.id.toast);</span><br><span class="line"></span><br><span class="line">    assertNotNull(button);</span><br><span class="line">    assertTrue(button.isEnabled());</span><br><span class="line">    assertEquals(<span class="string">"Toast"</span>, button.getText());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="broadcastreceiver-æµ‹è¯•"><a class="anchor" href="#broadcastreceiver-æµ‹è¯•"></a> BroadCastReceiver æµ‹è¯•</h3><p>å¹¿æ’­æ¥æ”¶å™¨çš„æµ‹è¯•ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š</p><ul><li>æ˜¯å¦æ³¨å†Œè¯¥å¹¿æ’­ï¼›</li><li>æ¥æ”¶åˆ°å¹¿æ’­ä¹‹åé€»è¾‘æ˜¯å¦æ­£å¸¸ï¼›</li></ul><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ¥æ”¶å¼¹å‡º Toast çš„ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">receiverTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Intent intent = <span class="keyword">new</span> Intent(<span class="string">"cc.istarx.MyReceiver"</span>);</span><br><span class="line">    intent.putExtra(<span class="string">"receiver_test"</span>, <span class="string">"Receiver Test"</span>);</span><br><span class="line"></span><br><span class="line">    MyReceiver receiver = <span class="keyword">new</span> MyReceiver();</span><br><span class="line">    <span class="comment">// éªŒè¯æ˜¯å¦æ³¨å†Œ</span></span><br><span class="line">    assertTrue(ShadowApplication.getInstance().hasReceiverForIntent(intent));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯é€»è¾‘æ˜¯å¦æ­£ç¡®</span></span><br><span class="line">    ShadowApplication.getInstance().sendBroadcast(intent);</span><br><span class="line">    assertEquals(<span class="string">"Receiver Test"</span>, ShadowToast.getTextOfLatestToast());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="service-æµ‹è¯•"><a class="anchor" href="#service-æµ‹è¯•"></a> Service æµ‹è¯•</h3><p>ä»¥è‡ªå®šä¹‰ IntentService ä¸ºä¾‹ï¼Œservice ä¸»ä½“ä»£ç åŠæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyService</span> <span class="keyword">extends</span> <span class="title">IntentService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onHandleIntent</span><span class="params">(@Nullable Intent intent)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// do something here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serviceTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Intent intent = <span class="keyword">new</span> Intent();</span><br><span class="line"></span><br><span class="line">    MyService service = <span class="keyword">new</span> MyService(<span class="string">"test"</span>);</span><br><span class="line">    service.onHandleIntent(intent);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// verify logical here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="èµ„æºæµ‹è¯•"><a class="anchor" href="#èµ„æºæµ‹è¯•"></a> èµ„æºæµ‹è¯•</h3><p>èµ„æºæµ‹æ˜¯é€šè¿‡<code>@Config(qualifiers = &quot;&quot;)</code>çŸ¥é“ä¸åŒè¯­è¨€ã€åˆ†è¾¨ç‡æˆ–è€…æ¨ªç«–å±ï¼Œå¯¹ä¸åŒçš„èµ„æºè¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * res/values/strings.xml</span></span><br><span class="line"><span class="comment"> * &lt;string name="login_activity_res"&gt;This is Login Activity&lt;/string&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * res/values-zh-rCN/strings.xml</span></span><br><span class="line"><span class="comment"> * &lt;string name="login_activity_res"&gt;This is Login Activity with zh-rCN&lt;/string&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@Config</span>(qualifiers = <span class="string">"zh-rCN"</span>) <span class="comment">// æŒ‡å®šä¸­æ–‡è¯­è¨€</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resourcesTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Context context = RuntimeEnvironment.application;</span><br><span class="line">    String str = context.getResources().getString(R.string.login_activity_res);</span><br><span class="line"></span><br><span class="line">    assertEquals(<span class="string">"This is Login Activity with zh-rCN"</span>, str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="looper-æµ‹è¯•"><a class="anchor" href="#looper-æµ‹è¯•"></a> Looper æµ‹è¯•</h3><p>Looper æµ‹è¯•ä¸»è¦æ˜¯æµ‹è¯•ä»£ç ä¸­ä½¿ç”¨ handlerå¤„ç†æ¶ˆæ¯äº§ç”Ÿå»¶è¿Ÿçš„æƒ…å†µã€‚å‡å¦‚ä½¿ç”¨ hanler å‘é€ä¸€ä¸ªå»¶æ—¶çš„æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œä½†æ˜¯åœ¨æµ‹è¯•ç”¨ä¾‹éªŒè¯çš„è¿‡ç¨‹ä¸­æ¬¡æ¶ˆæ¯ä¸ä¸€å®šè¢«æ‰§è¡Œåˆ°ï¼Œå› æ­¤åç»­çš„éªŒè¯ä¼šäº§ç”Ÿä¸€å®šçš„é”™è¯¯ï¼Œè¿™ç§æƒ…å†µä¸‹éœ€è¦åˆ©ç”¨Looper å•ç‹¬å»æµ‹è¯• handler æ‰€å‘æ¶ˆæ¯çš„é€»è¾‘ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// handle ä»£ç å¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">useHandler</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Handler handler = <span class="keyword">new</span> Handler();</span><br><span class="line">    Message message = <span class="keyword">new</span> Message();</span><br><span class="line">    message.what =<span class="number">1</span>;</span><br><span class="line">    handler.postDelayed(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// do something here;</span></span><br><span class="line">            Log.d(<span class="string">"Looper"</span>, <span class="string">"Looper test."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æµ‹è¯•ä»£ç æ‰§è¡Œ<code>useHandler</code>æ–¹æ³•æ—¶ï¼Œrun å†…éƒ¨çš„é€»è¾‘ä¸ä¼šæ‰§è¡Œï¼ŒLog ä¸ä¼šæ‰“å°ï¼Œå› æ­¤æµ‹è¯•ç”¨ä¾‹ä»£ç éœ€è¦å•ç‹¬è¿è¡Œæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">looperTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    RobolectricLooperDemo.useHandle();</span><br><span class="line"></span><br><span class="line">    ShadowLooper looper = ShadowLooper.getShadowMainLooper();</span><br><span class="line">    looper.runOneTask();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// verify</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ run æ–¹æ³•å°†ä¼šå¾—åˆ°æ‰§è¡Œã€‚</p><h2 id="è‡ªå®šä¹‰-shadow"><a class="anchor" href="#è‡ªå®šä¹‰-shadow"></a> è‡ªå®šä¹‰ Shadow</h2><p>Shadow ä½œä¸º Robolectric æ¡†æ¶çš„æ ¸å¿ƒæ‰€åœ¨ï¼Œæ˜¯è¯¥æ¡†æ¶çš„é‡ä¸­ä¹‹é‡ã€‚Shadow æ„ä¸ºå½±å­ï¼ŒRobolectric æ¡†æ¶å¯¹ <code>android.jar</code>åŒ…ä¸­å¤§éƒ¨åˆ†ç±»éƒ½åšäº†å½±å­ï¼Œä¾‹å¦‚<code>Activity</code>çš„å½±å­ä¸º<code>ShadowActivity</code>ã€<code>View</code> çš„å½±å­ä¸º<code>ShadowView</code>ã€‚è™½ç„¶ Robolectric åšäº†å¾ˆå¤šå½±å­ï¼Œä½†æ˜¯ä¸ä¸€å®šæ»¡è¶³æˆ‘ä»¬é¡¹ç›®æµ‹è¯•æ‰€éœ€ã€‚Robolectric è¿˜æ”¯æŒè‡ªå®šä¹‰å½±å­ï¼Œå¹¶ç”¨<code>@config</code>æ³¨è§£æŒ‡å®šå³å¯ã€‚</p><p>å‡å¦‚æœ‰ç±»æ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Demo"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡ªå®šä¹‰ Shadow çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>ä»¥<code>@Implements(Demo.class)</code>æ³¨è§£è‡ªå®šä¹‰çš„ Shadow ç±»</li><li>ä¸ºè‡ªå®šä¹‰ Shadow æä¾›äº†ä¸€ä¸ª public çš„æ„é€ å‡½æ•°ï¼›</li><li>å¯¹åŸå§‹ç±»çš„æ–¹æ³•ä»¥<code>@Implementation</code>,å¹¶åšè‡ªå®šä¹‰å®ç°ï¼›</li><li>åœ¨ä½¿ç”¨çš„æµ‹è¯•ç±»æˆ–è€…æµ‹è¯•æ–¹æ³•ä¸Šä»¥<code>@Config(shadows = ShadowDemo.class)</code>;</li></ul><p>æ¥ä¸‹æ¥åœ¨æ‰§è¡Œæœ¬ä½“ç±»æ–¹æ³•çš„æ—¶å€™å°±ä¼šç”± Robolectric æ¡†æ¶è½¬åˆ°æ‰§è¡Œè‡ªå®šä¹‰ Shadow å†…éƒ¨çš„æ–¹æ³•ã€‚å¦å¤–ï¼Œè‡ªå®šä¹‰ Shadow ä¸ä»…å¯ä»¥å®ç°æœ¬ä½“çš„æ–¹æ³•ï¼Œè¿˜å¯ä»¥æ·»åŠ è‡ªå®šä¹‰æ–¹æ³•ä½œä¸ºæœ¬ä½“çš„ä¸€ç§æ‰©å±•ã€‚ä¸Šè¿°ç±»çš„è‡ªå®šä¹‰ Shadow å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Implements</span>(Demo.class)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShadowDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ShadowDemo</span><span class="params">()</span></span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Implementation</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Shadow Demo implementation"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Config</span>(shadows = ShadowDemo.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">customShadowTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Demo demo = <span class="keyword">new</span> Demo();</span><br><span class="line">    assertEquals(<span class="string">"Shadow Demo implementation"</span>, demo.getStr());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨çŸ¥é“æœ¬ä½“å¯¹è±¡çš„æƒ…å†µä¸‹ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•å»è·å–å¯¹åº”çš„å½±å­å¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Demo demo = <span class="keyword">new</span> Demo();</span><br><span class="line">ShadowDemo shadowDemo = Shadows.shadowOf(demo);</span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a class="anchor" href="#å°ç»“"></a> å°ç»“</h2><p>Robolectric æ¡†æ¶åœ¨ Android æµ‹è¯•ä¸­æœ‰ç€å¾ˆå¤§çš„ä¾¿åˆ©æ€§ï¼Œå¯ä»¥å¿«é€Ÿç¼–å†™å¹¶è¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚åœ¨æˆ‘å†™æµ‹è¯•ç”¨ä¾‹çš„è¿‡ç¨‹ä¸­ï¼ŒRobolectric æ¡†æ¶ç›¸å…³çš„å äº†å¾ˆå¤§çš„æ¯”ä¾‹ã€‚ä¸Šè¿°æ‰€è®²åˆ°çš„åªæ˜¯ Robolectric æ¡†æ¶å¾ˆå°çš„ä¸€éƒ¨åˆ†ï¼Œå…¶å®ƒç”¨æ³•è¿˜éœ€è¦é˜…è¯»æ–‡æ¡£æˆ–è€…çœ‹æºä»£ç è¿›è¡ŒæŒ–æ˜ã€‚</p><p>æœ¬æ–‡æ‰€æœ‰çš„ç¤ºç¤ºä¾‹ä»£ç ï¼š<a href="https://github.com/cherlas/BlogDemo/tree/master/robolectricdemo">Robolectric Demo</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Robolectric æ¡†æ¶æ˜¯ä¸€æ¬¾å¯ä»¥åœ¨JVM ä¸Šè¿è¡Œ Android ç›¸å…³ä»£ç çš„æ¡†æ¶ï¼Œåœ¨ Android å•å…ƒæµ‹è¯•æ€»èµ·åˆ°è‡³å…³é‡è¦çš„ä½œç”¨ã€‚å®ƒæ—¢æœ‰å‡å°‘ç¼–è¯‘ã€æµ‹è¯•ç”¨ä¾‹è¿è¡Œçš„æ—¶é—´ç­‰ä¼˜ç‚¹ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¨‹åºçŒ¿è¿›åŒ–ä¹‹è·¯" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/"/>
    
      <category term="è‡ªåŠ¨åŒ–æµ‹è¯•" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="è‡ªåŠ¨åŒ–æµ‹è¯•" scheme="http://www.istarx.cn/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
      <category term="unit-test" scheme="http://www.istarx.cn/tags/unit-test/"/>
    
      <category term="robolectric" scheme="http://www.istarx.cn/tags/robolectric/"/>
    
  </entry>
  
  <entry>
    <title>å•å…ƒæµ‹è¯•ä¹‹â€” PowerMock æ¡†æ¶</title>
    <link href="http://www.istarx.cn/2018/05/02/powermock-framework/"/>
    <id>http://www.istarx.cn/2018/05/02/powermock-framework/</id>
    <published>2018-05-02T13:29:46.000Z</published>
    <updated>2019-02-18T16:56:27.118Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>PowerMock æ¡†æ¶ä¹Ÿæ˜¯å±äº Mock æ¡†æ¶çš„ä¸€ç§ï¼Œå®ƒæ˜¯ä» EasyMock å’Œ Mockito ä¸¤ä¸ªæ¡†æ¶æ‰©å±•è€Œæ¥çš„ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å¯ä»¥ mock æˆ–è€…å±è”½ä¸€äº›ç§æœ‰ã€é™æ€ã€final ç­‰æ–¹æ³•ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#android-%E9%85%8D%E7%BD%AE-powermock">Android é…ç½® PowerMock</a></li><li><a href="#%E5%9F%BA%E6%9C%AC%E6%B3%A8%E9%87%8A">åŸºæœ¬æ³¨é‡Š</a></li><li><a href="#%E6%93%8D%E4%BD%9C%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95">æ“ä½œç§æœ‰å±æ€§å’Œæ–¹æ³•</a></li><li><a href="#%E5%B1%8F%E8%94%BD%E6%89%A7%E8%A1%8C">å±è”½æ‰§è¡Œ</a></li><li><a href="#mock-%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95">Mock é™æ€æ–¹æ³•</a></li><li><a href="#mock-%E7%A7%81%E6%9C%89%E6%96%B9%E6%B3%95">Mock ç§æœ‰æ–¹æ³•</a></li><li><a href="#mock-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">Mock æ„é€ å‡½æ•°</a></li><li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li></ul></p><p>PowerMock æ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œæ˜¯ä¸€ç§â€œå¼ºå¤§â€çš„ mock æ¡†æ¶ã€‚PowerMock å’Œ Mock ä¸€æ ·ï¼Œä¸»è¦ä¸ºäº†è§£å†³ä»£ç ä¸­éš¾ä»¥æ„å»ºæˆ–è€…éš¾ä»¥æµ‹è¯•éƒ¨åˆ†ï¼Œå®ƒé€šè¿‡åœ¨æµ‹è¯•ç”¨ä¾‹è¿è¡ŒæœŸé—´ä¿®æ”¹å­—èŠ‚ç æ–‡ä»¶å®ç° mockã€stub æˆ–å…¶å®ƒåŠŸèƒ½ã€‚å®ƒæ¶µç›–äº† <code>EasyMock</code>å’Œ<code>Mockito</code>çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒæ—¶å¯¹è¿™ä¸¤ä¸ªæ¡†æ¶è¿›è¡Œäº†æ‰©å±•ï¼Œå¼¥è¡¥äº†è¿™ä¸¤ä¸ªæ¡†æ¶ä¸èƒ½ mock ç§æœ‰ã€é™æ€ã€final æ–¹æ³•åŠå˜é‡ç­‰ç¼ºç‚¹ã€‚</p><p>PowerMock æ¡†æ¶æ”¯æŒ JUnit ä»¥åŠ TestNGï¼ŒåŒæ—¶æ”¯æŒå¤šä¸ªç‰ˆæœ¬çš„ JUnit ç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸º <code>JUnit 4.4+</code>å’Œ<code>JUnit 4.0~4.3</code>ï¼Œåœ¨ PowerMock 2.0 ç‰ˆæœ¬ä¹‹åï¼ŒJUnit 3 å·²è¢«åºŸé™¤ã€‚</p><h2 id="android-é…ç½®-powermock"><a class="anchor" href="#android-é…ç½®-powermock"></a> Android é…ç½® PowerMock</h2><p>Android Studio ä¸­ä½¿ç”¨ PowerMock æ¡†æ¶éœ€è¦æ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">// powermock framework</span></span><br><span class="line">    <span class="keyword">def</span> powerMockVersion = <span class="string">'2.0.0-beta.5'</span></span><br><span class="line">    <span class="comment">// powermock junit4</span></span><br><span class="line">    testImplementation <span class="string">"org.powermock:powermock-module-junit4:$&#123;powerMockVersion&#125;"</span></span><br><span class="line">    <span class="comment">// powermock with mockito2</span></span><br><span class="line">    testImplementation <span class="string">"org.powermock:powermock-api-mockito2:$&#123;powerMockVersion&#125;"</span></span><br><span class="line">    <span class="comment">// powermock with easymock</span></span><br><span class="line">    testImplementation <span class="string">"org.powermock:powermock-api-easymock:$&#123;powerMockVersion&#125;"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬æ³¨é‡Š"><a class="anchor" href="#åŸºæœ¬æ³¨é‡Š"></a> åŸºæœ¬æ³¨é‡Š</h2><ul><li><p><code>@RunWith(PowerMockRunner.class)</code></p><p>å¦‚æœæµ‹è¯•ç”¨ä¾‹ä½¿ç”¨ PowerMock æ¡†æ¶è¿è¡Œï¼Œåˆ™éœ€è¦åœ¨æµ‹è¯•ç±»å‰æ·»åŠ <code>@RunWith(PowerMockRunner.class)</code>æ³¨é‡Šï¼Œ<code>PowerMockRunner</code>ä¹Ÿå¯ä»¥æ›¿æ¢æˆè‡ªå®šä¹‰çš„ç»§æ‰¿è‡ª<code>PowerMockRunner</code>çš„ Runnerï¼›</p></li><li><p><code>@PrepareForTest({SomeClass.class}, ...)</code></p><p>æ­¤æ³¨é‡Šæ„ä¸ºå‘Šè¯‰ PowerMock å‡†å¤‡ä¸€äº›æµ‹è¯•æ‰€å¿…é¡»çš„ç±»ï¼ŒåŒ…æ‹¬ä¸€äº› final ä¿®é¥°çš„ç±»ï¼ŒåŒ…å«é™æ€æ–¹æ³•æˆ–å˜é‡ã€ç§æœ‰æ–¹æ³•æˆ–å˜é‡ä»¥åŠ native ä¿®é¥°çš„æ–¹æ³•ã€‚</p><p>è¯¥æ³¨é‡Šå¯ä»¥ç”¨æ¥æ³¨é‡ŠæŸä¸€(äº›)æµ‹è¯•ç±»ï¼Œä¹Ÿå¯ä»¥ä¿®é¥°ç‰¹å®šæµ‹è¯•æ–¹æ³•ï¼Œè¿™å–å†³äºä½ æµ‹è¯•ç”¨ä¾‹çš„è®¾è®¡ï¼Œå¦‚æœç”¨æ¥æ³¨é‡Šæµ‹è¯•ç±»ï¼Œåˆ™ PowerMock ä¼šä¸ºè¯¥æµ‹è¯•ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•å‡†å¤‡æ‰€æŒ‡å®šçš„ç±»ï¼Œå¦‚æœåœ¨æµ‹è¯•ç±»å’Œæµ‹è¯•æ–¹æ³•éƒ½ç”¨<code>PrepareForTest()æ³¨é‡Š</code>ï¼Œåˆ™æµ‹è¯•ç±»æ–¹æ³•çš„æ³¨é‡Šä¼šè¦†ç›–æµ‹è¯•ç±»çš„æ³¨é‡Šã€‚</p></li><li><p><code>@PrepareOnlyThisForTest({SomeClass.class}, ...)</code></p><p>å’Œ<code>PrepareForTest()</code>æ–¹æ³•ç±»ä¼¼ï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äº<code>PrepareOnlyThisForTest()</code>åªé’ˆå¯¹æŸä¸ªç‰¹å®šçš„ç±»ï¼Œä¸å¯¹ç±»çš„å±‚æ¬¡ç»“æ„è¿›è¡Œæ“ä½œï¼Œä½†æ˜¯<code>PrepareForTest()</code>ä¼šå¯¹æ•´ä¸ªç±»çš„å±‚æ¬¡ç»“æ„è¿›è¡Œæ“ä½œã€‚</p></li><li><p><code>@PrepareEverythingForTest()</code></p><p>æ­¤æ³¨é‡Šæ„ä¸ºå‡†å¤‡é™¤ç‰¹å®šçš„ç³»ç»Ÿå’Œæµ‹è¯•ç›¸å…³ç±»ä»¥å¤–çš„æ‰€æœ‰ç±»ç”¨æ¥æµ‹è¯•ï¼Œä½†æ˜¯åŒæ ·ä¼šåŠ è½½é™æ€åˆå§‹åŒ–å—ã€‚</p></li><li><p><code>@PoweMockIgnore</code></p><p>åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼ŒPowerMock ä¼šä½¿ç”¨<code>MockClassLoader</code>åŠ è½½æ‰€æœ‰çš„ç±»ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨ PowerMock çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä¾‹å¦‚åœ¨ PowerMock å’Œ Robolectric æ¡†æ¶æ­é…ä½¿ç”¨æ—¶ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨<code>@PowerMockIgnore</code>å¯¹å…¶è¿›è¡Œæ³¨é‡Šï¼Œå…¶å‚æ•°å¯ä»¥æ˜¯æŸä¸€ä¸ªç±»ä¹Ÿå¯ä»¥åŒ…ï¼Œä¾‹å¦‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(PowerMockRunner.class)</span><br><span class="line"><span class="meta">@PowerMockIgnore</span>(&#123;<span class="string">"cc.istarx.MainActivity"</span>,<span class="string">"android.*"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExamplePowerMockTest</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä½¿ç”¨<code>@PowerMockIgnore</code>æ³¨é‡Šçš„æœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯å¿…é¡»å¯¹æ¯ä¸ªä¸åŒçš„æµ‹è¯•ç±»éƒ½éœ€è¦è¯¥æ³¨é‡Šï¼Œè¿™æ ·å°±é€ æˆäº†ç›¸åŒçš„ä»£ç åœ¨å¾ˆå¤šå¤„éƒ½å­˜åœ¨ï¼Œç»™ç»´æŠ¤å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ã€‚å¯¹äºè¿™ç§æƒ…å†µæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³ï¼š</p><ul><li><p>ç¼–å†™åŸºç±»ï¼Œå¹¶æŠŠå…¬æœ‰çš„ç±»å’ŒåŒ…åœ¨åŸºç±»ä¸­ä½¿ç”¨<code>@PowerMockIgnore</code>æ³¨é‡Šï¼Œå¹¶è®©æ‰€æœ‰çš„æµ‹è¯•ç±»éƒ½ç»§æ‰¿è¯¥åŸºç±»</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(PowerMockRunner.class)</span><br><span class="line"><span class="meta">@PowerMockIgnore</span>(&#123;<span class="string">"cc.istarx.MainActivity"</span>,<span class="string">"android.*"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseClass</span> </span>&#123; </span><br><span class="line">    <span class="comment">// åŸºç±»</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> TestClass1 extends BaseClass &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// do some test here</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆ©ç”¨ PowerMock 1.7.0 ç‰ˆæœ¬ä¹‹åå¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶æŒ‡å®šå¿½ç•¥åŠ è½½çš„ç±»å’ŒåŒ…ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">powermock.global-ignore=<span class="string">"cc.istarx.MainActivity"</span> <span class="comment">// å•ä¸ªç±»</span></span><br><span class="line">powermock.global-ignore=<span class="string">"cc.istarx.MainActivity"</span>,<span class="string">"android.*"</span> <span class="comment">// å¤šä¸ªç±»å’ŒåŒ…</span></span><br></pre></td></tr></table></figure><p>æ‰€æœ‰ç”¨æˆ·å®šä¹‰çš„é…ç½®æ–‡ä»¶åœ¨ç›®å½•<code>org/powermock/extensions/configuration.properties</code>ä¸­ã€‚å¦‚æœåœ¨æŸä¸€æµ‹è¯•ç±»ä¸­éœ€è¦å–æ¶ˆè¿™äº›é…ç½®ï¼Œåˆ™åªéœ€å°†<code>globalIgnore</code>å€¼ç½®ä¸º<code>false</code>å³å¯ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(PowerMockRunner.class)</span><br><span class="line"><span class="meta">@PowerMockIgnore</span>(globalIgnore = <span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">public</span> TestClass &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><div class="alert warning"><p>å½“<code>@PrepareForTest</code>ã€<code>@PrepareOnlyThisForTest</code>ã€<code>@PrepareEverythingForTest</code>ã€<code>@PowerMockIgnore</code>æ³¨é‡ŠåŒæ—¶å‡ºç°æ—¶ï¼Œ<code>@PrepareForTest</code>ã€<code>@PrepareOnlyThisForTest</code>ä¼˜å…ˆçº§è¦é«˜äº<code>@PowerMockIgnore</code>ï¼Œä½†æ˜¯ <code>@PrepareEverythingForTest</code>çš„ä¼˜å…ˆçº§è¦ä½äº<code>@PowerMockIgnore</code>ã€‚</p></div></li></ul><h2 id="æ“ä½œç§æœ‰å±æ€§å’Œæ–¹æ³•"><a class="anchor" href="#æ“ä½œç§æœ‰å±æ€§å’Œæ–¹æ³•"></a> æ“ä½œç§æœ‰å±æ€§å’Œæ–¹æ³•</h2><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ºé™ä½ä»£ç çš„ä¾µå…¥æ€§ï¼Œä¸ä»‹æ„ä¿®æ”¹ç§æœ‰å˜é‡æˆ–è€…æ“ä½œç§æœ‰æ–¹æ³•å’Œæ„é€ å‡½æ•°ã€‚ä½†æ˜¯ä¸ºäº†è¾¾åˆ°æ›´é«˜çš„è¦†ç›–ç‡ï¼Œé˜²æ­¢åé¢ä»£ç é‡æ„ç ´ååŸæœ‰åŠŸèƒ½ï¼Œè¿™ç§æƒ…å†µä¸‹æ“ä½œç§æœ‰å˜é‡ã€æ–¹æ³•ä»¥åŠæ„é€ å‡½æ•°æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p><p>PowerMock æä¾›äº†ä¸€ä¸ªç”¨æ¥æ“ä½œç§æœ‰å±æ€§ã€æ–¹æ³•ä»¥åŠæ„å»ºå‡½æ•°ï¼Œè¯¥ç±»ä¸­æä¾›äº†æ“ä½œç§æœ‰å˜é‡ã€æ–¹æ³•ã€æ„é€ å‡½æ•°çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Whitebox.newInstance(Class&lt;T&gt; classToInstantiate); <span class="comment">// ä¸æ‰§è¡Œæ„é€ å‡½æ•°è€Œå®ä¾‹åŒ–</span></span><br><span class="line">Whitebox.ssetInternalState(Object object, Class&lt;?&gt; fieldType, Object value); <span class="comment">// ç§æœ‰å±æ€§çš„èµ‹å€¼</span></span><br><span class="line">Whitebox.invokeConstructor(Class&lt;T&gt; classThatContainsTheConstructorToTest, Class&lt;?&gt;[] parameterTypes, Object[] arguments); <span class="comment">// æ‰§è¡Œç§æœ‰çš„æ„å»ºå‡½æ•°</span></span><br><span class="line">Whitebox.invokeMethod(Class&lt;?&gt; klass, Object... arguments); <span class="comment">// æ‰§è¡Œç§æœ‰æ–¹æ³•</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­å¦‚ä¸‹ï¼š</p><p>è¢«æµ‹è¯•ç±»:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WhiteboxDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> WhiteboxDemo demo;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">WhiteboxDemo</span><span class="params">()</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WhiteboxDemo <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (demo == <span class="keyword">null</span>) &#123;</span><br><span class="line">            demo = <span class="keyword">new</span> WhiteboxDemo();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> demo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> name; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123; <span class="keyword">this</span>.name = name; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WhiteBoxTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    String name = <span class="string">"whitebox"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸æ‰§è¡Œæ„é€ å‡½æ•°è€Œå®ä¾‹åŒ–</span></span><br><span class="line">    WhiteboxDemo demo = Whitebox.newInstance(WhiteboxDemo.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™æ€ç§æœ‰å±æ€§çš„èµ‹å€¼</span></span><br><span class="line">    Whitebox.setInternalState(WhiteboxDemo.class, <span class="string">"demo"</span>, demo);</span><br><span class="line">    <span class="comment">// éé™æ€ç§æœ‰å±æ€§çš„èµ‹å€¼</span></span><br><span class="line">    Whitebox.setInternalState(demo, <span class="string">"name"</span>, name);</span><br><span class="line">    Field field = Whitebox.getField(WhiteboxDemo.class, <span class="string">"name"</span>);</span><br><span class="line">    assertEquals(name, field.get(demo));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œç§æœ‰çš„æ„å»ºå‡½æ•°</span></span><br><span class="line">    WhiteboxDemo demo1 = Whitebox.invokeConstructor(WhiteboxDemo.class);</span><br><span class="line">    assertNotNull(demo1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œç§æœ‰æ–¹æ³•</span></span><br><span class="line">    Whitebox.invokeMethod(demo, <span class="string">"setName"</span>,<span class="string">"setName"</span>);</span><br><span class="line">    assertEquals(<span class="string">"setName"</span>, Whitebox.getInternalState(demo, <span class="string">"name"</span>)); <span class="comment">// è·å–ç§æœ‰å˜é‡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å±è”½æ‰§è¡Œ"><a class="anchor" href="#å±è”½æ‰§è¡Œ"></a> å±è”½æ‰§è¡Œ</h2><p>åœ¨è¢«æµ‹ä»£ç ä¸­ï¼ŒæŸäº›æ–¹æ³•çš„æ‰§è¡Œå¯¹æµ‹è¯•å¸¦æ¥äº†é˜»ç¢ï¼Œæ¯”å¦‚ <code>System.loadLibrary()</code>ç­‰ã€‚ç±»ä¼¼çš„ç³»ç»Ÿæ–¹æ³•å¯ä»¥åˆ©ç”¨ PowerMock æ¡†æ¶å¯ä»¥æ¨¡æ‹Ÿå‡ºæ¥ï¼Œä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œæ¯”å¦‚æŸä¸ªå˜é‡ã€æ„é€ å‡½æ•°ç­‰ï¼Œä¸èƒ½åˆ©ç”¨æ¨¡æ‹Ÿçš„æ–¹æ³•è§£å†³è¿™ç±»é—®é¢˜ï¼ŒPowerMock æä¾›äº†ä¸€ç§æ–¹æ³•å¯ä»¥ç»•è¿‡è¿™äº›æ–¹æ³•ã€å˜é‡ã€æ„é€ å‡½æ•°çš„æ‰§è¡Œï¼Œæå¤§çš„æé«˜äº†æµ‹è¯•çš„ä¾¿åˆ©æ€§ã€‚</p><p>PowerMock ç”¨æ¥ç»•è¿‡æ‰§è¡Œçš„æ–¹æ³•æ˜¯<code>suppress()</code>ï¼Œè¯¥æ–¹æ³•åœ¨<code>org.powermock.api.support.membermodification.MemberModifier</code>ç±»ä¸­ï¼Œè¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ <code>Mehtod</code>ã€<code>Fied</code>ã€<code>constructor</code>ï¼Œå¦‚æœåŒæ—¶ç»•è¿‡å¤šä¸ª<code>Field</code>æˆ–è€…<code>constructor</code>ï¼Œåˆ™å¯ä»¥æ„å»ºä¸€ç»´æ•°ç»„è¿›è¡Œä¼ é€’ã€‚</p><p>ç»•è¿‡æŸä¸ªæ–¹æ³•ã€å˜é‡ã€æ„é€ å‡½æ•°éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p><ul><li>æµ‹è¯•ç”¨ä¾‹æ‰€åœ¨çš„æµ‹è¯•ç±»å¿…é¡»è¦ä»¥<code>@RunWith(PowerMockRunner.class)</code>è¿›è¡Œæ³¨é‡Šï¼›</li><li>å¦‚æœè¦å±è”½æŸä¸ªç±»çš„é™æ€åˆå§‹åŒ–å—ï¼Œåˆ™éœ€è¦å¯¹å¯¹æµ‹è¯•ç±»æ·»åŠ æ³¨é‡Š<code>@SuppressStaticInitializationFor(class.want.to.suppress.ClassName)</code>;</li><li>å¦‚æœè¦å¯¹æŸä¸ªç±»çš„æ„é€ å‡½æ•°ã€æ–¹æ³•ã€å˜é‡è¿›è¡Œå±è”½ï¼Œåˆ™éœ€è¦åœ¨<code>æµ‹è¯•ç±»</code>ä¹‹å‰æ·»åŠ <code>@PrepareForTest()</code>æ³¨é‡Šï¼›</li></ul><p>ä¾‹å¦‚æœ‰å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SuppressDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String firstName = <span class="string">"test"</span>;</span><br><span class="line">    <span class="keyword">public</span> String secondName;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        id = <span class="number">123</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SuppressDemo</span><span class="params">(String secondName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.secondName = secondName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecondName</span> <span class="params">(String secondName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.secondName = secondName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">updateSecondName</span> <span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        setSecondName(name);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.secondName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith</span>(PowerMockRunner.class)</span><br><span class="line"><span class="comment">// å±è”½é™æ€åˆå§‹åŒ–å—</span></span><br><span class="line"><span class="meta">@SuppressStaticInitializationFor</span>(<span class="string">"cc.istarx.powermockdemo.SuppressDemo"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExampleTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">suppressTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// å±è”½æ–¹æ³•çš„æ‰§è¡Œ</span></span><br><span class="line">        suppress(method(SuppressDemo.class,<span class="string">"setSecondName"</span>, String.class));</span><br><span class="line">        <span class="comment">// å±è”½æ„é€ å‡½æ•°ï¼Œ</span></span><br><span class="line">        suppress(constructor(SuppressDemo.class,String.class));</span><br><span class="line">        <span class="comment">// å±è”½å˜é‡</span></span><br><span class="line">        suppress(field(SuppressDemo.class,<span class="string">"firstName"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å±è”½æ„é€ å‡½æ•°ä¹‹åå¯ä»¥åˆ©ç”¨ WhiteBox.newInstance() æ–¹æ³•å®ä¾‹åŒ–å‚æ•°</span></span><br><span class="line">        SuppressDemo demo = Whitebox.newInstance(SuppressDemo.class);</span><br><span class="line">        <span class="comment">// firstName å˜é‡è¢«å±è”½ï¼Œä¸‹é¢è¿™å¥æ–­è¨€ä½çœŸ</span></span><br><span class="line">        assertNull(demo.getFirstName());</span><br><span class="line">        <span class="comment">// é™æ€åˆå§‹åŒ–å—è¢«å±è”½ï¼Œä¸‹é¢è¿™å¥æ–­è¨€ä½çœŸ</span></span><br><span class="line">        assertEquals(<span class="number">0</span>, SuppressDemo.id);</span><br><span class="line">        <span class="comment">// å¯¹è±¡æˆå‘˜å˜é‡éƒ½æ˜¯é»˜è®¤å€¼</span></span><br><span class="line">        assertNull(demo.secondName);</span><br><span class="line">        <span class="comment">// ç”±äº setSecondName() æ–¹æ³•è¢«å±è”½ï¼Œæ‰€ä»¥ secondName ä¸ä¼šè¢«æ›´æ–°</span></span><br><span class="line">        assertNull(demo.updateSecondName(<span class="string">"suppress"</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="mock-é™æ€æ–¹æ³•"><a class="anchor" href="#mock-é™æ€æ–¹æ³•"></a> Mock é™æ€æ–¹æ³•</h2><p>åœ¨å®é™…é¡¹ç›®æµ‹è¯•ä¸­ï¼Œè¢«æµ‹ä»£ç ä¸­éš¾å…ä¼šæœ‰é™æ€æ–¹æ³•ï¼Œç»™æµ‹è¯•å¸¦æ¥äº†ä¸€å®šçš„éš¾åº¦ã€‚PowerMock æ¯” Mockito æ¡†æ¶å¥½çš„åœ°æ–¹å°±æ˜¯å¯ä»¥å¯¹é™æ€ã€ç§æœ‰ã€finalç±»å‹çš„æ–¹æ³•ç­‰è¿›è¡Œæ¨¡æ‹Ÿã€‚PoweMock åœ¨æ¨¡æ‹Ÿä¸€ä¸ªé™æ€æ–¹æ³•æ—¶æœ‰ä¸€å¥—å›ºå®šçš„æµç¨‹ï¼Œä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p><ul><li><p>ä»¥<code>@RunWith(PowerMockRunner.class)</code>å¯¹æµ‹è¯•ç±»è¿›è¡Œæ³¨é‡Šï¼›</p></li><li><p>å¯¹åŒ…å«é™æ€æ–¹æ³•çš„ç±»ä»¥<code>@PrepareForTest()</code>æ³¨é‡Šï¼Œæ‰€å‡†å¤‡çš„ç±»ä¸ºåŒ…å«é™æ€æ–¹æ³•çš„ç±»ï¼Œæ¬¡æ³¨é‡Šå¯ä»¥æ˜¯ç±»çº§åˆ«ä¹Ÿå¯ä»¥æ˜¯æµ‹è¯•æ–¹æ³•çº§åˆ«ï¼›</p></li><li><p>åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">PowerMock.mockStatic(WithStaticMethod.class);</span><br><span class="line">when(WithStaticMethod.getNum()).thenReturn(<span class="number">11</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œé™æ€æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line">PowerMockito.verifyStatic(WithStaticMethod.class);</span><br><span class="line">WithStaticMethod.getNum();</span><br></pre></td></tr></table></figure></li><li><p>åœ¨<code>verify</code>çš„æ—¶å€™åŒæ ·å¯ä»¥è¿›è¡Œå‚æ•°åŒ¹é…æˆ–è€…æ¬¡æ•°éªŒè¯:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">PowerMockito.verifyStatic(WithStaticMethod.class, times(<span class="number">1</span>));</span><br><span class="line">WithStaticMethod.getNumWithNum(anyInt());</span><br></pre></td></tr></table></figure><div class="alert warning"><p>å¿…é¡»åœ¨æ¯ä¸ªé™æ€æ–¹æ³•çš„éªŒè¯ä¹‹å‰è°ƒç”¨<code>PowerMockito.verifyStatic(Static.class)</code></p></div></li></ul><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¢«æµ‹è¯•ä»£ç </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WithStaticMethod</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">999</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getNumWithNum</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æµ‹è¯•ç”¨ä¾‹ä»£ç </span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="meta">@PrepareForTest</span>(WithStaticMethod.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mockStaticMethodTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    PowerMockito.mockStatic(WithStaticMethod.class);</span><br><span class="line">    when(WithStaticMethod.getNum()).thenReturn(<span class="number">11</span>);</span><br><span class="line">    when(WithStaticMethod.getNumWithNum(<span class="number">9</span>)).thenReturn(<span class="number">19</span>);</span><br><span class="line"></span><br><span class="line">    assertEquals(<span class="number">11</span>, WithStaticMethod.getNum());</span><br><span class="line">    assertEquals(<span class="number">19</span>, WithStaticMethod.getNumWithNum(<span class="number">9</span>));</span><br><span class="line"></span><br><span class="line">    PowerMockito.verifyStatic(WithStaticMethod.class, times(<span class="number">1</span>));</span><br><span class="line">    WithStaticMethod.getNum();</span><br><span class="line">    PowerMockito.verifyStatic(WithStaticMethod.class, atLeast(<span class="number">1</span>));</span><br><span class="line">    WithStaticMethod.getNumWithNum(eq(<span class="number">9</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="mock-ç§æœ‰æ–¹æ³•"><a class="anchor" href="#mock-ç§æœ‰æ–¹æ³•"></a> Mock ç§æœ‰æ–¹æ³•</h2><p>PowerMock æä¾›äº†éªŒè¯ç§æœ‰æ–¹æ³•çš„æ–¹æ³•<code>verifyPrivate(tested).invoke(&quot;privateMethodName&quot;, argument1)</code>ï¼Œä¾‹å¦‚ï¼š</p><p>å¾…æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VerifyPrivateAndConstructor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">privateMethod</span><span class="params">(String str)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStr</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> privateMethod(<span class="string">"test"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verifyPrivateMethod</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    VerifyPrivateAndConstructor pr = mock(VerifyPrivateAndConstructor.class);</span><br><span class="line"></span><br><span class="line">    when(pr.getStr()).thenCallRealMethod();</span><br><span class="line">    pr.getStr();</span><br><span class="line"></span><br><span class="line">    PowerMockito.verifyPrivate(pr, times(<span class="number">1</span>)).invoke(<span class="string">"privateMethod"</span>, <span class="string">"test"</span>);</span><br><span class="line">    pr.getStr();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="mock-æ„é€ å‡½æ•°"><a class="anchor" href="#mock-æ„é€ å‡½æ•°"></a> Mock æ„é€ å‡½æ•°</h2><p>Mock æ„é€ å‡½æ•°æ—¶å¿…é¡»ç”¨<code>@PrepareForTest(XXX.class)</code>å¯¹æµ‹è¯•æ–¹æ³•æˆ–è€…ç±»è¿›è¡Œæ³¨é‡Šï¼Œå¹¶ç”¨<code>PowerMock.whenNew()</code>å¯¹æ„é€ å‡½æ•°è¿›è¡Œ mockï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span>(expected = IllegalArgumentException.class)</span><br><span class="line"><span class="meta">@PrepareForTest</span>(VerifyPrivateAndConstructor.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mockConstructorTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    whenNew(VerifyPrivateAndConstructor.class).withAnyArguments().thenThrow(<span class="keyword">new</span> IllegalArgumentException(<span class="string">"error message"</span>));</span><br><span class="line">    <span class="keyword">new</span> VerifyPrivateAndConstructor(<span class="string">"test"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ€»ç»“"><a class="anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><p>PowerMock æ­£å¦‚å…¶åï¼Œç¡®å®å¾ˆå¼ºå¤§ï¼Œå¯ä»¥è§£å†³ä¸€äº›æµ‹è¯•ä¸­å¾ˆéš¾æµ‹è¯•çš„ç‚¹æˆ–è€…å’Œæ¡†æ¶ã€ç³»ç»Ÿè¿›è¡Œäº¤äº’çš„åœ°æ–¹ï¼Œç»™æµ‹è¯•å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©æ€§ã€‚PowerMock ä¹Ÿå¯ä»¥å’Œå…¶å®ƒæ¡†æ¶è¿›è¡Œé…åˆä½¿ç”¨ï¼Œæ¯”å¦‚ Robolectricï¼Œå…³äº Robolectric åç»­ä¼šæœ‰ä¸“é—¨çš„ä»‹ç»ã€‚</p><p>è°¢è°¢é˜…è¯»ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ©ã€‚</p><p>æœ¬æ–‡ç¤ºä¾‹ä»£ç ï¼š<a href="https://github.com/cherlas/BlogDemo/tree/master/powermockdemo">PowerMock Demo</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;PowerMock æ¡†æ¶ä¹Ÿæ˜¯å±äº Mock æ¡†æ¶çš„ä¸€ç§ï¼Œå®ƒæ˜¯ä» EasyMock å’Œ Mockito ä¸¤ä¸ªæ¡†æ¶æ‰©å±•è€Œæ¥çš„ï¼Œå…¶æœ€å¤§çš„ä¼˜ç‚¹å°±æ˜¯å¯ä»¥ mock æˆ–è€…å±è”½ä¸€äº›ç§æœ‰ã€é™æ€ã€final ç­‰æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¨‹åºçŒ¿è¿›åŒ–ä¹‹è·¯" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/"/>
    
      <category term="è‡ªåŠ¨åŒ–æµ‹è¯•" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="è‡ªåŠ¨åŒ–æµ‹è¯•" scheme="http://www.istarx.cn/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
      <category term="unit-test" scheme="http://www.istarx.cn/tags/unit-test/"/>
    
      <category term="Mock" scheme="http://www.istarx.cn/tags/Mock/"/>
    
      <category term="PowerMock" scheme="http://www.istarx.cn/tags/PowerMock/"/>
    
  </entry>
  
  <entry>
    <title>å•å…ƒæµ‹è¯•ä¹‹â€” Mockito æ¡†æ¶</title>
    <link href="http://www.istarx.cn/2018/04/29/mockito-framework/"/>
    <id>http://www.istarx.cn/2018/04/29/mockito-framework/</id>
    <published>2018-04-29T13:26:25.000Z</published>
    <updated>2019-02-18T16:56:34.971Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><p>Mock æ„ä¸ºæ¨¡æ‹Ÿï¼ŒæŒ‡æ¨¡æ‹Ÿä¸€ä¸ªä»£ç æ‰€ä¾èµ–çš„æ¡†æ¶ã€ç¬¬ä¸‰æ–¹ä»£ç æˆ–è€…æ„å»ºèµ·æ¥è¾ƒä¸ºå¤æ‚çš„å¯¹è±¡ï¼Œå°†è¢«æµ‹è¯•çš„ä»£ç å’Œå…¶å®ƒä»£ç éš”ç¦»å¼€æ¥ï¼Œè€Œ Mockito æ¡†æ¶æ˜¯ä¸€æ¬¾æµè¡Œçš„ Mock æ¡†æ¶ã€‚</p><a id="more"></a><p><ul class="toc js-fixedContent"><li><a href="#mock%E7%AE%80%E4%BB%8B">Mockç®€ä»‹</a></li><li><a href="#android-studio-%E4%B8%AD%E9%85%8D%E7%BD%AE-mockito">Android Studio ä¸­é…ç½® Mockito</a></li><li><a href="#mockito-%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">Mockito åŸºæœ¬ç”¨æ³•</a><ul><li><a href="#mock-%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1">Mock ä¸€ä¸ªå¯¹è±¡</a></li><li><a href="#serializable-mocks">Serializable Mocks</a><ul><li><a href="#%E9%87%8D%E7%BD%AE-mock">é‡ç½® Mock</a></li></ul></li><li><a href="#%E5%8F%82%E6%95%B0%E5%8C%B9%E9%85%8D">å‚æ•°åŒ¹é…</a></li><li><a href="#%E5%8F%82%E6%95%B0%E6%8D%95%E6%8D%89">å‚æ•°æ•æ‰</a></li><li><a href="#stub-%E6%8F%92%E6%A1%A9">Stub æ’æ¡©</a><ul><li><a href="#%E5%85%A8%E9%83%A8%E6%A8%A1%E6%8B%9Fmock-%E5%92%8C%E9%83%A8%E5%88%86%E6%A8%A1%E6%8B%9Fspy-%E8%BF%9B%E8%A1%8C-stub">å…¨éƒ¨æ¨¡æ‹Ÿ(Mock) å’Œéƒ¨åˆ†æ¨¡æ‹Ÿ(Spy) è¿›è¡Œ Stub</a></li><li><a href="#%E5%AF%B9-void-%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C-stub">å¯¹ void æ–¹æ³•è¿›è¡Œ stub</a></li><li><a href="#%E5%AF%B9%E5%90%8C%E4%B8%80%E4%B8%AA%E6%96%B9%E6%B3%95%E8%BF%9B%E8%A1%8C%E8%BF%9E%E7%BB%AD-stub">å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿ç»­ stub</a></li><li><a href="#%E4%B8%BA%E6%9C%AA%E8%BF%9B%E8%A1%8C-stub-%E7%9A%84%E6%96%B9%E6%B3%95%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E8%BF%94%E5%9B%9E%E5%80%BC">ä¸ºæœªè¿›è¡Œ stub çš„æ–¹æ³•è®¾ç½®é»˜è®¤è¿”å›å€¼</a></li></ul></li><li><a href="#%E9%AA%8C%E8%AF%81-verify">éªŒè¯ verify</a><ul><li><a href="#%E8%A1%8C%E4%B8%BA%E9%AA%8C%E8%AF%81">è¡Œä¸ºéªŒè¯</a></li><li><a href="#%E8%B0%83%E7%94%A8%E6%AC%A1%E6%95%B0%E9%AA%8C%E8%AF%81">è°ƒç”¨æ¬¡æ•°éªŒè¯</a></li><li><a href="#%E8%B0%83%E7%94%A8%E6%AC%A1%E5%BA%8F%E9%AA%8C%E8%AF%81">è°ƒç”¨æ¬¡åºéªŒè¯</a></li><li><a href="#%E9%AA%8C%E8%AF%81-mock-%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E4%BA%A4%E4%BA%92">éªŒè¯ mock å¯¹è±¡æ˜¯å¦äº¤äº’</a></li><li><a href="#%E6%9F%A5%E6%89%BE%E6%98%AF%E5%90%A6%E6%9C%89%E6%9C%AA%E9%AA%8C%E8%AF%81%E7%9A%84%E4%BA%A4%E4%BA%92">æŸ¥æ‰¾æ˜¯å¦æœ‰æœªéªŒè¯çš„äº¤äº’</a></li><li><a href="#%E8%B6%85%E6%97%B6%E9%AA%8C%E8%AF%81">è¶…æ—¶éªŒè¯</a></li></ul></li></ul></li></ul></p><h2 id="mockç®€ä»‹"><a class="anchor" href="#mockç®€ä»‹"></a> Mockç®€ä»‹</h2><p>å½“æˆ‘ä»¬æ‰€å†™çš„ä»£ç ç›¸å¯¹ç®€å•æ—¶ï¼Œè¢«æµ‹è¯•ä»£ç ä¸ä¼šæˆ–è€…å¾ˆå°‘ä¾èµ–å…¶å®ƒçš„ç±»å’Œä»£ç ï¼Œä½†æ˜¯å½“ä»£ç è¾ƒä¸ºå¤æ‚æ—¶ï¼Œè¢«æµ‹è¯•ä»£ç å…ä¸äº†äºç³»ç»Ÿä¸­å…¶å®ƒçš„éƒ¨åˆ†è¿›è¡Œäº¤äº’ï¼Œè¿™ç»™æµ‹è¯•å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ã€‚è¿˜æœ‰å¦å¤–ä¸€ç§æƒ…å†µï¼Œåœ¨æµ‹è¯•å»ºç«‹åˆå§‹æ¡ä»¶æ—¶ï¼Œå¯¹äºä¸€äº›æ„å»ºæ¯”è¾ƒå¤æ‚éš¾ä»¥æ„å»ºçš„å¯¹è±¡ï¼ŒåŒæ ·ç»™æµ‹è¯•å¸¦æ¥ä¸€å®šå›°éš¾ã€‚æ­¤æ—¶ Mock æ¡†æ¶å°±æ˜¾ç¤ºå‡ºäº†å…¶ä½œç”¨æ‰€åœ¨ã€‚</p><p>å•å…ƒæµ‹è¯•çš„ç›®çš„æ˜¯æŠŠè¢«æµ‹è¯•ä»£ç å’Œå…¶å®ƒéƒ¨åˆ†ç›¸éš”ç¦»ï¼Œå½“æˆä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒæ¥è¿›è¡Œæµ‹è¯•ï¼Œè¿™æ ·å¯ä»¥è®©ä½ æ— è§†è¢«æµ‹è¯•å•å…ƒæ‰€ä¾èµ–éƒ¨åˆ†è¿è¡Œçš„å‡†ç¡®æ€§ï¼Œä»è€Œè¾¾åˆ°å‡†ç¡®æµ‹è¯•çš„ç›®çš„ã€‚</p><p><a href="https://github.com/mockito/mockito">Mockito</a> æ¡†æ¶æ˜¯ä¸€æ¬¾æ¯”è¾ƒæµè¡Œçš„ Mock æ¡†æ¶ï¼Œå½“å‰æœ€æ–°ç‰ˆæ˜¯ 2.18.5ï¼Œä½†æ˜¯ gradle æ’ä»¶åœ¨ maven ä»“åº“ä¸­åªèƒ½ä¸‹è½½åˆ°2.18.3 ç‰ˆæœ¬ã€‚å…¶ä¸ä»…å¯ä»¥ç”¨äº java å·¥ç¨‹ï¼Œè¿˜å¯ä»¥æ­é… <code>dexmaker</code> ç”¨äºAndroid é¡¹ç›®ä¸­ã€‚ç±»ä¼¼çš„æ¡†æ¶è¿˜æœ‰ EasyMockã€PowerMock ç­‰ã€‚</p><h2 id="android-studio-ä¸­é…ç½®-mockito"><a class="anchor" href="#android-studio-ä¸­é…ç½®-mockito"></a> Android Studio ä¸­é…ç½® Mockito</h2><p>åœ¨ Mockito 2.6.1ç‰ˆæœ¬å¼€å§‹ï¼ŒMockito å›¢é˜Ÿä¸“é—¨ä¸º Android åšäº†ç›¸å…³æ”¯æŒï¼Œä¸ºäº†åœ¨ Android Test æµ‹è¯•ä¸­ä½¿ç”¨ Mockitoï¼Œéœ€è¦å¼•å…¥ä»¥ä¸‹ä¾èµ–ï¼š</p><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">repositories</span> &#123;</span><br><span class="line">jcenter() <span class="comment">// æˆ–è€… mavenCenter(), aliyunä»“åº“ç­‰</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">dependencies</span> &#123;</span><br><span class="line">...</span><br><span class="line">testCompile <span class="string">'org.mockito:mockito-core:2.18.5'</span></span><br><span class="line">androidTestCompile <span class="string">'org.mockito:mockito-android:2.18.5'</span> <span class="comment">// ä¸èƒ½å’Œ inline mock maker ä¸€èµ·ä½¿ç”¨</span></span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>mockito-android:</code>ä¾èµ–ä¸­å·²ç»åŒ…å«äº†<code>mockito-core</code>ï¼Œæ‰€ä»¥ä¸éœ€è¦å•ç‹¬æ·»åŠ è¯¥ä¾èµ–ã€‚</p><h2 id="mockito-åŸºæœ¬ç”¨æ³•"><a class="anchor" href="#mockito-åŸºæœ¬ç”¨æ³•"></a> Mockito åŸºæœ¬ç”¨æ³•</h2><p>Mockito æ¡†æ¶æœ‰å®˜æ–¹è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ï¼Œåœ°å€ä¸º <a href="http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html">http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html</a></p><h3 id="mock-ä¸€ä¸ªå¯¹è±¡"><a class="anchor" href="#mock-ä¸€ä¸ªå¯¹è±¡"></a> Mock ä¸€ä¸ªå¯¹è±¡</h3><p>å‡è®¾æœ‰å¦‚ä¸‹ä¸€ä¸ªç±»ä»¥åŠä¸€ä¸ªæ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentDatabaseHelper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">queryStudentWithId</span><span class="params">(<span class="keyword">int</span> id)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateNewScoreWithId</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> score)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä½¿ç”¨<code>mock</code>æ–¹æ³•ï¼š</p><p><code>mock()</code>æ–¹æ³•æ˜¯æœ€åŸºæœ¬çš„ mock ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œæ— è®ºæ˜¯ç±»ã€æ¥å£éƒ½å¯ä»¥è¿›è¡Œæ¨¡æ‹Ÿï¼Œå…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Student student = mock(Student.class);</span><br><span class="line">StudentDatabaseHelper databaseHelper = mock(StudentDatabaseHelper.class);</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>@Mock</code>æ³¨é‡Šï¼š</p><p>ä½¿ç”¨<code>@Mock</code>æ³¨é‡Šæœ‰ä»¥ä¸‹å‡ ä¸ªæœ‰ç‚¹ï¼š</p><ul><li>å‡å°‘ä»£ç é‡ï¼›</li><li>å¢åŠ ä»£ç çš„å¯è¯»æ€§ï¼›</li><li>è®©verifyå‡ºé”™ä¿¡æ¯æ›´æ˜“è¯»ï¼Œå› ä¸ºå˜é‡åå¯ç”¨æ¥æè¿°æ ‡è®°mockå¯¹è±¡ï¼›</li></ul><p>å…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Mock</span> <span class="keyword">private</span> Student student;</span><br><span class="line"><span class="meta">@Mock</span> <span class="keyword">private</span> StudentDatabaseHelper databaseHelper;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@Before</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">MockitoAnnotations.initMocks(<span class="keyword">this</span>);  <span class="comment">// å¾ˆé‡è¦ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨åŸºç±»æˆ–è€… Runner ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>Spy</code>æ–¹æ³•æˆ–è€…<code>@Spy</code>æ³¨é‡Šï¼š</p><p><code>Spy</code>å’Œ<code>Mock</code>çš„ä¸»è¦åŒºåˆ«åœ¨äº<code>Mock</code>æ¨¡æ‹Ÿçš„å¯¹è±¡æ˜¯å…¨éƒ¨æ¨¡æ‹Ÿï¼Œå¿…é¡»æ˜¾å¼çš„å¯¹ç±»æˆ–æ¥å£ä¸­çš„æ–¹æ³•è¿›è¡Œ stubï¼›è€Œ <code>Spy</code>åˆ™æ˜¯éƒ¨åˆ†æ¨¡æ‹Ÿï¼Œå…¶å¯¹æ˜¾å¼ stub çš„æ–¹æ³•æ‰§è¡Œ stub ç»“æœï¼Œä½†æ˜¯å¯¹æ²¡æœ‰æ˜¾å¼ stub çš„æ–¹æ³•åˆ™æ‰§è¡ŒåŸæ–¹æ³•ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Spy</span> Student student = <span class="keyword">new</span> Student(); </span><br><span class="line"><span class="comment">//ä¸Šé¢çš„æ¨¡æ‹Ÿæ–¹æ³•å¯ä»¥ç®€å†™æˆ</span></span><br><span class="line"><span class="meta">@Spy</span> Student student; <span class="comment">// Mockito ä¼šè‡ªåŠ¨å®ä¾‹åŒ–</span></span><br><span class="line"><span class="comment">// ä»¥ä¸‹æ˜¯ç”¨ spy æ–¹æ³•æ¨¡æ‹Ÿ</span></span><br><span class="line">Student student = <span class="keyword">new</span> Student();</span><br><span class="line">Student spyStudent = spy(student);</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨<code>@InjectMocks</code>æ³¨é‡Šï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@InjectMocks</span> Student; <span class="comment">// Mockito ä¼šè‡ªåŠ¨å®ä¾‹åŒ–è¯¥ç±»</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="serializable-mocks"><a class="anchor" href="#serializable-mocks"></a> Serializable Mocks</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">serializableMockTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student student = mock(Student.class, withSettings().serializable());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="é‡ç½®-mock"><a class="anchor" href="#é‡ç½®-mock"></a> é‡ç½® Mock</h4><p>å®˜æ–¹æ–‡æ¡£ä¸­æç¤ºä¸è¦åœ¨æµ‹è¯•ç”¨ä¾‹è¿›è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨é‡ç½® Mockã€‚é‡ç½® Mock ä½¿ç”¨ <code>reset()</code>æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resetMockTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student student = mock(Student.class);</span><br><span class="line">    doNothing().when(student).setScore(<span class="number">99</span>);</span><br><span class="line">    student.setScore(<span class="number">99</span>);</span><br><span class="line">    reset(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°åŒ¹é…"><a class="anchor" href="#å‚æ•°åŒ¹é…"></a> å‚æ•°åŒ¹é…</h3><p>å½“å¯¹æ–¹æ³•è¿›è¡Œæ’æ¡©æˆ–è€…è¿›è¡ŒéªŒè¯æ—¶ï¼Œå¯ä»¥é…åˆ Harmcrest åŒ¹é…å™¨è¿›è¡Œå‚æ•°åŒ¹é…ï¼ŒMockito æ¡†æ¶é›†æˆäº†åŒ¹é…å™¨ï¼Œå¹¶å¯¹å…¶è¿›è¡Œäº†ä¸€å®šçš„æ‰©å±•ï¼Œå› æ­¤å¯ä»¥ç›´æ¥è¿›è¡Œä½¿ç”¨ï¼Œä¸éœ€è¦æ·»åŠ ä¾èµ–ã€‚</p><p>Mockito æ¡†æ¶å¯¹åŒ¹é…å™¨æ‰€åšçš„æ‰©å±•çš„ç±»ä¸º<code>MockitoHamcrest</code>ï¼Œå…¶å†…éƒ¨æ–¹æ³•éƒ½æ˜¯ä»¥å¦‚ä¸‹å½¢å¼å‘½åçš„ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> xxx <span class="title">xxxThat</span><span class="params">(Matcher&lt;xxx&gt; matcher)</span></span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­çš„<code>xxx</code>å¯ä»¥ä¸º<code>arg</code>ã€<code>boolean</code>ã€<code>byte</code>ã€<code>char</code>ä»¥åŠåŸºç¡€æ•°æ®ç±»å‹ï¼Œä¸€ä½å¯¹æŸä¸€ç±»å‹çš„å‚æ•°è¿›è¡ŒåŒ¹é…ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">argMatcherTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;String&gt; mockList = mock(ArrayList.class);</span><br><span class="line"></span><br><span class="line">    when(mockList.get(anyInt())).thenReturn(<span class="string">"arg matcher0"</span>);</span><br><span class="line">    assertEquals(<span class="string">"arg matcher0"</span>, mockList.get(<span class="number">0</span>));</span><br><span class="line">    assertEquals(<span class="string">"arg matcher0"</span>, mockList.get(<span class="number">4</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ä»¥å†™ lambda è¡¨è¾¾å¼</span></span><br><span class="line">    when(mockList.get(intThat(i -&gt; i &gt; <span class="number">5</span>))).thenReturn(<span class="string">"big than 5"</span>);</span><br><span class="line">    assertEquals(<span class="string">"big than 5"</span>, mockList.get(<span class="number">999</span>));</span><br><span class="line"></span><br><span class="line">    when(mockList.indexOf(argThat((String str) -&gt; str.length() &gt; <span class="number">5</span>))).thenReturn(<span class="number">5</span>);</span><br><span class="line">    assertEquals(<span class="number">5</span>, mockList.indexOf(<span class="string">"arg matcher test"</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é™¤äº†ä»¥ä¸ŠåŒ¹é…å™¨ä»¥å¤–ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰åŒ¹é…å™¨ï¼Œå…·ä½“è¯·æŸ¥çœ‹ <a href="http://www.istarx.cc/2018/02/11/hamcrest-matcher/">Harmcrest è‡ªå®šä¹‰åŒ¹é…å™¨</a> æ–‡ç« ã€‚</p><div class="alert warning"><p>å¦‚æœåœ¨ stub æˆ–è€… éªŒè¯çš„è¿‡ç¨‹ä¸­å¯¹æŸä¸ªæ–¹æ³•ä½¿ç”¨äº†å‚æ•°åŒ¹é…ï¼Œåˆ™æ‰€æœ‰çš„å‚æ•°éƒ½å¿…é¡»ä½¿ç”¨å‚æ•°åŒ¹é…ï¼Œå¯¹äºç¡®å®šçš„å€¼éœ€è¦ä½¿ç”¨<code>eq()</code>åŒ¹é…å™¨ã€‚</p></div><h3 id="å‚æ•°æ•æ‰"><a class="anchor" href="#å‚æ•°æ•æ‰"></a> å‚æ•°æ•æ‰</h3><p>å‚æ•°æ•æ‰æŒ‡å¯¹æŸä¸€æ–¹æ³•çš„å‚æ•°è¿›è¡Œæ•æ‰ï¼Œå¹¶å¯¹å…¶è¿›è¡ŒéªŒè¯ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">argumentCaptureTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student student = mock(Student.class);</span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ– ArgumentCaptor å¯¹è±¡</span></span><br><span class="line">    ArgumentCaptor&lt;Integer&gt; captor = ArgumentCaptor.forClass(Integer.class);</span><br><span class="line"></span><br><span class="line">    student.setScore(<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å…ˆéªŒè¯å†æ•æ‰å‚æ•°</span></span><br><span class="line">    verify(student).setScore(captor.capture());</span><br><span class="line">    assertEquals(<span class="number">100</span>, (<span class="keyword">int</span>)captor.getValue());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="stub-æ’æ¡©"><a class="anchor" href="#stub-æ’æ¡©"></a> Stub æ’æ¡©</h3><p>å¯¹æ¨¡æ‹Ÿçš„å¯¹è±¡è¿›è¡Œæ’æ¡©ä¸»è¦ä½¿ç”¨æ–¹æ³•<code>when</code>ï¼Œé…åˆ<code>thenReturn</code>ã€<code>doThrow</code>ç­‰æ–¹æ³•å®Œæˆã€‚å¯¹æ–¹æ³•è¿›è¡Œ stub æ˜¯ Mock æ¡†æ¶çš„æ ¸å¿ƒæ‰€åœ¨ã€‚</p><h4 id="å…¨éƒ¨æ¨¡æ‹Ÿmock-å’Œéƒ¨åˆ†æ¨¡æ‹Ÿspy-è¿›è¡Œ-stub"><a class="anchor" href="#å…¨éƒ¨æ¨¡æ‹Ÿmock-å’Œéƒ¨åˆ†æ¨¡æ‹Ÿspy-è¿›è¡Œ-stub"></a> å…¨éƒ¨æ¨¡æ‹Ÿ(Mock) å’Œéƒ¨åˆ†æ¨¡æ‹Ÿ(Spy) è¿›è¡Œ Stub</h4><p>ç”±äºæ¨¡æ‹Ÿä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™å¯ä»¥å…¨éƒ¨æ¨¡æ‹Ÿ(å³ Mock)ï¼Œä¹Ÿå¯ä»¥éƒ¨åˆ†æ¨¡æ‹Ÿ(å³Spy)ï¼Œä¸¤è€…ç¨å¾®æœ‰æ‰€åŒºåˆ«ã€‚ä¸‹é¢æ˜¯ä»¥ ArraryList è¿›è¡Œç®€å•çš„ä¸¾ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span>(expected = IndexOutOfBoundsException.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stubbingTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// mock ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    ArrayList&lt;String&gt; mockList = mock(ArrayList.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’æ¡©</span></span><br><span class="line">    when(mockList.get(<span class="number">0</span>)).thenReturn(<span class="string">"mock stub test"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//éªŒè¯</span></span><br><span class="line">    assertEquals(<span class="string">"mock stub test"</span>, mockList.get(<span class="number">0</span>));</span><br><span class="line">    assertNull(mockList.get(<span class="number">1</span>)); <span class="comment">// å› ä¸º mockList.get(1) æ–¹æ³•æ²¡æœ‰æ’æ¡©ï¼Œæ‰€ä»¥è¿”å› nullï¼›</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// spy ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    ArrayList&lt;String&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    ArrayList&lt;String&gt; spyList = spy(arrayList);</span><br><span class="line"></span><br><span class="line">    spyList.add(<span class="string">"one"</span>);</span><br><span class="line">    spyList.add(<span class="string">"two"</span>);</span><br><span class="line"></span><br><span class="line">    assertEquals(<span class="string">"one"</span>, spyList.get(<span class="number">0</span>));</span><br><span class="line">    <span class="comment">// ä¸‹é¢è¯­å¥ä¼šè¾“å‡º two.</span></span><br><span class="line">    System.out.println(spyList.get(<span class="number">1</span>));</span><br><span class="line">    <span class="comment">// spyList.get(2) ä¼šæŠ›å‡º IndexOutOfBoundsException</span></span><br><span class="line">    assertNull(spyList.get(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹-void-æ–¹æ³•è¿›è¡Œ-stub"><a class="anchor" href="#å¯¹-void-æ–¹æ³•è¿›è¡Œ-stub"></a> å¯¹ void æ–¹æ³•è¿›è¡Œ stub</h4><p>å¦‚æœä¸€ä¸ªæ–¹æ³•è¿”å›è¿”å›ä¸ºç©ºï¼Œåˆ™éœ€è¦ç‰¹å®šçš„æ–¹æ³•è¿›è¡Œ stubã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">doXXX().when(mockObj).someMethod([arg1, arg2, ...]);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ <code>doXXX()</code>å¯ä»¥æ˜¯<code>doNothing()</code>ã€<code>doCallRealMethod</code>ã€<code>doThrow()</code>ã€<code>doAnswer()</code>å…¶ä¸­çš„ä¸€ç§ï¼šä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stubVoidMethodTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    StudentDatabaseHelper helper = mock(StudentDatabaseHelper.class);</span><br><span class="line">    Object object = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œè¯¥ stub çš„æ–¹æ³•æ—¶ä¸åšä»»ä½•äº‹</span></span><br><span class="line">    doNothing().when(helper).updateNewScoreWithId(anyInt(), anyInt());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œè¯¥ stub çš„æ–¹æ³•æ—¶æ‰§è¡Œè¯¥æ–¹æ³•çœŸæ­£çš„æ–¹æ³•ä½“ï¼Œç”±äºæœ¬æ–¹æ³•æ˜¯ abstract çš„ï¼Œæ‰€ä»¥æ­¤å¤„åœ¨ç¼–è¯‘æ—¶ä¼šæŠ¥é”™</span></span><br><span class="line">    <span class="comment">// doCallRealMethod().when(helper).updateNewScoreWithId(anyInt(), anyInt());</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œè¯¥ stub çš„æ–¹æ³•æ—¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</span></span><br><span class="line">    doThrow(RuntimeException.class).when(helper).updateNewScoreWithId(anyInt(), anyInt());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ‰§è¡Œè¯¥ stub çš„æ–¹æ³•æ—¶æ‰§è¡Œç‰¹å®šçš„æ“ä½œ</span></span><br><span class="line">    doAnswer(invocation -&gt; &#123;</span><br><span class="line">        Object[] arguments = invocation.getArguments();</span><br><span class="line">        <span class="keyword">if</span> (arguments.length == <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> arguments[<span class="number">0</span>];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> arguments[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).when(helper).updateNewScoreWithId(anyInt(), anyInt());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿ç»­-stub"><a class="anchor" href="#å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿ç»­-stub"></a> å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿ç»­ stub</h4><p>æŸäº›æ—¶å€™ï¼Œåœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­é‡å¤è°ƒç”¨äº†æŸä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”æ­¤æ–¹æ³•æ˜¯è¢«æµ‹è¯•å•å…ƒä¹‹å¤–éœ€è¦è¿›è¡Œ stub çš„ã€‚ä½¿ç”¨ä¹‹å‰çš„æ–¹æ³•ï¼Œå¯¹æ¯æ¬¡æ–¹æ³•çš„è°ƒç”¨éƒ½ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">when(mockObj.someMethod()).thenReturn(<span class="string">"value"</span>);</span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾å¾—ä»£ç ä¼šå¾ˆç´¯èµ˜ã€‚Mockito æ¡†æ¶æä¾›äº†ä¸€ç§ç®€å•çš„è¿­ä»£çš„æ–¹æ³•å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œ stubã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">consecutiveStubTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student mockStudent = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    when(mockStudent.getName())</span><br><span class="line">        .thenReturn(<span class="string">"name1"</span>)</span><br><span class="line">        .thenReturn(<span class="string">"name2"</span>)</span><br><span class="line">        .thenReturn(<span class="string">"name3"</span>)</span><br><span class="line">        .thenReturn(<span class="string">"name4"</span>);</span><br><span class="line"></span><br><span class="line">    assertEquals(<span class="string">"name1"</span>, mockStudent.getName());</span><br><span class="line">    assertEquals(<span class="string">"name2"</span>, mockStudent.getName());</span><br><span class="line">    assertEquals(<span class="string">"name3"</span>, mockStudent.getName());</span><br><span class="line">    assertEquals(<span class="string">"name4"</span>, mockStudent.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸ºæœªè¿›è¡Œ-stub-çš„æ–¹æ³•è®¾ç½®é»˜è®¤è¿”å›å€¼"><a class="anchor" href="#ä¸ºæœªè¿›è¡Œ-stub-çš„æ–¹æ³•è®¾ç½®é»˜è®¤è¿”å›å€¼"></a> ä¸ºæœªè¿›è¡Œ stub çš„æ–¹æ³•è®¾ç½®é»˜è®¤è¿”å›å€¼</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDefaultReturnValues</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student student = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ©ç”¨ thenAnswer() è®¾ç½®é»˜è®¤è¿”å›å€¼</span></span><br><span class="line">    when(student.getName()).thenAnswer(invocation -&gt; <span class="string">"default value"</span>);</span><br><span class="line"></span><br><span class="line">    assertEquals(<span class="string">"default value"</span>, student.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éªŒè¯-verify"><a class="anchor" href="#éªŒè¯-verify"></a> éªŒè¯ verify</h3><h4 id="è¡Œä¸ºéªŒè¯"><a class="anchor" href="#è¡Œä¸ºéªŒè¯"></a> è¡Œä¸ºéªŒè¯</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verifyTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student mockStudent = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// stub æ–¹æ³•</span></span><br><span class="line">    when(mockStudent.getName()).thenReturn(<span class="string">"name1"</span>);</span><br><span class="line">    doNothing().when(mockStudent).setScore(<span class="number">99</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è°ƒç”¨ stub ä¹‹åçš„æ–¹æ³•</span></span><br><span class="line">    mockStudent.setScore(<span class="number">99</span>);</span><br><span class="line">    mockStudent.getName();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯</span></span><br><span class="line">    verify(mockStudent).setScore(<span class="number">99</span>); <span class="comment">// éªŒè¯æ·»åŠ å‚æ•°çš„æ–¹æ³•</span></span><br><span class="line">    verify(mockStudent).getName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨æ¬¡æ•°éªŒè¯"><a class="anchor" href="#è°ƒç”¨æ¬¡æ•°éªŒè¯"></a> è°ƒç”¨æ¬¡æ•°éªŒè¯</h4><p>Mockito æä¾›äº†å‡ ä¸ªå¸¸ç”¨çš„éªŒè¯è°ƒç”¨æ¬¡æ•°çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ©ç”¨è¿™äº›æ–¹æ³•å¯¹å¾…æµ‹è¯•ä»£ç æ‰€è°ƒç”¨çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨æ¬¡æ•°ä¸Šçš„ç²¾ç¡®éªŒè¯ï¼š</p><ul><li><code>times(n)</code> - éªŒè¯å…·ä½“çš„è°ƒç”¨æ¬¡æ•°ï¼Œn ä¸ºå…·ä½“æ­£æ•´æ•°ï¼Œä»£è¡¨æ‰€éœ€è¦éªŒè¯çš„æ¬¡æ•°ï¼Œåœ¨ verify ä¸­é»˜è®¤éªŒè¯æ¬¡æ•°ä¸º 1ï¼›</li><li><code>atLeast(n)</code> - å­—é¢æ„æ€ï¼ŒéªŒè¯è‡³å°‘è°ƒç”¨çš„æ¬¡æ•°ï¼›</li><li><code>atLeastOnce()</code> - å³<code>atLeast(1)</code>;</li><li><code>atMost(n)</code> - å’Œ<code>atLeast</code>ç›¸åï¼Œè¡¨ç¤ºè‡³å¤šè°ƒç”¨å¤šå°‘æ¬¡ï¼›</li><li><code>never()</code> - è¡¨ç¤ºéªŒè¯ä»æœªè°ƒç”¨è¿‡è¯¥æ–¹æ³•ï¼Œç­‰ä»·äº<code>times(0)</code>;</li></ul><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verifyCallTimesTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student mockStudent = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    mockStudent.setScore(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    mockStudent.setScore(<span class="number">2</span>);</span><br><span class="line">    mockStudent.setScore(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    verify(mockStudent).setScore(<span class="number">1</span>);</span><br><span class="line">    verify(mockStudent, times(<span class="number">1</span>)).setScore(<span class="number">1</span>);</span><br><span class="line">    verify(mockStudent, atLeast(<span class="number">1</span>)).setScore(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    verify(mockStudent, times(<span class="number">2</span>)).setScore(<span class="number">2</span>);</span><br><span class="line">    verify(mockStudent, atMost(<span class="number">5</span>)).setScore(<span class="number">2</span>);</span><br><span class="line">    verify(mockStudent, atLeastOnce()).setScore(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    verify(mockStudent, never()).setScore(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è°ƒç”¨æ¬¡åºéªŒè¯"><a class="anchor" href="#è°ƒç”¨æ¬¡åºéªŒè¯"></a> è°ƒç”¨æ¬¡åºéªŒè¯</h4><p>éªŒè¯è°ƒç”¨æ¬¡åºä¸»è¦ç”¨åˆ°äº†<code>InOrder</code>ç±»ä¸­çš„<code>verify()</code>æ–¹æ³•ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verifyOrderTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student singleMockStudent = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    singleMockStudent.setScore(<span class="number">1</span>);</span><br><span class="line">    singleMockStudent.setScore(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ–ä¸€ä¸ª inOrder å¯¹è±¡</span></span><br><span class="line">    InOrder inOrder = Mockito.inOrder(singleMockStudent);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯å‚æ•°ä¸º 1 çš„æ–¹æ³•å…ˆäºå‚æ•°ä¸º 2 çš„æ–¹æ³•è¿è¡Œ</span></span><br><span class="line">    inOrder.verify(singleMockStudent).setScore(<span class="number">1</span>);</span><br><span class="line">    inOrder.verify(singleMockStudent).setScore(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    Student firstStudent = mock(Student.class);</span><br><span class="line">    Student secondStudent = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    firstStudent.setScore(<span class="number">3</span>);</span><br><span class="line">    secondStudent.setScore(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®ä¾‹åŒ– inOrder å¯¹è±¡ï¼Œå‚æ•°ä¸ºéœ€è¦è¿›è¡ŒéªŒè¯è°ƒç”¨æ¬¡åºçš„ mock å¯¹è±¡</span></span><br><span class="line">    inOrder = Mockito.inOrder(firstStudent, secondStudent);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// verify</span></span><br><span class="line">    inOrder.verify(firstStudent).setScore(<span class="number">3</span>);</span><br><span class="line">    inOrder.verify(secondStudent).setScore(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="éªŒè¯-mock-å¯¹è±¡æ˜¯å¦äº¤äº’"><a class="anchor" href="#éªŒè¯-mock-å¯¹è±¡æ˜¯å¦äº¤äº’"></a> éªŒè¯ mock å¯¹è±¡æ˜¯å¦äº¤äº’</h4><p>éªŒè¯å¯¹è±¡æ˜¯å¦è¿›è¡Œäº¤äº’çš„æ„æ€æ˜¯éªŒè¯æµ‹è¯•ç”¨ä¾‹ä¸­ mock çš„å¯¹è±¡åœ¨éªŒè¯ä¹‹å‰æ˜¯å¦ä¸ä¹‹äº§ç”Ÿäº¤äº’ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verifyInteractionTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student firstStudent = mock(Student.class);</span><br><span class="line">    Student secondStudent = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    firstStudent.setScore(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ­£å¸¸çš„éªŒè¯è¡Œä¸º</span></span><br><span class="line">    verify(firstStudent).setScore(<span class="number">1</span>);</span><br><span class="line">    verify(secondStudent, never()).setScore(anyInt());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// äº¤äº’éªŒè¯ secondStudent ä»æœªè¿›è¡Œäº¤äº’ </span></span><br><span class="line">    verifyZeroInteractions(secondStudent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŸ¥æ‰¾æ˜¯å¦æœ‰æœªéªŒè¯çš„äº¤äº’"><a class="anchor" href="#æŸ¥æ‰¾æ˜¯å¦æœ‰æœªéªŒè¯çš„äº¤äº’"></a> æŸ¥æ‰¾æ˜¯å¦æœ‰æœªéªŒè¯çš„äº¤äº’</h4><p>ä¸»è¦æ˜¯éªŒè¯å¯¹æŸä¸ª mock å¯¹è±¡è¿›è¡Œäº†æ“ä½œï¼Œå¹¶ä¸”å¯¹æ“ä½œè¿›è¡Œäº† verifyã€‚ä¸ä»‹æ„åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨ï¼Œå®˜æ–¹æ–‡æ¡£åŸæ–‡ä¸ºï¼š</p><blockquote><p>A word of <strong>warning</strong>: Some users who did a lot of classic, expect-run-verify mocking tend to use <code>verifyNoMoreInteractions()</code> very often, even in every test method. <code>verifyNoMoreInteractions()</code> is not recommended to use in every test method. <code>verifyNoMoreInteractions()</code> is a handy assertion from the interaction testing toolkit. Use it only when itâ€™s relevant. Abusing it leads to <strong>overspecified</strong>, <strong>less maintainable</strong> tests. You can find further reading <a href="http://monkeyisland.pl/2008/07/12/should-i-worry-about-the-unexpected/">here</a>.</p></blockquote><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span>(expected = NoInteractionsWanted.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">noMoreInteractionsTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Student student = mock(Student.class);</span><br><span class="line"></span><br><span class="line">    student.setScore(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// éªŒè¯å¤±è´¥ï¼ŒæŠ›å‡º NoInteractionsWanted å¼‚å¸¸</span></span><br><span class="line">    verifyNoMoreInteractions(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="è¶…æ—¶éªŒè¯"><a class="anchor" href="#è¶…æ—¶éªŒè¯"></a> è¶…æ—¶éªŒè¯</h4><p>è¶…æ—¶éªŒè¯æ˜¯ç”¨æ¥éªŒè¯æŸä¸€ç‰¹å®šçš„æ–¹æ³•æˆ–è€…æ“ä½œåœ¨è§„å®šçš„æ—¶é—´å†…èƒ½æ‰§è¡Œå®Œæ¯•ï¼Œé˜²æ­¢è¿›ç¨‹é˜»å¡æˆ–è€…æ›´æ–°ç¼“æ…¢ç­‰ï¼Œç»™ç”¨æˆ·å¸¦æ¥ä¸å‹å¥½çš„ä½“éªŒã€‚</p><p>åœ¨<a href="http://www.istarx.cc/2018/04/24/unit-test-annotation/">JUnitåŸºæœ¬æ³¨é‡Š</a>ä¸€æ–‡ä¸­ä¹Ÿæåˆ°äº†è¶…æ—¶æµ‹è¯•ï¼Œåˆ©ç”¨<code>@Test(timeout = time_with_ms)</code>çš„æ³¨é‡Šå¯ä»¥å¯¹æ•´ä¸ªæµ‹è¯•ç”¨ä¾‹è¿è¡Œçš„æ‰§è¡Œæ—¶é•¿è¿›è¡Œæµ‹è¯•ã€‚PowerMock åŒæ ·ä¹Ÿæä¾›äº†<code>verify</code> + <code>timeout</code>çš„æ–¹æ³•å¯¹æŸä¸€ç‰¹å®šçš„æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼Œ ä½†å…¶éªŒè¯çš„ä½œç”¨æ˜¯åœ¨éªŒè¯ä¹‹å‰å¯¹è¿›ç¨‹é˜»å¡ä¸€æ®µæ—¶é—´ï¼Œä¹‹åå†å»éªŒè¯ã€‚ä¾‹å¦‚ï¼š</p><p>è¢«æµ‹è¯•ä»£ç ä¸¤ä¸ªæ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeoutDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">timeoutMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// do something here</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">timeoutTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    TimeoutDemo demo = mock(TimeoutDemo.class);</span><br><span class="line"></span><br><span class="line">    doCallRealMethod().when(demo).timeoutMethod();</span><br><span class="line">    demo.timeoutMethod();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å»¶è¿Ÿ 200ms å†éªŒè¯è¯¥æ–¹æ³•æ˜¯å¦æ‰§è¡Œè¿‡</span></span><br><span class="line">    verify(demo,timeout(<span class="number">200</span>)).timeoutMethod();</span><br><span class="line">    <span class="comment">// ç­‰ä»·ä¸ä¸‹é¢è¿™å¥</span></span><br><span class="line">    verify(demo, timeout(<span class="number">200</span>).times(<span class="number">1</span>)).timeoutMethod();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰éªŒè¯æ¨¡å¼</span></span><br><span class="line">    verify(demo,<span class="keyword">new</span> Timeout(<span class="number">200</span>, <span class="keyword">new</span> VerificationMode() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">verify</span><span class="params">(VerificationData data)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// custom verify mode</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> VerificationMode <span class="title">description</span><span class="params">(String description)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)).timeoutMethod();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="alert warning"><p><code>timeout()</code>æ–¹æ³•éœ€è¦1.8.5 ç‰ˆæœ¬ä¹‹åæ‰å¯ä»¥ä½¿ç”¨ã€‚</p></div>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Mock æ„ä¸ºæ¨¡æ‹Ÿï¼ŒæŒ‡æ¨¡æ‹Ÿä¸€ä¸ªä»£ç æ‰€ä¾èµ–çš„æ¡†æ¶ã€ç¬¬ä¸‰æ–¹ä»£ç æˆ–è€…æ„å»ºèµ·æ¥è¾ƒä¸ºå¤æ‚çš„å¯¹è±¡ï¼Œå°†è¢«æµ‹è¯•çš„ä»£ç å’Œå…¶å®ƒä»£ç éš”ç¦»å¼€æ¥ï¼Œè€Œ Mockito æ¡†æ¶æ˜¯ä¸€æ¬¾æµè¡Œçš„ Mock æ¡†æ¶ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¨‹åºçŒ¿è¿›åŒ–ä¹‹è·¯" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/"/>
    
      <category term="è‡ªåŠ¨åŒ–æµ‹è¯•" scheme="http://www.istarx.cn/categories/%E7%A8%8B%E5%BA%8F%E7%8C%BF%E8%BF%9B%E5%8C%96%E4%B9%8B%E8%B7%AF/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
    
      <category term="è‡ªåŠ¨åŒ–æµ‹è¯•" scheme="http://www.istarx.cn/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/"/>
    
      <category term="unit-test" scheme="http://www.istarx.cn/tags/unit-test/"/>
    
      <category term="Mock" scheme="http://www.istarx.cn/tags/Mock/"/>
    
      <category term="Mockito" scheme="http://www.istarx.cn/tags/Mockito/"/>
    
  </entry>
  
</feed>
