
<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="baidu-site-verification" content="fJhstNzkJ1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="小一 | 莫舍己道 勿扰他心">
    <title>SQL 中的 UNIQUE 关键字 - 小一 | 莫舍己道 勿扰他心</title>
    <meta name="author" content="小一">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0" />
    <link rel="Shortcut Icon" href="http://www.istarx.cn/assets/images/favicon.ico" type="image/x-icon">
    
        <meta name="keywords" content="unique,sql">
    
    
        <link rel="icon" href="http://www.istarx.cn/assets/images/favicon.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    
    
    
        
    
    
        <meta property="og:image" content="http://www.istarx.cn/assets/images/avatar.png"/>
    
    
    
        <meta property="og:image" content="http://cherlas-blog.oss-cn-beijing.aliyuncs.com/unique.jpg"/>
        <meta class="swiftype" name="image" data-type="enum"
              content="http://cherlas-blog.oss-cn-beijing.aliyuncs.com/unique.jpg"/>
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-nquzy2nicpec0tkfrvwuyo3aijjvo4igqdkvgzeqswz9wqwkivchz2f9ma1k.min.css">
    <!--STYLES END-->
    

    

</head>

<body>
<div id="container">
    <canvas id="anm-canvas" data-behavior="2" class="anm-canvas hidden"></canvas>
    <div id="blog">
        <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="2" class="fade-in">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">小一 | 莫舍己道 勿扰他心</a>
    </div>
    <i class="btn-open-search fa fa-lg fa-search"></i>
    
        
        <a class="header-right-picture  " href=" #about ">
            
        
            <img class="header-picture" src="/assets/images/avatar.png" alt="作者的图片">
        
        </a>
    
</header>

        <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="2" class="hidden fade-in">
    <div class="sidebar-top-whitespace"></div>
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <!-- 头像效果-start -->
                <div class="ih-item circle effect right_to_left">
                    <a href="/ ">
                        <img class="sidebar-profile-picture" src="/assets/images/avatar.png" alt="作者的图片">
                        <div class="info">
                            <div class="info-back">
                                <h2>
                                    
                                    Android
                                    
                                </h2>
                                <p>
                                    
                                    Python
                                    
                                </p>
                            </div>
                        </div>
                    </a>
                </div>
                <!-- 头像效果-end -->
                <h4 class="sidebar-profile-name">小一</h4>
                
                    <h5 class="sidebar-profile-bio"><p>莫舍己道,勿扰他心.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/#blog">
                            
                            <i class="sidebar-button-icon fa fa-lg fa-home" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">首页</span>
                        </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories">
                            
                            <i class="sidebar-button-icon fa fa-lg fa-bookmark" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">分类</span>
                        </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags">
                            
                            <i class="sidebar-button-icon fa fa-lg fa-tags" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">标签</span>
                        </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives">
                            
                            <i class="sidebar-button-icon fa fa-lg fa-archive" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">归档</span>
                        </a>
            </li>
            
                <li class="sidebar-button">
                    
                    <a class="sidebar-button-link open-search-col" rel="noopener">
                    
                            <i class="sidebar-button-icon fa fa-lg fa-search" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">搜索</span>
                        </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about">
                            
                            <i class="sidebar-button-icon fa fa-lg fa-question" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">关于</span>
                        </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/cherlas" target="_blank" rel="noopener">
                    
                            <i class="sidebar-button-icon fa fa-lg fa-github" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">GitHub</span>
                        </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:vm@li.cm" target="_blank" rel="noopener">
                    
                            <i class="sidebar-button-icon fa fa-lg fa-envelope-o" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">邮箱</span>
                        </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml">
                            
                            <i class="sidebar-button-icon fa fa-lg fa-rss" aria-hidden="true"></i>
                            <span class="sidebar-button-desc">RSS</span>
                        </a>
            </li>
            
        </ul>
        
    </div>
    <div class="sidebar-bottom-whitespace"></div>
</nav>

        
<div class="post-header-cover fade-in header-image-cover
                    text-left
                    post-header-cover--partial" style="background-image:url('http://cherlas-blog.oss-cn-beijing.aliyuncs.com/unique.jpg');
      filter: blur(0px); 
      height: 60%;" data-behavior="2">
</div>
<div class="post-header-cover fade-in post-header-cover-background
                            text-left
                            post-header-cover--partial" style="
     
             height: 60%;
     " data-behavior="2">

    
    <div class="post-header main-content-wrap text-left fadeInDown">
    <div class="post-header-message content-with-table">
        
        <h1 class="post-title" itemprop="headline">
            SQL 中的 UNIQUE 关键字
        </h1>
        
        
        <div class="post-meta">
    <time itemprop="datePublished" datetime="2018-12-17T16:19:45+08:00">
        <img class="calendar" src="/assets/images/calendar.png">
        
        12月 17, 2018
        
    </time>
    
    <span>发布在 </span>
    
<a class="category-link" href="/categories/程序猿进化之路/">程序猿进化之路</a>


    
    
    <img class="tag-img" src="/assets/images/tag-icon.svg">
    <div class="post-tags">
        
        <a href="/tags/sql/">sql</a>
        
    </div>
    
</div>

        
    </div>
</div>

    
</div>


        <div id="main" data-behavior="2"
             class="hasCover
                        hasCoverMetaIn
                         hidden fade-in">
            
<article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
    
    
    <div class="tableTile" data-message="目录">
    </div>
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap fadeInDown toc content-with-table">
            <script src="/assets/js/APlayer.min.js"> </script><p>本文主要对工作中由<code>UNIQUE</code>唯一性约束更改导致数据库升级拷贝数据的时候导致数据丢失，引发VPN改变的问题做一个简单的笔记，顺便梳理一下UNIQUE关键字相关的知识。</p>
<a id="more"></a>
<p><ul class="toc js-fixedContent">
<li><a href="#%E8%B5%B7%E5%9B%A0">起因</a></li>
<li><a href="#%E8%A7%A3%E5%86%B3%E8%BF%87%E7%A8%8B">解决过程</a></li>
<li><a href="#%E6%B6%89%E5%8F%8A%E5%88%B0%E7%9A%84%E7%9F%A5%E8%AF%86">涉及到的知识</a>
<ul>
<li><a href="#%E5%BC%80%E5%90%AFsql-log">开启SQL log</a>
<ul>
<li><a href="#%E6%AD%A3%E5%B8%B8%E5%BC%80%E5%90%AFsql-log%E7%9A%84%E6%96%B9%E6%B3%95">正常开启SQL log的方法</a></li>
<li><a href="#%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9prop%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E5%BC%80%E5%90%AFlog">通过修改prop文件进行开启log</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</p>
<h2 id="起因"><a class="anchor" href="#起因"></a> 起因</h2>
<p>前几天收到了用户提的一个故障，故障描述是这样的：从Android O版本通过fota升级到P版本的时候，会导致升级之后的VPN发生改变，由cmnet更改为cmwap。在用户手机上的表现为升级之后网络异常卡顿，微信消息接受缓慢，尤其聊天图片甚至发生发送不出去或者接收不到的情况。</p>
<h2 id="解决过程"><a class="anchor" href="#解决过程"></a> 解决过程</h2>
<p>在 Android 中与 VPN相关的模块为 TelephonyProvider，而在设置里面加载默认APN的时候也是通过uri去 TelephonyProvider 中进行查询。所有运营商的 APN 相关的配置是通过需求从运营商拿到数据之后配置到apn-config.xml 文件中的，而手机第一次开机的时候 TelephonyProvider 会解析此 xml 文件，加载所有 APN，并保存到 telephony.db 数据库里面的 carriers 表中(具体路径为：/data/user_de/0/com.android.providers.telephony/databases/telephony.db，需要root才能看得到)。因此此次问题就可以定位到了 TelephonyProvider 中的数据库从O升级到P 的时候发生异常。</p>
<p>APN加载是用sharedPreference 保存的apn_id进行数据库查询，在升级onUpgrade完成之后利用此id更新一些必要的字段，在加载新版本的apn-config.xml文件之后反向利用这些字段查询apn_id.查看xml保存的字段内容发现查询到的该apn_id对应的字段和升级之前数据库中数据不一致，进而也说明了数据库升级的时候发生了异常。</p>
<p>接着再说说 TelephonyProvider 模块中和 apn 相关的数据库升级流程。由于要兼容各个 Android 版本，所以在provider的onUpgrade()方法中对不同版本的数据库进行了处理，主要做的工作有以下两点：</p>
<ul>
<li>通过 ALTER 关键字对旧版本数据库增加列；</li>
<li>对旧表数据进行拷贝；
<ul>
<li>创建一个carriers_tmp 表（新版本的建表语句）;</li>
<li>
<span class="highlight-text red">查询 carriers 表中的所有数据并逐条插入到carriers_tmp表中；</span>
</li>
<li>删除 carriers 表；</li>
<li>将carriers_tmp 重命名为 carriers;</li>
</ul>
</li>
</ul>
<p>接到这个问题第一时间看了下log发现没有与表拷贝相关的输入，因此加了一些输出log并模拟fota升级流程，果不其然是上述红色步骤出了问题：在执行完上述第二步之后利用apn_id查询对应的数据库内容已经和第二步执行之前的数据库内容不一致(实际问题中差了一行)；</p>
<p>开启SQLite相关log发现在数据拷贝的过程中插入某一行的时候会插入失败，提示违反唯一性约束。新表比旧表少了一行数据，所以查询内容出错也就那么意外了。</p>
<p>接着对比升级前后的代码果然发现在升级后的数据库建表语句中减少了一个唯一性约束条件，这也就是这个问题的罪魁祸首了。</p>
<div class="alert info"><p>如果建表的时候做了唯一性约束，那么在插入数据的时候数据库会对约束字段进行检查，如果这些字段和已有数据中某一行一致，难么插入新数据的时候会产生冲突，java中可以利用<code>insertWithOnConflict()</code>方法实现。</p>
</div>
<h2 id="涉及到的知识"><a class="anchor" href="#涉及到的知识"></a> 涉及到的知识</h2>
<h3 id="开启sql-log"><a class="anchor" href="#开启sql-log"></a> 开启SQL log</h3>
<h4 id="正常开启sql-log的方法"><a class="anchor" href="#正常开启sql-log的方法"></a> 正常开启SQL log的方法</h4>
<p>Android上默认是关闭SQL log的，在对数据库进行操作的时候除非在java代码里面打印，否则看不到数据库操作详情，就算在java代码里面进行了打印，也不一定发现数据库操作发生的问题。</p>
<p>因此在做数据库相关分析的时候除了在java层进行打印，也应该打开SQL 相关的log进行分析；打开方法如下：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">adb shell setprop log.tag.SQLiteLog VERBOSE</span><br><span class="line">adb shell setprop log.tag.SQLiteStatements VERBOSE</span><br></pre></td></tr></table></figure>
<p>但是上述方法有不好的一点就是如果手机重启，则上述方法会在重启之后失效。由于做TelephonyProvider升级相关的分析，手机必须得重启。因此上述方法不见得可行。</p>
<h4 id="通过修改prop文件进行开启log"><a class="anchor" href="#通过修改prop文件进行开启log"></a> 通过修改prop文件进行开启log</h4>
<p>在Android 开机的时候会从<code>/vendor/build.prop</code> 和 <code>system/build.prop</code>以及<code>/product/build.prop</code>文件加载prop属性。因此只需要修改prop文件就可以达到重启可用的目的。</p>
<p>这里修改/vendor/build.prop`文件，加入以下代码：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">log.tag.SQLiteLog=VERBOSE</span><br><span class="line">log.tag.SQLiteStatements=VERBOSE</span><br></pre></td></tr></table></figure>
<p>之后进行重启那么SQL log也不会关闭了。</p>
<div class="alert info"><ul>
<li>此方法必须在手机root之后或者刷debug、eng版本才可以操作；</li>
<li>在修改prop文件的时候可能因为权限无法修改，此时要么修改权限，要么可以把文件pull出来修改完毕再push进去即可；</li>
</ul>
</div>
<p>###SQL语句中的 UNIQUE 关键字</p>
<p><code>UNIQUE</code>是SQL中用来对字段进行唯一性约束的关键字，它可以约束一个键，也可以约束多个键（约束多个键时这个键值的组合唯一）。SQL 关键字中和 UNIQUE功能比较相似的是<code>PRIMARY</code>，这两个关键字虽然功能上很相似，但是还是有一定的区别：</p>
<ul>
<li>
<p><code>PRIMARY</code>只可以约束一个键，被约束的键称为<code>主键</code>，而<code>UNIQUE</code>可以修饰多个键，但唯一性约束所在的列并不是表的主键列；</p>
</li>
<li>
<p><code>UNIQUE</code> 约束的键值可以为空，但是<code>PRIMARY</code>约束的键值不可以为空并不可重复，即：</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">PRIMARY</span> = <span class="keyword">UNIQUE</span> + <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>PRIMARY 约束是为了让外键引用；</p>
</li>
<li>
<p>一个表最多只有一个主键，但可以有很多UNIQUE约束的键；</p>
</li>
</ul>
<h4 id="example"><a class="anchor" href="#example"></a> Example</h4>
<p>新建一个用户资料表，建表语句如下，其中_id为主键，name_text和id_card_number用唯一性约束。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> unique_test ( </span><br><span class="line">	_id <span class="built_in">INTEGER</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span> , </span><br><span class="line">	name_text <span class="built_in">VARCHAR</span> ( <span class="number">20</span> ), </span><br><span class="line">	age <span class="built_in">INTEGER</span>, </span><br><span class="line">	id_card_number <span class="built_in">VARCHAR</span> ( <span class="number">18</span> ), </span><br><span class="line">	<span class="keyword">UNIQUE</span> ( name_text, id_card_number ) );</span><br></pre></td></tr></table></figure>
<p>接着插入三条数据到该表中：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">10</span>,<span class="string">"123456"</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name2"</span>,<span class="number">20</span>,<span class="string">"234561"</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"234561"</span>);</span><br></pre></td></tr></table></figure>
<p>接着插入下面这条数据：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"123456"</span>);</span><br></pre></td></tr></table></figure>
<p>运行完这条语句则会报错，提示如下：</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">Duplicate <span class="keyword">entry</span> <span class="symbol">'name1</span>-<span class="number">123456</span>' <span class="keyword">for</span> key <span class="symbol">'name_text</span>'</span><br></pre></td></tr></table></figure>
<p>为什么呢？是因为name_text字段和id_card_number字段是被UNIQUE进行约束的，因此这两个字断的组合在数据库表中应该保持唯一，但是上面一天数据的组合<code>name1-123456</code>和插入的第一条数据重复，因此会提示错误。</p>
<p>如果要插入的时候不报错，则可以使用<code>ignore</code>或者<code>update</code>方法：</p>
<ul>
<li>
<p><code>ignore</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">IGNORE</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"123456"</span>);</span><br></pre></td></tr></table></figure>
<p>这条插入的数据直接被忽略；</p>
</li>
<li>
<p><code>update</code>方法:</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> unique_test(name_text,age,id_card_number)  <span class="keyword">VALUES</span>(<span class="string">"name1"</span>,<span class="number">30</span>,<span class="string">"123456"</span>) <span class="keyword">ON</span> <span class="keyword">DUPLICATE</span> <span class="keyword">KEY</span> <span class="keyword">UPDATE</span> id_card_number = <span class="string">'654321'</span>;</span><br></pre></td></tr></table></figure>
<p>运行完毕后当前数据库表中的记录个数不会发生变化，但是已有的数据会中的<code>id_card_number</code>值会被更新为<code>654321</code>。</p>
</li>
</ul>

            

        </div>
        
            <div class="tableContent fade-in" data-message="true"></div>
        
        
            <div class="post-copyright main-content-wrap content-with-table">
    <p class="copyright-item">
        <span>原文作者: </span>
        <a href="http://http://www.istarx.cn">小一</a>
    </p>
    <p class="copyright-item">
        <span>原文链接: </span>
        <a href="http://www.istarx.cn/2018/12/17/unique-keyword-of-mysql/">http://www.istarx.cn/2018/12/17/unique-keyword-of-mysql/</a>
    </p>
    <p class="copyright-item">
        <span>许可协议: </span>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议，转载请注明出处，谢谢.</a>
    </p>
</div>

        
    </div>
    
        <div id="post-footer" class="post-footer main-content-wrap content-with-table">
            
                <div class="post-footer-tags">
                    <span class="text-color-light text-small">标签</span><br>
                    
<div class="tagcloud article-tag-list">
    
    <li class="article-tag-list-item">
        <a href="/tags/sql/" class="js-tag color4">sql</a>
    </li>
    
    <div class="clearfix"></div>
</div>


                </div>
            
            
                <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/22/arts-week-zero/" data-tooltip="ARTS打卡—第0周" aria-label="上一篇: ARTS打卡—第0周">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/05/07/robolectric-framework/" data-tooltip="单元测试之 —  Robolectric 框架" aria-label="下一篇: 单元测试之 —  Robolectric 框架">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
                    
                    <i class="fa fa-arrow-up" aria-hidden="true"></i>
                </a>
        </li>
    </ul>
</div>


            
            
        </div>
    
</article>



            <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 小一. All Rights Reserved.
    </span>
</footer>

        </div>
        
        <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/03/22/arts-week-zero/" data-tooltip="ARTS打卡—第0周" aria-label="上一篇: ARTS打卡—第0周">
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                
                <a class="post-action-btn btn btn--default tooltip--top" href="/2018/05/07/robolectric-framework/" data-tooltip="单元测试之 —  Robolectric 框架" aria-label="下一篇: 单元测试之 —  Robolectric 框架">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
                    
                    <i class="fa fa-arrow-up" aria-hidden="true"></i>
                </a>
        </li>
    </ul>
</div>


        </div>
        <div id="share-options-bar" class="share-options-bar" data-behavior="2">
    <i id="btn-close-shareoptions" class="fa fa-close"></i>
    <ul class="share-options">
        
    </ul>
</div>

        
    </div>
    


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png" alt="作者的图片">
        
            <h4 id="about-card-name">小一</h4>
        
            <div id="about-card-bio"><p>莫舍己道,勿扰他心.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>Android开发<br>自动化测试</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br>
                ShanXi Xi&#39;an
            </div>
        
    </div>
</div>

    

<!-- Define author's picture -->


    
        
    

<div id="cover" style="background-image:url('http://cherlas-blog.oss-cn-beijing.aliyuncs.com/cover.jpg');">
    <div class="first-page-desc-container">
        <span class="first-page-desc pulse"></span>
    </div>
    <div class="full-screen-head hidden">
        <!-- 头像效果-start -->
        <div class="ih-item circle effect right_to_left fade-in">
            <a href="/#blog" class="blog-button-full-screen">
                <img class="sidebar-profile-picture" src="/assets/images/avatar.png" alt="作者的图片">
                <div class="info">
                    <div class="info-back">
                        <h2>
                            
                            Android
                            
                        </h2>
                        <p>
                            
                            Python
                            
                        </p>
                    </div>
                </div>
            </a>
        </div>
        <!-- 头像效果-end -->
    </div>
</div>

    <!--SCRIPTS-->
<script src="/assets/js/script-u1uqfoexpfffrbin0dmisld9miqjoh9wh42nzzalbtskiwbib07yrwp0sckj.min.js"></script>
<!--SCRIPTS END-->


<script src="https://cdn.jsdelivr.net/npm/moment@2.20.1/min/moment-with-locales.min.js"></script>
<script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script>
  var algoliaClient = algoliasearch('8N47Y2YYXB', '6ed86c6c2611f5cfdbfc015301c1bdb2');
  var algoliaIndex = algoliaClient.initIndex('blog-index');
</script>


<script>
  window.onload = function() {
    if (location.hash !== '#blog' && location.hash !== '' && location.hash !== '#') {
      window.location.hash = '';
    }
  };
</script>

    <div data-behavior="2" class="search-tools-col hide">
    <div class="tools-wrap">
        <section class="tools-section tools-section-all">
            <div class="search-wrap">
                <input class="search-ipt" type="text" placeholder="find something…">
                <i class="icon-search icon"></i>
                <i class="icon-close icon "></i>
            </div>
            <div class="widget tagcloud search-tag">
                <ul class="article-tag-list">
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color3">android</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color1">自动化测试</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color2">UIAutomator</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color4">proguard</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color4">espresso</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">ARTS</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color2">gradle</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">productflavors</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color1">sourcecode</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">hexo</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color1">theme</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color3">主题</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">blog</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color4">hamcrest</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">unit-test</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">Mock</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color5">PowerMock</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color3">Mockito</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color2">robolectric</a>
                    </li>
                    
                    <li class="article-tag-list-item">
                        <a class="js-tag color4">sql</a>
                    </li>
                    
                    <div class="clearfix"></div>
                </ul>
            </div>
            <p class="results-count hide" data-message-zero="没有找到文章" data-message-one="找到 1 篇文章" data-message-other="找到 {n} 篇文章">
                找到 22 篇文章
            </p>
            <div class="search-result">
                
                <div class="media">
    <a class="search-title" href="/2018/02/10/android-autotest-summary/"><i class="fa fa-quote-left"></i><span id="search-post-title">Android 自动化测试总述</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-02-10</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#android</span>
        
            <span id="search-post-tags">#自动化测试</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/01/15/andoid-autotest-apis-complete/"><i class="fa fa-quote-left"></i><span id="search-post-title">UI Automator API 整理</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-01-15</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#android</span>
        
            <span id="search-post-tags">#自动化测试</span>
        
            <span id="search-post-tags">#UIAutomator</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/04/19/android-proguard/"><i class="fa fa-quote-left"></i><span id="search-post-title">Andoid ProGuard</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-04-19</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#proguard</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/04/09/android-test-espresso/"><i class="fa fa-quote-left"></i><span id="search-post-title">Android 自动化测试之 — Espresso</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-04-09</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#自动化测试</span>
        
            <span id="search-post-tags">#espresso</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/04/07/android-test-uiautomator/"><i class="fa fa-quote-left"></i><span id="search-post-title">Android 自动化测试之 — UI Automator</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-04-07</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#自动化测试</span>
        
            <span id="search-post-tags">#UIAutomator</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2019/04/27/arts-week-four/"><i class="fa fa-quote-left"></i><span id="search-post-title">ARTS打卡—第4周</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2019-04-27</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#ARTS</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2019/04/21/arts-week-three/"><i class="fa fa-quote-left"></i><span id="search-post-title">ARTS打卡—第3周</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2019-04-21</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#ARTS</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2019/03/31/arts-week-one/"><i class="fa fa-quote-left"></i><span id="search-post-title">ARTS打卡—第1周</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2019-03-31</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#ARTS</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2019/04/14/arts-week-two/"><i class="fa fa-quote-left"></i><span id="search-post-title">ARTS打卡—第2周</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2019-04-14</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#ARTS</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2019/03/22/arts-week-zero/"><i class="fa fa-quote-left"></i><span id="search-post-title">ARTS打卡—第0周</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2019-03-22</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#ARTS</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/02/04/build-mulit-edition-apks-using-productflavors/"><i class="fa fa-quote-left"></i><span id="search-post-title">利用 ProductFlavors 构建差异化APK版本</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-02-04</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#android</span>
        
            <span id="search-post-tags">#gradle</span>
        
            <span id="search-post-tags">#productflavors</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/02/03/download-android-source-code/"><i class="fa fa-quote-left"></i><span id="search-post-title">Android 源代码下载与编译</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-02-03</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#android</span>
        
            <span id="search-post-tags">#sourcecode</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/03/08/creat-your-custom-hexo-theme-from-scratch/"><i class="fa fa-quote-left"></i><span id="search-post-title">从零开始制作自己的 Hexo 主题</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-03-08</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#hexo</span>
        
            <span id="search-post-tags">#theme</span>
        
            <span id="search-post-tags">#主题</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/01/09/eatablish-your-own-blog-with-hexo-and-github-pages/"><i class="fa fa-quote-left"></i><span id="search-post-title">Hexo + Github 搭建属于自己的小窝</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-01-09</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#hexo</span>
        
            <span id="search-post-tags">#blog</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
                <div class="media">
    <a class="search-title" href="/2018/02/11/hamcrest-matcher/"><i class="fa fa-quote-left"></i><span id="search-post-title">Hamcrest 匹配器</span></a>
    <p class="search-time">
        <i class="fa fa-calendar icon"></i>
        <span id="search-post-tags">2018-02-11</span>
    </p>
    
    <p class="search-result-meta">
    <i class="fa fa-tags icon"></i>
        
            <span id="search-post-tags">#android</span>
        
            <span id="search-post-tags">#hamcrest</span>
        
    </p>
    
    <div class="clearfix"></div>
</div>

                
            </div>
        </section>
    </div>
</div>

</div>
</body>
</html>
